try{self["workbox:core:7.2.0"]&&_()}catch{}const Th=(e,...n)=>{let r=e;return n.length>0&&(r+=` :: ${JSON.stringify(n)}`),r},Ch=Th;class Ae extends Error{constructor(n,r){const i=Ch(n,r);super(i),this.name=n,this.details=r}}const Rn={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},Ra=e=>[Rn.prefix,e,Rn.suffix].filter(n=>n&&n.length>0).join("-"),Ih=e=>{for(const n of Object.keys(Rn))e(n)},Wa={updateDetails:e=>{Ih(n=>{typeof e[n]=="string"&&(Rn[n]=e[n])})},getGoogleAnalyticsName:e=>e||Ra(Rn.googleAnalytics),getPrecacheName:e=>e||Ra(Rn.precache),getPrefix:()=>Rn.prefix,getRuntimeName:e=>e||Ra(Rn.runtime),getSuffix:()=>Rn.suffix};function rc(e,n){const r=n();return e.waitUntil(r),r}try{self["workbox:precaching:7.2.0"]&&_()}catch{}const Mh="__WB_REVISION__";function Dh(e){if(!e)throw new Ae("add-to-cache-list-unexpected-type",{entry:e});if(typeof e=="string"){const l=new URL(e,location.href);return{cacheKey:l.href,url:l.href}}const{revision:n,url:r}=e;if(!r)throw new Ae("add-to-cache-list-unexpected-type",{entry:e});if(!n){const l=new URL(r,location.href);return{cacheKey:l.href,url:l.href}}const i=new URL(r,location.href),s=new URL(r,location.href);return i.searchParams.set(Mh,n),{cacheKey:i.href,url:s.href}}class Sh{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:n,state:r})=>{r&&(r.originalRequest=n)},this.cachedResponseWillBeUsed=async({event:n,state:r,cachedResponse:i})=>{if(n.type==="install"&&r&&r.originalRequest&&r.originalRequest instanceof Request){const s=r.originalRequest.url;i?this.notUpdatedURLs.push(s):this.updatedURLs.push(s)}return i}}}class Nh{constructor({precacheController:n}){this.cacheKeyWillBeUsed=async({request:r,params:i})=>{const s=(i==null?void 0:i.cacheKey)||this._precacheController.getCacheKeyForURL(r.url);return s?new Request(s,{headers:r.headers}):r},this._precacheController=n}}let Dr;function jh(){if(Dr===void 0){const e=new Response("");if("body"in e)try{new Response(e.body),Dr=!0}catch{Dr=!1}Dr=!1}return Dr}async function Kh(e,n){let r=null;if(e.url&&(r=new URL(e.url).origin),r!==self.location.origin)throw new Ae("cross-origin-copy-response",{origin:r});const i=e.clone(),l={headers:new Headers(i.headers),status:i.status,statusText:i.statusText},h=jh()?i.body:await i.blob();return new Response(h,l)}const Ah=e=>new URL(String(e),location.href).href.replace(new RegExp(`^${location.origin}`),"");function oc(e,n){const r=new URL(e);for(const i of n)r.searchParams.delete(i);return r.href}async function Fh(e,n,r,i){const s=oc(n.url,r);if(n.url===s)return e.match(n,i);const l=Object.assign(Object.assign({},i),{ignoreSearch:!0}),h=await e.keys(n,l);for(const d of h){const g=oc(d.url,r);if(s===g)return e.match(d,i)}}class qh{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}const Bh=new Set;async function Uh(){for(const e of Bh)await e()}function Lh(e){return new Promise(n=>setTimeout(n,e))}try{self["workbox:strategies:7.2.0"]&&_()}catch{}function Lo(e){return typeof e=="string"?new Request(e):e}class Yh{constructor(n,r){this._cacheKeys={},Object.assign(this,r),this.event=r.event,this._strategy=n,this._handlerDeferred=new qh,this._extendLifetimePromises=[],this._plugins=[...n.plugins],this._pluginStateMap=new Map;for(const i of this._plugins)this._pluginStateMap.set(i,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(n){const{event:r}=this;let i=Lo(n);if(i.mode==="navigate"&&r instanceof FetchEvent&&r.preloadResponse){const h=await r.preloadResponse;if(h)return h}const s=this.hasCallback("fetchDidFail")?i.clone():null;try{for(const h of this.iterateCallbacks("requestWillFetch"))i=await h({request:i.clone(),event:r})}catch(h){if(h instanceof Error)throw new Ae("plugin-error-request-will-fetch",{thrownErrorMessage:h.message})}const l=i.clone();try{let h;h=await fetch(i,i.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const d of this.iterateCallbacks("fetchDidSucceed"))h=await d({event:r,request:l,response:h});return h}catch(h){throw s&&await this.runCallbacks("fetchDidFail",{error:h,event:r,originalRequest:s.clone(),request:l.clone()}),h}}async fetchAndCachePut(n){const r=await this.fetch(n),i=r.clone();return this.waitUntil(this.cachePut(n,i)),r}async cacheMatch(n){const r=Lo(n);let i;const{cacheName:s,matchOptions:l}=this._strategy,h=await this.getCacheKey(r,"read"),d=Object.assign(Object.assign({},l),{cacheName:s});i=await caches.match(h,d);for(const g of this.iterateCallbacks("cachedResponseWillBeUsed"))i=await g({cacheName:s,matchOptions:l,cachedResponse:i,request:h,event:this.event})||void 0;return i}async cachePut(n,r){const i=Lo(n);await Lh(0);const s=await this.getCacheKey(i,"write");if(!r)throw new Ae("cache-put-with-no-response",{url:Ah(s.url)});const l=await this._ensureResponseSafeToCache(r);if(!l)return!1;const{cacheName:h,matchOptions:d}=this._strategy,g=await self.caches.open(h),v=this.hasCallback("cacheDidUpdate"),I=v?await Fh(g,s.clone(),["__WB_REVISION__"],d):null;try{await g.put(s,v?l.clone():l)}catch(T){if(T instanceof Error)throw T.name==="QuotaExceededError"&&await Uh(),T}for(const T of this.iterateCallbacks("cacheDidUpdate"))await T({cacheName:h,oldResponse:I,newResponse:l.clone(),request:s,event:this.event});return!0}async getCacheKey(n,r){const i=`${n.url} | ${r}`;if(!this._cacheKeys[i]){let s=n;for(const l of this.iterateCallbacks("cacheKeyWillBeUsed"))s=Lo(await l({mode:r,request:s,event:this.event,params:this.params}));this._cacheKeys[i]=s}return this._cacheKeys[i]}hasCallback(n){for(const r of this._strategy.plugins)if(n in r)return!0;return!1}async runCallbacks(n,r){for(const i of this.iterateCallbacks(n))await i(r)}*iterateCallbacks(n){for(const r of this._strategy.plugins)if(typeof r[n]=="function"){const i=this._pluginStateMap.get(r);yield l=>{const h=Object.assign(Object.assign({},l),{state:i});return r[n](h)}}}waitUntil(n){return this._extendLifetimePromises.push(n),n}async doneWaiting(){let n;for(;n=this._extendLifetimePromises.shift();)await n}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(n){let r=n,i=!1;for(const s of this.iterateCallbacks("cacheWillUpdate"))if(r=await s({request:this.request,response:r,event:this.event})||void 0,i=!0,!r)break;return i||r&&r.status!==200&&(r=void 0),r}}class Zh{constructor(n={}){this.cacheName=Wa.getRuntimeName(n.cacheName),this.plugins=n.plugins||[],this.fetchOptions=n.fetchOptions,this.matchOptions=n.matchOptions}handle(n){const[r]=this.handleAll(n);return r}handleAll(n){n instanceof FetchEvent&&(n={event:n,request:n.request});const r=n.event,i=typeof n.request=="string"?new Request(n.request):n.request,s="params"in n?n.params:void 0,l=new Yh(this,{event:r,request:i,params:s}),h=this._getResponse(l,i,r),d=this._awaitComplete(h,l,i,r);return[h,d]}async _getResponse(n,r,i){await n.runCallbacks("handlerWillStart",{event:i,request:r});let s;try{if(s=await this._handle(r,n),!s||s.type==="error")throw new Ae("no-response",{url:r.url})}catch(l){if(l instanceof Error){for(const h of n.iterateCallbacks("handlerDidError"))if(s=await h({error:l,event:i,request:r}),s)break}if(!s)throw l}for(const l of n.iterateCallbacks("handlerWillRespond"))s=await l({event:i,request:r,response:s});return s}async _awaitComplete(n,r,i,s){let l,h;try{l=await n}catch{}try{await r.runCallbacks("handlerDidRespond",{event:s,request:i,response:l}),await r.doneWaiting()}catch(d){d instanceof Error&&(h=d)}if(await r.runCallbacks("handlerDidComplete",{event:s,request:i,response:l,error:h}),r.destroy(),h)throw h}}class Hn extends Zh{constructor(n={}){n.cacheName=Wa.getPrecacheName(n.cacheName),super(n),this._fallbackToNetwork=n.fallbackToNetwork!==!1,this.plugins.push(Hn.copyRedirectedCacheableResponsesPlugin)}async _handle(n,r){const i=await r.cacheMatch(n);return i||(r.event&&r.event.type==="install"?await this._handleInstall(n,r):await this._handleFetch(n,r))}async _handleFetch(n,r){let i;const s=r.params||{};if(this._fallbackToNetwork){const l=s.integrity,h=n.integrity,d=!h||h===l;i=await r.fetch(new Request(n,{integrity:n.mode!=="no-cors"?h||l:void 0})),l&&d&&n.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await r.cachePut(n,i.clone()))}else throw new Ae("missing-precache-entry",{cacheName:this.cacheName,url:n.url});return i}async _handleInstall(n,r){this._useDefaultCacheabilityPluginIfNeeded();const i=await r.fetch(n);if(!await r.cachePut(n,i.clone()))throw new Ae("bad-precaching-response",{url:n.url,status:i.status});return i}_useDefaultCacheabilityPluginIfNeeded(){let n=null,r=0;for(const[i,s]of this.plugins.entries())s!==Hn.copyRedirectedCacheableResponsesPlugin&&(s===Hn.defaultPrecacheCacheabilityPlugin&&(n=i),s.cacheWillUpdate&&r++);r===0?this.plugins.push(Hn.defaultPrecacheCacheabilityPlugin):r>1&&n!==null&&this.plugins.splice(n,1)}}Hn.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:e}){return!e||e.status>=400?null:e}};Hn.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:e}){return e.redirected?await Kh(e):e}};class $h{constructor({cacheName:n,plugins:r=[],fallbackToNetwork:i=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new Hn({cacheName:Wa.getPrecacheName(n),plugins:[...r,new Nh({precacheController:this})],fallbackToNetwork:i}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(n){this.addToCacheList(n),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(n){const r=[];for(const i of n){typeof i=="string"?r.push(i):i&&i.revision===void 0&&r.push(i.url);const{cacheKey:s,url:l}=Dh(i),h=typeof i!="string"&&i.revision?"reload":"default";if(this._urlsToCacheKeys.has(l)&&this._urlsToCacheKeys.get(l)!==s)throw new Ae("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(l),secondEntry:s});if(typeof i!="string"&&i.integrity){if(this._cacheKeysToIntegrities.has(s)&&this._cacheKeysToIntegrities.get(s)!==i.integrity)throw new Ae("add-to-cache-list-conflicting-integrities",{url:l});this._cacheKeysToIntegrities.set(s,i.integrity)}if(this._urlsToCacheKeys.set(l,s),this._urlsToCacheModes.set(l,h),r.length>0){const d=`Workbox is precaching URLs without revision info: ${r.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(d)}}}install(n){return rc(n,async()=>{const r=new Sh;this.strategy.plugins.push(r);for(const[l,h]of this._urlsToCacheKeys){const d=this._cacheKeysToIntegrities.get(h),g=this._urlsToCacheModes.get(l),v=new Request(l,{integrity:d,cache:g,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:h},request:v,event:n}))}const{updatedURLs:i,notUpdatedURLs:s}=r;return{updatedURLs:i,notUpdatedURLs:s}})}activate(n){return rc(n,async()=>{const r=await self.caches.open(this.strategy.cacheName),i=await r.keys(),s=new Set(this._urlsToCacheKeys.values()),l=[];for(const h of i)s.has(h.url)||(await r.delete(h),l.push(h.url));return{deletedURLs:l}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(n){const r=new URL(n,location.href);return this._urlsToCacheKeys.get(r.href)}getIntegrityForCacheKey(n){return this._cacheKeysToIntegrities.get(n)}async matchPrecache(n){const r=n instanceof Request?n.url:n,i=this.getCacheKeyForURL(r);if(i)return(await self.caches.open(this.strategy.cacheName)).match(i)}createHandlerBoundToURL(n){const r=this.getCacheKeyForURL(n);if(!r)throw new Ae("non-precached-url",{url:n});return i=>(i.request=new Request(n),i.params=Object.assign({cacheKey:r},i.params),this.strategy.handle(i))}}let Pa;const $c=()=>(Pa||(Pa=new $h),Pa);try{self["workbox:routing:7.2.0"]&&_()}catch{}const Wc="GET",Qo=e=>e&&typeof e=="object"?e:{handle:e};class Fr{constructor(n,r,i=Wc){this.handler=Qo(r),this.match=n,this.method=i}setCatchHandler(n){this.catchHandler=Qo(n)}}class Wh extends Fr{constructor(n,r,i){const s=({url:l})=>{const h=n.exec(l.href);if(h&&!(l.origin!==location.origin&&h.index!==0))return h.slice(1)};super(s,r,i)}}class Vh{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",n=>{const{request:r}=n,i=this.handleRequest({request:r,event:n});i&&n.respondWith(i)})}addCacheListener(){self.addEventListener("message",n=>{if(n.data&&n.data.type==="CACHE_URLS"){const{payload:r}=n.data,i=Promise.all(r.urlsToCache.map(s=>{typeof s=="string"&&(s=[s]);const l=new Request(...s);return this.handleRequest({request:l,event:n})}));n.waitUntil(i),n.ports&&n.ports[0]&&i.then(()=>n.ports[0].postMessage(!0))}})}handleRequest({request:n,event:r}){const i=new URL(n.url,location.href);if(!i.protocol.startsWith("http"))return;const s=i.origin===location.origin,{params:l,route:h}=this.findMatchingRoute({event:r,request:n,sameOrigin:s,url:i});let d=h&&h.handler;const g=n.method;if(!d&&this._defaultHandlerMap.has(g)&&(d=this._defaultHandlerMap.get(g)),!d)return;let v;try{v=d.handle({url:i,request:n,event:r,params:l})}catch(T){v=Promise.reject(T)}const I=h&&h.catchHandler;return v instanceof Promise&&(this._catchHandler||I)&&(v=v.catch(async T=>{if(I)try{return await I.handle({url:i,request:n,event:r,params:l})}catch(S){S instanceof Error&&(T=S)}if(this._catchHandler)return this._catchHandler.handle({url:i,request:n,event:r});throw T})),v}findMatchingRoute({url:n,sameOrigin:r,request:i,event:s}){const l=this._routes.get(i.method)||[];for(const h of l){let d;const g=h.match({url:n,sameOrigin:r,request:i,event:s});if(g)return d=g,(Array.isArray(d)&&d.length===0||g.constructor===Object&&Object.keys(g).length===0||typeof g=="boolean")&&(d=void 0),{route:h,params:d}}return{}}setDefaultHandler(n,r=Wc){this._defaultHandlerMap.set(r,Qo(n))}setCatchHandler(n){this._catchHandler=Qo(n)}registerRoute(n){this._routes.has(n.method)||this._routes.set(n.method,[]),this._routes.get(n.method).push(n)}unregisterRoute(n){if(!this._routes.has(n.method))throw new Ae("unregister-route-but-not-found-with-method",{method:n.method});const r=this._routes.get(n.method).indexOf(n);if(r>-1)this._routes.get(n.method).splice(r,1);else throw new Ae("unregister-route-route-not-registered")}}let Sr;const zh=()=>(Sr||(Sr=new Vh,Sr.addFetchListener(),Sr.addCacheListener()),Sr);function Hh(e,n,r){let i;if(typeof e=="string"){const l=new URL(e,location.href),h=({url:d})=>d.href===l.href;i=new Fr(h,n,r)}else if(e instanceof RegExp)i=new Wh(e,n,r);else if(typeof e=="function")i=new Fr(e,n,r);else if(e instanceof Fr)i=e;else throw new Ae("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return zh().registerRoute(i),i}function Gh(e,n=[]){for(const r of[...e.searchParams.keys()])n.some(i=>i.test(r))&&e.searchParams.delete(r);return e}function*Jh(e,{ignoreURLParametersMatching:n=[/^utm_/,/^fbclid$/],directoryIndex:r="index.html",cleanURLs:i=!0,urlManipulation:s}={}){const l=new URL(e,location.href);l.hash="",yield l.href;const h=Gh(l,n);if(yield h.href,r&&h.pathname.endsWith("/")){const d=new URL(h.href);d.pathname+=r,yield d.href}if(i){const d=new URL(h.href);d.pathname+=".html",yield d.href}if(s){const d=s({url:l});for(const g of d)yield g.href}}class Qh extends Fr{constructor(n,r){const i=({request:s})=>{const l=n.getURLsToCacheKeys();for(const h of Jh(s.url,r)){const d=l.get(h);if(d){const g=n.getIntegrityForCacheKey(d);return{cacheKey:d,integrity:g}}}};super(i,n.strategy)}}function Xh(e){const n=$c(),r=new Qh(n,e);Hh(r)}function ed(e){$c().precache(e)}function nd(e,n){ed(e),Xh(n)}function $e(e,n,r,i,s){return Mn(n,((l,h)=>{const d=l[h];if(d===void 0)throw new TypeError(Bs(h));return d})(e,n),r,i,s)}function Mn(e,n,r,i,s,l){const h=Lr(n,r,i);if(s&&n!==h)throw new RangeError(sf(e,n,r,i,l));return h}function Be(e){return e!==null&&/object|function/.test(typeof e)}function Qe(e,n=Map){const r=new n;return(i,...s)=>{if(r.has(i))return r.get(i);const l=e(i,...s);return r.set(i,l),l}}function Ur(e){return nr({name:e},1)}function nr(e,n){return Dn(r=>({value:r,configurable:1,writable:!n}),e)}function td(e){return Dn(n=>({get:n,configurable:1}),e)}function Va(e){return{[Symbol.toStringTag]:{value:e,configurable:1}}}function ir(e,n){const r={};let i=e.length;for(const s of n)r[e[--i]]=s;return r}function Dn(e,n,r){const i={};for(const s in n)i[s]=e(n[s],s,r);return i}function fi(e,n,r){const i={};for(let s=0;s<n.length;s++){const l=n[s];i[l]=e(l,s,r)}return i}function Vc(e,n,r){const i={};for(let s=0;s<e.length;s++)i[n[s]]=r[e[s]];return i}function an(e,n){const r=Object.create(null);for(const i of e)r[i]=n[i];return r}function ic(e,n){for(const r of n)if(r in e)return 1;return 0}function zc(e,n,r){for(const i of e)if(n[i]!==r[i])return 0;return 1}function Hc(e,n,r){const i={...r};for(let s=0;s<n;s++)i[e[s]]=0;return i}function le(e,...n){return(...r)=>e(...n,...r)}function ac(e){return e[0].toUpperCase()+e.substring(1)}function Gr(e){return e.slice().sort()}function Xo(e,n){return String(n).padStart(e,"0")}function Gn(e,n){return Math.sign(e-n)}function Lr(e,n,r){return Math.min(Math.max(e,n),r)}function Tn(e,n){return[Math.floor(e/n),qr(e,n)]}function qr(e,n){return(e%n+n)%n}function Xn(e,n){return[hi(e,n),za(e,n)]}function hi(e,n){return Math.trunc(e/n)||0}function za(e,n){return e%n||0}function Yo(e){return Math.abs(e%1)===.5}function Gc(e,n,r){let i=0,s=0;for(let d=0;d<=n;d++){const g=e[r[d]],v=bn[d],I=ge/v,[T,S]=Xn(g,I);i+=S*v,s+=T}const[l,h]=Xn(i,ge);return[s+l,h]}function di(e,n,r){const i={};for(let s=n;s>=0;s--){const l=bn[s];i[r[s]]=hi(e,l),e=za(e,l)}return i}function rd(e){if(e!==void 0)return je(e)}function od(e){if(e!==void 0)return Pn(e)}function Jc(e){if(e!==void 0)return Ha(e)}function Pn(e){return el(Ha(e))}function Ha(e){return Xc(pm(e))}function Qc(e,n){if(n==null)throw new RangeError(Bs(e));return n}function Jr(e){if(!Be(e))throw new TypeError(qp);return e}function Ga(e,n,r=e){if(typeof n!==e)throw new TypeError(ct(r,n));return n}function Xc(e,n="number"){if(!Number.isInteger(e))throw new RangeError(Sp(n,e));return e||0}function el(e,n="number"){if(e<=0)throw new RangeError(Np(n,e));return e}function Ja(e){if(typeof e=="symbol")throw new TypeError(Fp);return String(e)}function Vo(e,n){return Be(e)?String(e):je(e,n)}function Qa(e){if(typeof e=="string")return BigInt(e);if(typeof e!="bigint")throw new TypeError(Ap(e));return e}function nl(e,n="number"){if(typeof e=="bigint")throw new TypeError(Kp(n));if(e=Number(e),!Number.isFinite(e))throw new RangeError(jp(n,e));return e}function Fe(e,n){return Math.trunc(nl(e,n))||0}function Xa(e,n){return Xc(nl(e,n),n)}function sc(e,n){return el(Fe(e,n),n)}function es(e,n){let[r,i]=Xn(n,ge),s=e+r;const l=Math.sign(s);return l&&l===-Math.sign(i)&&(s-=l,i+=l*ge),[s,i]}function tr(e,n,r=1){return es(e[0]+n[0]*r,e[1]+n[1]*r)}function Ct(e,n){return es(e[0],e[1]+n)}function gn(e,n){return tr(n,e,-1)}function Xe(e,n){return Gn(e[0],n[0])||Gn(e[1],n[1])}function tl(e,n,r){return Xe(e,n)===-1||Xe(e,r)===1}function ns(e,n=1){const r=BigInt(ge/n);return[Number(e/r),Number(e%r)*n]}function ei(e,n=1){const r=ge/n,[i,s]=Xn(e,r);return[i,s*n]}function vn(e,n=1,r){const[i,s]=e,[l,h]=Xn(s,n);return i*(ge/n)+(l+(r?h/n:0))}function ts(e,n,r=Tn){const[i,s]=e,[l,h]=r(s,n);return[i*(ge/n)+l,h]}function rs(e){return $e(e,"isoYear",zr,Vr,1),e.isoYear===zr?$e(e,"isoMonth",4,12,1):e.isoYear===Vr&&$e(e,"isoMonth",1,9,1),e}function rn(e){return ze({...e,...He,isoHour:12}),e}function ze(e){const n=$e(e,"isoYear",zr,Vr,1),r=n===zr?1:n===Vr?-1:0;return r&&wn(Me({...e,isoDay:e.isoDay+r,isoNanosecond:e.isoNanosecond-r})),e}function wn(e){if(!e||tl(e,_m,wm))throw new RangeError(lt);return e}function et(e){return Gc(e,5,cn)[1]}function pi(e){const[n,r]=Tn(e,ge);return[di(r,5,cn),n]}function uc(e){return ts(e,yn)}function qe(e){return ar(e.isoYear,e.isoMonth,e.isoDay,e.isoHour,e.isoMinute,e.isoSecond,e.isoMillisecond)}function Me(e){const n=qe(e);if(n!==void 0){const[r,i]=Xn(n,Ve);return[r,i*jn+(e.isoMicrosecond||0)*oo+(e.isoNanosecond||0)]}}function os(e,n){const[r,i]=pi(et(e)-n);return wn(Me({...e,isoDay:e.isoDay+i,...r}))}function ni(...e){return ar(...e)/yf}function ar(...e){const[n,r]=rl(...e),i=n.valueOf();if(!isNaN(i))return i-r*Ve}function rl(e,n=1,r=1,i=0,s=0,l=0,h=0){const d=e===zr?1:e===Vr?-1:0,g=new Date;return g.setUTCHours(i,s,l,h),g.setUTCFullYear(e,n-1,r+d),[g,d]}function sr(e,n){let[r,i]=Ct(e,n);i<0&&(i+=ge,r-=1);const[s,l]=Tn(i,jn),[h,d]=Tn(l,oo);return mi(r*Ve+s,h,d)}function mi(e,n=0,r=0){const i=Math.ceil(Math.max(0,Math.abs(e)-Qs)/Ve)*Math.sign(e),s=new Date(e-i*Ve);return ir(Ki,[s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()+i,s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds(),n,r])}function is(e,n){if(n<-Qs)throw new RangeError(lt);const r=e.formatToParts(n),i={};for(const s of r)i[s.type]=s.value;return i}function as(e){return[e.isoYear,e.isoMonth,e.isoDay]}function ol(e,n){return[n,0]}function il(){return $n}function al(e,n){switch(n){case 2:return ss(e)?29:28;case 4:case 6:case 9:case 11:return 30}return 31}function sl(e){return ss(e)?366:365}function ss(e){return e%4==0&&(e%100!=0||e%400==0)}function ul(e){const[n,r]=rl(e.isoYear,e.isoMonth,e.isoDay);return qr(n.getUTCDay()-r,7)||7}function cl(e){return this.id===mr?(({isoYear:n})=>n<1?["gregory-inverse",1-n]:["gregory",n])(e):this.id===rt?Em(e):[]}function id(e){const n=qe(e);if(n<Om){const{isoYear:l}=e;return l<1?["japanese-inverse",1-l]:["japanese",l]}const r=is(uu(rt),n),{era:i,eraYear:s}=Hl(r,rt);return[i,s]}function yi(e){return Dt(e),ur(e,1),e}function Dt(e){return ll(e,1),e}function cc(e){return zc(Hs,e,ll(e))}function ll(e,n){const{isoYear:r}=e,i=$e(e,"isoMonth",1,il(),n);return{isoYear:r,isoMonth:i,isoDay:$e(e,"isoDay",1,al(r,i),n)}}function ur(e,n){return ir(cn,[$e(e,"isoHour",0,23,n),$e(e,"isoMinute",0,59,n),$e(e,"isoSecond",0,59,n),$e(e,"isoMillisecond",0,999,n),$e(e,"isoMicrosecond",0,999,n),$e(e,"isoNanosecond",0,999,n)])}function de(e){return e===void 0?0:Mf(Jr(e))}function gi(e,n=0){e=_n(e);const r=Df(e),i=Nm(e,n);return[Mf(e),i,r]}function cr(e,n,r,i=9,s=0,l=4){n=_n(n);let h=If(n,i,s),d=ls(n),g=so(n,l);const v=ao(n,i,s,1);return h==null?h=Math.max(r,v):pl(h,v),d=fs(d,v,1),e&&(g=(I=>I<4?(I+2)%4:I)(g)),[h,v,d,g]}function vi(e,n=6,r){let i=ls(e=bi(e,si));const s=so(e,7);let l=ao(e,n);return l=Qc(si,l),i=fs(i,l,void 0,r),[l,i,s]}function us(e){return Xs(_n(e))}function fl(e,n){return cs(_n(e),n)}function ad(e){const n=bi(e,ja),r=ot(ja,Dm,n,0);if(!r)throw new RangeError(ct(ja,r));return r}function cs(e,n=4){const r=dl(e);return[so(e,4),...hl(ao(e,n),r)]}function hl(e,n){return e!=null?[bn[e],e<4?9-3*e:-1]:[n===void 0?1:10**(9-n),n]}function ls(e){const n=e[Br];return n===void 0?1:Fe(n,Br)}function fs(e,n,r,i){const s=i?ge:bn[n+1];if(s){const l=bn[n];if(s%((e=Mn(Br,e,1,s/l-(i?0:1),1))*l))throw new RangeError(ct(Br,e))}else e=Mn(Br,e,1,r?10**9:1,1);return e}function dl(e){let n=e[Na];if(n!==void 0){if(typeof n!="number"){if(Ja(n)==="auto")return;throw new RangeError(ct(Na,n))}n=Mn(Na,Math.floor(n),0,9,1)}return n}function _n(e){return e===void 0?{}:Jr(e)}function bi(e,n){return typeof e=="string"?{[n]:e}:Jr(e)}function wi(e){return{overflow:xm[e]}}function hs(e,n,r=9,i=0,s){let l=n[e];if(l===void 0)return s?i:void 0;if(l=Ja(l),l==="auto")return s?i:null;let h=qa[l];if(h===void 0&&(h=gm[l]),h===void 0)throw new RangeError(cf(e,l,qa));return Mn(e,h,i,r,1,Us),h}function ot(e,n,r,i=0){const s=r[e];if(s===void 0)return i;const l=Ja(s),h=n[l];if(h===void 0)throw new RangeError(cf(e,l,n));return h}function pl(e,n){if(n>e)throw new RangeError(am)}function Sn(e){return{branding:ru,epochNanoseconds:e}}function sn(e,n,r){return{branding:ft,calendar:r,timeZone:n,epochNanoseconds:e}}function un(e,n=e.calendar){return{branding:yr,calendar:n,...an(vm,e)}}function Nn(e,n=e.calendar){return{branding:uo,calendar:n,...an(Gs,e)}}function Yr(e,n=e.calendar){return{branding:eu,calendar:n,...an(Gs,e)}}function ti(e,n=e.calendar){return{branding:nu,calendar:n,...an(Gs,e)}}function kn(e){return{branding:tu,...an(Rf,e)}}function Pe(e){return{branding:ou,sign:it(e),...an(Ws,e)}}function ds(e){return ts(e.epochNanoseconds,jn)[0]}function sd(e){return((n,r=1)=>{const[i,s]=n,l=Math.floor(s/r),h=ge/r;return BigInt(i)*BigInt(h)+BigInt(l)})(e.epochNanoseconds)}function ml(e){return e.epochNanoseconds}function ud(e,n,r,i,s){const l=It(i),[h,d]=((G,H)=>{const X=H((G=bi(G,La))[Tf]);let re=Sm(G);return re=Qc(La,re),[re,X]})(s,e),g=Math.max(h,l);if(!d&&$r(g,d))return lc(i,h);if(!d)throw new RangeError(Si);if(!i.sign)return 0;const[v,I,T]=xi(n,r,d),S=ks(T),j=Ri(T),K=Os(T),B=j(I,v,i);rr(d)||(ze(v),ze(B));const V=K(I,v,B,h);return $r(h,d)?lc(V,h):((G,H,X,re,he,ue,ae)=>{const ve=it(G),[be,ln]=ps(re,zs(X,G),X,ve,he,ue,ae),tn=ms(H,be,ln);return G[me[X]]+tn*ve})(V,S(B),h,I,v,S,j)}function lc(e,n){return vn(De(e),bn[n],1)}function ps(e,n,r,i,s,l,h){const d=me[r],g={...n,[d]:n[d]+i},v=h(e,s,n),I=h(e,s,g);return[l(v),l(I)]}function ms(e,n,r){const i=vn(gn(n,r));if(!i)throw new RangeError(pr);return vn(gn(n,e))/i}function cd(e,n){const[r,i,s]=vi(n,5,1);return Sn(ki(e.epochNanoseconds,r,i,s,1))}function ld(e,n,r){let{epochNanoseconds:i,timeZone:s,calendar:l}=n;const[h,d,g]=vi(r);if(h===0&&d===1)return n;const v=e(s);if(h===6)i=((I,T,S,j)=>{const K=nn(S,T),[B,V]=I(K),G=S.epochNanoseconds,H=tt(T,B),X=tt(T,V);if(tl(G,H,X))throw new RangeError(pr);return wl(ms(G,H,X),j)?X:H})(vl,v,n,g);else{const I=v.R(i);i=lr(v,yl(sr(i,I),h,d,g),I,2,0,1)}return sn(i,s,l)}function fd(e,n){return un(yl(e,...vi(n)),e.calendar)}function hd(e,n){const[r,i,s]=vi(n,5);var l;return kn((l=s,ys(e,Qr(r,i),l)[0]))}function dd(e,n){const r=e(n.timeZone),i=nn(n,r),[s,l]=vl(i),h=vn(gn(tt(r,s),tt(r,l)),ji,1);if(h<=0)throw new RangeError(pr);return h}function pd(e,n){const{timeZone:r,calendar:i}=n,s=((l,h,d)=>tt(h,l(nn(d,h))))(bl,e(r),n);return sn(s,r,i)}function yl(e,n,r,i){return gl(e,Qr(n,r),i)}function gl(e,n,r){const[i,s]=ys(e,n,r);return ze({...St(e,s),...i})}function ys(e,n,r){return pi(nt(et(e),n,r))}function ri(e){return nt(e,Ni,7)}function Qr(e,n){return bn[e]*n}function vl(e){const n=bl(e);return[n,St(n,1)]}function bl(e){return bm(6,e)}function md(e,n,r){const i=Math.min(It(e),6);return fr(Oi(De(e,i),n,r),i)}function _i(e,n,r,i,s,l,h,d,g,v){if(i===0&&s===1)return e;const I=$r(i,d)?rr(d)&&i<6&&r>=6?gd:yd:vd;let[T,S,j]=I(e,n,r,i,s,l,h,d,g,v);return j&&i!==7&&(T=((K,B,V,G,H,X,re,he)=>{const ue=it(K);for(let ae=G+1;ae<=V;ae++){if(ae===7&&V!==7)continue;const ve=zs(ae,K);ve[me[ae]]+=ue;const be=vn(gn(re(he(H,X,ve)),B));if(be&&Math.sign(be)!==ue)break;K=ve}return K})(T,S,r,Math.max(6,i),h,d,g,v)),T}function ki(e,n,r,i,s){if(n===6){const l=(h=>h[0]+h[1]/ge)(e);return[nt(l,r,i),0]}return Oi(e,Qr(n,r),i,s)}function Oi(e,n,r,i){let[s,l]=e;i&&l<0&&(l+=ge,s-=1);const[h,d]=Tn(nt(l,n,r),ge);return es(s+h,d)}function nt(e,n,r){return wl(e/n,r)*n}function wl(e,n){return Am[n](e)}function yd(e,n,r,i,s,l){const h=it(e),d=De(e),g=ki(d,i,s,l),v=gn(d,g),I=Math.sign(g[0]-d[0])===h,T=fr(g,Math.min(r,6));return[{...e,...T},tr(n,v),I]}function gd(e,n,r,i,s,l,h,d,g,v){const I=it(e)||1,T=vn(De(e,5)),S=Qr(i,s);let j=nt(T,S,l);const[K,B]=ps(h,{...e,...Vs},6,I,d,g,v),V=j-vn(gn(K,B));let G=0;V&&Math.sign(V)!==I?n=Ct(K,j):(G+=I,j=nt(V,S,l),n=Ct(B,j));const H=Pi(j);return[{...e,...H,days:e.days+G},n,!!G]}function vd(e,n,r,i,s,l,h,d,g,v){const I=it(e),T=me[i],S=zs(i,e);i===7&&(e={...e,weeks:e.weeks+Math.trunc(e.days/7)});const j=hi(e[T],s)*s;S[T]=j;const[K,B]=ps(h,S,i,s*I,d,g,v),V=j+ms(n,K,B)*I*s,G=nt(V,s,l),H=Math.sign(G-V)===I;return S[T]=G,[S,H?B:K,H]}function fc(e,n,r,i){const[s,l,h,d]=(v=>{const I=cs(v=_n(v));return[v.timeZone,...I]})(i),g=s!==void 0;return((v,I,T,S,j,K)=>{T=Oi(T,j,S,1);const B=I.R(T);return gs(sr(T,B),K)+(v?Xr(ri(B)):"Z")})(g,n(g?e(s):At),r.epochNanoseconds,l,h,d)}function hc(e,n,r){const[i,s,l,h,d,g]=(v=>{v=_n(v);const I=Xs(v),T=dl(v),S=Km(v),j=so(v,4),K=ao(v,4);return[I,jm(v),S,j,...hl(K,T)]})(r);return((v,I,T,S,j,K,B,V,G,H)=>{S=Oi(S,G,V,1);const X=v(T).R(S);return gs(sr(S,X),H)+Xr(ri(X),B)+((re,he)=>he!==1?"["+(he===2?"!":"")+re+"]":"")(T,K)+vs(I,j)})(e,n.calendar,n.timeZone,n.epochNanoseconds,i,s,l,h,d,g)}function dc(e,n){const[r,i,s,l]=(v=>(v=_n(v),[Xs(v),...cs(v)]))(n);return h=e.calendar,d=r,g=l,gs(gl(e,s,i),g)+vs(h,d);var h,d,g}function pc(e,n){return r=e.calendar,i=e,s=us(n),oi(i)+vs(r,s);var r,i,s}function mc(e,n){return _l(e.calendar,kl,e,us(n))}function yc(e,n){return _l(e.calendar,bd,e,us(n))}function gc(e,n){const[r,i,s]=fl(n);return l=s,Ol(ys(e,i,r)[0],l);var l}function Ta(e,n){const[r,i,s]=fl(n,3);return i>1&&Nt(e={...e,...md(e,i,r)}),((l,h)=>{const{sign:d}=l,g=d===-1?Ue(l):l,{hours:v,minutes:I}=g,[T,S]=ts(De(g,3),yn,Xn);Pl(T);const j=bs(S,h),K=h>=0||!d||j;return(d<0?"-":"")+"P"+vc({Y:Pt(g.years),M:Pt(g.months),W:Pt(g.weeks),D:Pt(g.days)})+(v||I||T||K?"T"+vc({H:Pt(v),M:Pt(I),S:Pt(T,K)+j}):"")})(e,s)}function _l(e,n,r,i){const s=i>1||i===0&&e!==fe;return i===1?e===fe?n(r):oi(r):s?oi(r)+El(e,i===2):n(r)}function vc(e){const n=[];for(const r in e){const i=e[r];i&&n.push(i,r)}return n.join("")}function gs(e,n){return oi(e)+"T"+Ol(e,n)}function oi(e){return kl(e)+"-"+on(e.isoDay)}function kl(e){const{isoYear:n}=e;return(n<0||n>9999?xl(n)+Xo(6,Math.abs(n)):Xo(4,n))+"-"+on(e.isoMonth)}function bd(e){return on(e.isoMonth)+"-"+on(e.isoDay)}function Ol(e,n){const r=[on(e.isoHour),on(e.isoMinute)];return n!==-1&&r.push(on(e.isoSecond)+((i,s,l,h)=>bs(i*jn+s*oo+l,h))(e.isoMillisecond,e.isoMicrosecond,e.isoNanosecond,n)),r.join(":")}function Xr(e,n=0){if(n===1)return"";const[r,i]=Tn(Math.abs(e),ji),[s,l]=Tn(i,Ni),[h,d]=Tn(l,yn);return xl(e)+on(r)+":"+on(s)+(h||d?":"+on(h)+bs(d):"")}function vs(e,n){return n!==1&&(n>1||n===0&&e!==fe)?El(e,n===2):""}function El(e,n){return"["+(n?"!":"")+"u-ca="+e+"]"}function bs(e,n){let r=Xo(9,e);return r=n===void 0?r.replace(Bm,""):r.slice(0,n),r?"."+r:""}function xl(e){return e<0?"-":"+"}function Pt(e,n){return e||n?e.toLocaleString("fullwide",{useGrouping:0}):""}function wd(e,n){const{epochNanoseconds:r}=e,i=(n.R?n:n(e.timeZone)).R(r),s=sr(r,i);return{calendar:e.calendar,...s,offsetNanoseconds:i}}function lr(e,n,r,i=0,s=0,l,h){if(r!==void 0&&i===1&&(i===1||h))return os(n,r);const d=e.I(n);if(r!==void 0&&i!==3){const g=((v,I,T,S)=>{const j=Me(I);S&&(T=ri(T));for(const K of v){let B=vn(gn(K,j));if(S&&(B=ri(B)),B===T)return K}})(d,n,r,l);if(g!==void 0)return g;if(i===0)throw new RangeError(em)}return h?Me(n):eo(e,n,s,d)}function eo(e,n,r=0,i=e.I(n)){if(i.length===1)return i[0];if(r===1)throw new RangeError(nm);if(i.length)return i[r===3?1:0];const s=Me(n),l=((d,g)=>{const v=d.R(Ct(g,-ge));return(I=>{if(I>ge)throw new RangeError(Xp);return I})(d.R(Ct(g,ge))-v)})(e,s),h=l*(r===2?-1:1);return(i=e.I(sr(s,h)))[r===2?0:i.length-1]}function tt(e,n){const r=e.I(n);if(r.length)return r[0];const i=Ct(Me(n),-ge);return e.O(i,1)}function bc(e,n,r){return Sn(wn(tr(n.epochNanoseconds,(i=>{if(Tl(i))throw new RangeError(om);return De(i,5)})(e?Ue(r):r))))}function wc(e,n,r,i,s,l=Object.create(null)){const h=n(i.timeZone),d=e(i.calendar);return{...i,...ws(h,d,i,r?Ue(s):s,l)}}function _c(e,n,r,i,s=Object.create(null)){const{calendar:l}=r;return un(_s(e(l),r,n?Ue(i):i,s),l)}function kc(e,n,r,i,s){const{calendar:l}=r;return Nn(Ei(e(l),r,n?Ue(i):i,s),l)}function Oc(e,n,r,i,s){const l=r.calendar,h=e(l);let d=rn(Zr(h,r));n&&(i=Es(i)),i.sign<0&&(d=h.P(d,{...Se,months:1}),d=St(d,-1));const g=h.P(d,i,s);return Yr(Zr(h,g),l)}function Ec(e,n,r){return kn(Rl(n,e?Ue(r):r)[0])}function ws(e,n,r,i,s){const l=De(i,5);let h=r.epochNanoseconds;if(Tl(i)){const d=nn(r,e);h=tr(eo(e,{...Ei(n,d,{...i,...Vs},s),...an(cn,d)}),l)}else h=tr(h,l),de(s);return{epochNanoseconds:wn(h)}}function _s(e,n,r,i){const[s,l]=Rl(n,r);return ze({...Ei(e,n,{...r,...Vs,days:r.days+l},i),...s})}function Ei(e,n,r,i){if(r.years||r.months||r.weeks)return e.P(n,r,i);de(i);const s=r.days+De(r,5)[0];return s?rn(St(n,s)):n}function Zr(e,n,r=1){return St(n,r-e.day(n))}function Rl(e,n){const[r,i]=De(n,5),[s,l]=pi(et(e)+i);return[s,r+l]}function St(e,n){return n?{...e,...mi(qe(e)+n*Ve)}:e}function xi(e,n,r){const i=e(r.calendar);return rr(r)?[r,i,n(r.timeZone)]:[{...r,...He},i]}function ks(e){return e?ml:Me}function Ri(e){return e?le(ws,e):_s}function Os(e){return e?le(Zd,e):$d}function rr(e){return e&&e.epochNanoseconds}function $r(e,n){return e<=6-(rr(n)?1:0)}function xc(e,n,r,i,s,l,h){const d=e(_n(h).relativeTo),g=Math.max(It(s),It(l));if($r(g,d))return Pe(Nt(((B,V,G,H)=>{const X=tr(De(B),De(V),H?-1:1);if(!Number.isFinite(X[0]))throw new RangeError(lt);return{...Se,...fr(X,G)}})(s,l,g,i)));if(!d)throw new RangeError(Si);i&&(l=Ue(l));const[v,I,T]=xi(n,r,d),S=Ri(T),j=Os(T),K=S(I,v,s);return Pe(j(I,v,S(I,K,l),g))}function _d(e,n,r,i,s){const l=It(i),[h,d,g,v,I]=((ue,ae,ve)=>{ue=bi(ue,si);let be=If(ue);const ln=ve(ue[Tf]);let tn=ls(ue);const pt=so(ue,7);let xe=ao(ue);if(be===void 0&&xe===void 0)throw new RangeError(im);if(xe==null&&(xe=0),be==null&&(be=Math.max(xe,ae)),pl(be,xe),tn=fs(tn,xe,1),tn>1&&xe>5&&be!==xe)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");return[be,xe,tn,pt,ln]})(s,l,e),T=Math.max(l,h);if(!I&&T<=6)return Pe(Nt(((ue,ae,ve,be,ln)=>{const tn=ki(De(ue),ve,be,ln);return{...Se,...fr(tn,ae)}})(i,h,d,g,v)));if(!rr(I)&&!i.sign)return i;if(!I)throw new RangeError(Si);const[S,j,K]=xi(n,r,I),B=ks(K),V=Ri(K),G=Os(K),H=V(j,S,i);rr(I)||(ze(S),ze(H));let X=G(j,S,H,h);const re=i.sign,he=it(X);if(re&&he&&re!==he)throw new RangeError(pr);return X=_i(X,B(H),h,d,g,v,j,S,B,V),Pe(X)}function kd(e){return e.sign===-1?Es(e):e}function Es(e){return Pe(Ue(e))}function Ue(e){const n={};for(const r of me)n[r]=-1*e[r]||0;return n}function Od(e){return!e.sign}function it(e,n=me){let r=0;for(const i of n){const s=Math.sign(e[i]);if(s){if(r&&r!==s)throw new RangeError(rm);r=s}}return r}function Nt(e){for(const n of ym)Mn(n,e[n],-Kc,Kc,1);return Pl(vn(De(e),yn)),e}function Pl(e){if(!Number.isSafeInteger(e))throw new RangeError(tm)}function De(e,n=6){return Gc(e,n,me)}function fr(e,n=6){const[r,i]=e,s=di(i,n,me);if(s[me[n]]+=r*(ge/bn[n]),!Number.isFinite(s[me[n]]))throw new RangeError(lt);return s}function Pi(e,n=5){return di(e,n,me)}function Tl(e){return!!it(e,xf)}function It(e){let n=9;for(;n>0&&!e[me[n]];n--);return n}function Ed(e,n){return[e,n]}function Rc(e){const n=Math.floor(e/Ho)*Ho;return[n,n+Ho]}function xd(e){const n=at(e=Vo(e));if(!n)throw new RangeError(We(e));let r;if(n.j)r=0;else{if(!n.offset)throw new RangeError(We(e));r=jt(n.offset)}return n.timeZone&&Cs(n.timeZone,1),Sn(os(yi(n),r))}function Rd(e){const n=at(je(e));if(!n)throw new RangeError(We(e));if(n.timeZone)return Cl(n,n.offset?jt(n.offset):void 0);if(n.j)throw new RangeError(We(e));return Ml(n)}function Pd(e,n){const r=at(je(e));if(!r||!r.timeZone)throw new RangeError(We(e));const{offset:i}=r,s=i?jt(i):void 0,[,l,h]=gi(n);return Cl(r,s,l,h)}function jt(e){const n=Cs(e);if(n===void 0)throw new RangeError(We(e));return n}function Td(e){const n=at(je(e));if(!n||n.j)throw new RangeError(We(e));return un(Il(n))}function xs(e,n,r){let i=at(je(e));if(!i||i.j)throw new RangeError(We(e));return n?i.calendar===fe&&(i=i.isoYear===-271821&&i.isoMonth===4?{...i,isoDay:20,...He}:{...i,isoDay:1,...He}):r&&i.calendar===fe&&(i={...i,isoYear:In}),Nn(i.C?Il(i):Ml(i))}function Cd(e,n){const r=Ps(je(n));if(r)return Rs(r),Yr(rs(Dt(r)));const i=xs(n,1);return Yr(Zr(e(i.calendar),i))}function Rs(e){if(e.calendar!==fe)throw new RangeError(Cn(e.calendar))}function Id(e,n){const r=Ts(je(n));if(r)return Rs(r),ti(Dt(r));const i=xs(n,0,1),{calendar:s}=i,l=e(s),[h,d,g]=l.v(i),[v,I]=l.q(h,d),[T,S]=l.G(v,I,g);return ti(rn(l.V(T,S,g)),s)}function Md(e){let n,r=(i=>{const s=Vm.exec(i);return s?(Ti(s[10]),Nl(s)):void 0})(je(e));if(!r){if(r=at(e),!r)throw new RangeError(We(e));if(!r.C)throw new RangeError(We(e));if(r.j)throw new RangeError(Cn("Z"));Rs(r)}if((n=Ps(e))&&cc(n))throw new RangeError(We(e));if((n=Ts(e))&&cc(n))throw new RangeError(We(e));return kn(ur(r,1))}function Dd(e){const n=(r=>{const i=Gm.exec(r);return i?(s=>{function l(I,T,S){let j=0,K=0;if(S&&([j,g]=Tn(g,bn[S])),I!==void 0){if(d)throw new RangeError(Cn(I));K=(B=>{const V=parseInt(B);if(!Number.isFinite(V))throw new RangeError(Cn(B));return V})(I),h=1,T&&(g=Is(T)*(bn[S]/yn),d=1)}return j+K}let h=0,d=0,g=0,v={...ir(me,[l(s[2]),l(s[3]),l(s[4]),l(s[5]),l(s[6],s[7],5),l(s[8],s[9],4),l(s[10],s[11],3)]),...di(g,2,me)};if(!h)throw new RangeError(uf(me));return Ms(s[1])<0&&(v=Ue(v)),v})(i):void 0})(je(e));if(!n)throw new RangeError(We(e));return Pe(Nt(n))}function Sd(e){const n=at(e)||Ps(e)||Ts(e);return n?n.calendar:e}function Nd(e){const n=at(e);return n&&(n.timeZone||n.j&&At||n.offset)||e}function Cl(e,n,r=0,i=0){const s=Ds(e.timeZone),l=ie(s);let h;return yi(e),h=e.C?lr(l,e,n,r,i,!l.$,e.j):tt(l,e),sn(h,s,Di(e.calendar))}function Il(e){return Dl(ze(yi(e)))}function Ml(e){return Dl(rn(Dt(e)))}function Dl(e){return{...e,calendar:Di(e.calendar)}}function at(e){const n=Wm.exec(e);return n?(r=>{const i=r[10],s=(i||"").toUpperCase()==="Z";return{isoYear:Sl(r),isoMonth:parseInt(r[4]),isoDay:parseInt(r[5]),...Nl(r.slice(5)),...Ti(r[16]),C:!!r[6],j:s,offset:s?void 0:i}})(n):void 0}function Ps(e){const n=Zm.exec(e);return n?(r=>({isoYear:Sl(r),isoMonth:parseInt(r[4]),isoDay:1,...Ti(r[5])}))(n):void 0}function Ts(e){const n=$m.exec(e);return n?(r=>({isoYear:In,isoMonth:parseInt(r[1]),isoDay:parseInt(r[2]),...Ti(r[3])}))(n):void 0}function Cs(e,n){const r=zm.exec(e);return r?((i,s)=>{const l=i[4]||i[5];if(s&&l)throw new RangeError(Cn(l));return(h=>{if(Math.abs(h)>=ge)throw new RangeError(Qp);return h})((Xt(i[2])*ji+Xt(i[3])*Ni+Xt(i[4])*yn+Is(i[5]||""))*Ms(i[1]))})(r,n):void 0}function Sl(e){const n=Ms(e[1]),r=parseInt(e[2]||e[3]);if(n<0&&!r)throw new RangeError(Cn(-0));return n*r}function Nl(e){const n=Xt(e[3]);return{...pi(Is(e[4]||""))[0],isoHour:Xt(e[1]),isoMinute:Xt(e[2]),isoSecond:n===60?59:n}}function Ti(e){let n,r;const i=[];if(e.replace(Hm,(s,l,h)=>{const d=!!l,[g,v]=h.split("=").reverse();if(v){if(v==="u-ca")i.push(g),n||(n=d);else if(d||/[A-Z]/.test(v))throw new RangeError(Cn(s))}else{if(r)throw new RangeError(Cn(s));r=g}return""}),i.length>1&&n)throw new RangeError(Cn(e));return{timeZone:r,calendar:i[0]||fe}}function Is(e){return parseInt(e.padEnd(9,"0"))}function hr(e){return new RegExp(`^${e}$`,"i")}function Ms(e){return e&&e!=="+"?-1:1}function Xt(e){return e===void 0?0:parseInt(e)}function jd(e){return Ds(je(e))}function Ds(e){const n=Ss(e);return typeof n=="number"?Xr(n):n?(r=>{if(Xm.test(r))throw new RangeError(df(r));if(Qm.test(r))throw new RangeError(Jp);return r.toLowerCase().split("/").map((i,s)=>(i.length<=3||/\d/.test(i))&&!/etc|yap/.test(i)?i.toUpperCase():i.replace(/baja|dumont|[a-z]+/g,(l,h)=>l.length<=2&&!s||l==="in"||l==="chat"?l.toUpperCase():l.length>2||!h?ac(l).replace(/island|noronha|murdo|rivadavia|urville/,ac):l)).join("/")})(e):At}function Pc(e){const n=Ss(e);return typeof n=="number"?n:n?n.resolvedOptions().timeZone:At}function Ss(e){const n=Cs(e=e.toUpperCase(),1);return n!==void 0?n:e!==At?Jm(e):void 0}function jl(e,n){return Xe(e.epochNanoseconds,n.epochNanoseconds)}function Kl(e,n){return Xe(e.epochNanoseconds,n.epochNanoseconds)}function Kd(e,n,r,i,s,l){const h=e(_n(l).relativeTo),d=Math.max(It(i),It(s));if(zc(me,i,s))return 0;if($r(d,h))return Xe(De(i),De(s));if(!h)throw new RangeError(Si);const[g,v,I]=xi(n,r,h),T=ks(I),S=Ri(I);return Xe(T(S(v,g,i)),T(S(v,g,s)))}function Al(e,n){return dr(e,n)||Ns(e,n)}function dr(e,n){return Gn(qe(e),qe(n))}function Ns(e,n){return Gn(et(e),et(n))}function Ad(e,n){return!jl(e,n)}function Fd(e,n){return!Kl(e,n)&&!!Fl(e.timeZone,n.timeZone)&&e.calendar===n.calendar}function qd(e,n){return!Al(e,n)&&e.calendar===n.calendar}function Bd(e,n){return!dr(e,n)&&e.calendar===n.calendar}function Ud(e,n){return!dr(e,n)&&e.calendar===n.calendar}function Ld(e,n){return!dr(e,n)&&e.calendar===n.calendar}function Yd(e,n){return!Ns(e,n)}function Fl(e,n){if(e===n)return 1;try{return Pc(e)===Pc(n)}catch{}}function Tc(e,n,r,i){const s=cr(e,i,3,5),l=Ci(n.epochNanoseconds,r.epochNanoseconds,...s);return Pe(e?Ue(l):l)}function Cc(e,n,r,i,s,l){const h=Mi(i.calendar,s.calendar),[d,g,v,I]=cr(r,l,5),T=i.epochNanoseconds,S=s.epochNanoseconds,j=Xe(S,T);let K;if(j)if(d<6)K=Ci(T,S,d,g,v,I);else{const B=n(((G,H)=>{if(!Fl(G,H))throw new RangeError(pf);return G})(i.timeZone,s.timeZone)),V=e(h);K=Bl(V,B,i,s,j,d,l),K=_i(K,S,d,g,v,I,V,i,ml,le(ws,B))}else K=Se;return Pe(r?Ue(K):K)}function Ic(e,n,r,i,s){const l=Mi(r.calendar,i.calendar),[h,d,g,v]=cr(n,s,6),I=Me(r),T=Me(i),S=Xe(T,I);let j;if(S)if(h<=6)j=Ci(I,T,h,d,g,v);else{const K=e(l);j=Ul(K,r,i,S,h,s),j=_i(j,T,h,d,g,v,K,r,Me,_s)}else j=Se;return Pe(n?Ue(j):j)}function Mc(e,n,r,i,s){const l=Mi(r.calendar,i.calendar);return ql(n,()=>e(l),r,i,...cr(n,s,6,9,6))}function Dc(e,n,r,i,s){const l=Mi(r.calendar,i.calendar),h=cr(n,s,9,9,8),d=e(l),g=Zr(d,r),v=Zr(d,i);return g.isoYear===v.isoYear&&g.isoMonth===v.isoMonth&&g.isoDay===v.isoDay?Pe(Se):ql(n,()=>d,rn(g),rn(v),...h,8)}function ql(e,n,r,i,s,l,h,d,g=6){const v=Me(r),I=Me(i);if(v===void 0||I===void 0)throw new RangeError(lt);let T;if(Xe(I,v))if(s===6)T=Ci(v,I,s,l,h,d);else{const S=n();T=S.N(r,i,s),l===g&&h===1||(T=_i(T,I,s,l,h,d,S,r,Me,Ei))}else T=Se;return Pe(e?Ue(T):T)}function Sc(e,n,r,i){const[s,l,h,d]=cr(e,i,5,5),g=nt(js(n,r),Qr(l,h),d),v={...Se,...Pi(g,s)};return Pe(e?Ue(v):v)}function Zd(e,n,r,i,s,l){const h=Xe(i.epochNanoseconds,r.epochNanoseconds);return h?s<6?Ll(r.epochNanoseconds,i.epochNanoseconds,s):Bl(n,e,r,i,h,s,l):Se}function $d(e,n,r,i,s){const l=Me(n),h=Me(r),d=Xe(h,l);return d?i<=6?Ll(l,h,i):Ul(e,n,r,d,i,s):Se}function Bl(e,n,r,i,s,l,h){const[d,g,v]=((S,j,K,B)=>{function V(){return ae={...St(X,he++*-B),...H},ve=eo(S,ae),Xe(re,ve)===-B}const G=nn(j,S),H=an(cn,G),X=nn(K,S),re=K.epochNanoseconds;let he=0;const ue=js(G,X);let ae,ve;if(Math.sign(ue)===-B&&he++,V()&&(B===-1||V()))throw new RangeError(pr);const be=vn(gn(ve,re));return[G,ae,be]})(n,r,i,s);var I,T;return{...l===6?(I=d,T=g,{...Se,days:Yl(I,T)}):e.N(d,g,l,h),...Pi(v)}}function Ul(e,n,r,i,s,l){const[h,d,g]=((v,I,T)=>{let S=I,j=js(v,I);return Math.sign(j)===-T&&(S=St(I,-T),j+=ge*T),[v,S,j]})(n,r,i);return{...e.N(h,d,s,l),...Pi(g)}}function Ci(e,n,r,i,s,l){return{...Se,...fr(ki(gn(e,n),i,s,l),r)}}function Ll(e,n,r){return{...Se,...fr(gn(e,n),r)}}function Yl(e,n){return Ii(qe(e),qe(n))}function Ii(e,n){return Math.trunc((n-e)/Ve)}function js(e,n){return et(n)-et(e)}function Mi(e,n){if(e!==n)throw new RangeError(hf);return e}function Zl(e){return this.m(e)[0]}function $l(e){return this.m(e)[1]}function Ks(e){const[n]=this.v(e);return Ii(this.p(n),qe(e))+1}function As(e){const n=ey.exec(e);if(!n)throw new RangeError(Hp(e));return[parseInt(n[1]),!!n[2]]}function no(e,n){return"M"+on(e)+(n?"L":"")}function ii(e,n,r){return e+(n||r&&e>=r?1:0)}function Fs(e,n){return e-(n&&e>=n?1:0)}function Wl(e,n){return(n+e)*(Math.sign(n)||1)||0}function Ka(e){return Of[zl(e)]}function Vl(e){return hm[zl(e)]}function zl(e){return Mt(e.id||fe)}function Wd(e){function n(s){return((l,h)=>({...Hl(l,h),o:l.month,day:parseInt(l.day)}))(is(r,s),i)}const r=uu(e),i=Mt(e);return{id:e,h:Vd(n),l:zd(n)}}function Vd(e){return Qe(n=>{const r=qe(n);return e(r)},WeakMap)}function zd(e){const n=e(0).year-km;return Qe(r=>{let i,s=ar(r-n),l=0;const h=[],d=[];do s+=400*Ve;while((i=e(s)).year<=r);do if(s+=(1-i.day)*Ve,i.year===r&&(h.push(s),d.push(i.o)),s-=Ve,++l>100||s<-Qs)throw new RangeError(pr);while((i=e(s)).year>=r);return{i:h.reverse(),u:mf(d.reverse())}})}function Hl(e,n){let r,i,s=Gl(e);if(e.era){const l=Of[n],h=Ef[n]||{};l!==void 0&&(r=n==="islamic"?"ah":e.era.normalize("NFD").toLowerCase().replace(/[^a-z0-9]/g,""),r==="bc"||r==="b"?r="bce":r==="ad"||r==="a"?r="ce":r==="beforeroc"&&(r="broc"),r=h[r]||r,i=s,s=Wl(i,l[r]||0))}return{era:r,eraYear:i,year:s}}function Gl(e){return parseInt(e.relatedYear||e.year)}function ai(e){const{year:n,o:r,day:i}=this.h(e),{u:s}=this.l(n);return[n,s[r]+1,i]}function Wr(e,n=1,r=1){return this.l(e).i[n-1]+(r-1)*Ve}function Jl(e,n){const r=zo.call(this,e);return[Fs(n,r),r===n]}function zo(e){const n=jc(this,e),r=jc(this,e-1),i=n.length;if(i>r.length){const s=Vl(this);if(s<0)return-s;for(let l=0;l<i;l++)if(n[l]!==r[l])return l+1}}function Zo(e){return Ii(Wr.call(this,e),Wr.call(this,e+1))}function Nc(e,n){const{i:r}=this.l(e);let i=n+1,s=r;return i>r.length&&(i=1,s=this.l(e+1).i),Ii(r[n-1],s[i-1])}function $o(e){return this.l(e).i.length}function Ql(e){const n=this.h(e);return[n.era,n.eraYear]}function jc(e,n){return Object.keys(e.l(n).u)}function to(e){return Di(je(e))}function Di(e){if((e=e.toLowerCase())!==fe&&e!==mr){const n=uu(e).resolvedOptions().calendar;if(Mt(e)!==Mt(n))throw new RangeError(ff(e));return n}return e}function Mt(e){return e==="islamicc"&&(e="islamic"),e.split("-")[0]}function Xl(e,n){return r=>r===fe?e:r===mr||r===rt?Object.assign(Object.create(e),{id:r}):Object.assign(Object.create(n),ny(r))}function Hd(e,n,r,i){const s=st(r,i,An,[],bf);if(s.timeZone!==void 0){const l=r.F(s),h=ro(s),d=e(s.timeZone);return{epochNanoseconds:lr(n(d),{...l,...h},s.offset!==void 0?jt(s.offset):void 0),timeZone:d}}return{...r.F(s),...He}}function Gd(e,n,r,i,s,l){const h=st(r,s,An,gf,bf),d=e(h.timeZone),[g,v,I]=gi(l),T=r.F(h,wi(g)),S=ro(h,g);return sn(lr(n(d),{...T,...S},h.offset!==void 0?jt(h.offset):void 0,v,I),d,i)}function Jd(e,n,r){const i=st(e,n,An,[],Kn),s=de(r);return un(ze({...e.F(i,wi(s)),...ro(i,s)}))}function Qd(e,n,r,i=[]){const s=st(e,n,An,i);return e.F(s,r)}function Xd(e,n,r,i){const s=st(e,n,$s,i);return e.K(s,r)}function ep(e,n,r,i){const s=st(e,r,An,io);return n&&s.month!==void 0&&s.monthCode===void 0&&s.year===void 0&&(s.year=In),e._(s,i)}function np(e,n){return kn(ro(en(e,Ba,[],1),de(n)))}function tp(e){const n=en(e,Ws);return Pe(Nt({...Se,...n}))}function st(e,n,r,i=[],s=[]){return en(n,[...e.fields(r),...s].sort(),i)}function en(e,n,r,i=!r){const s={};let l,h=0;for(const d of n){if(d===l)throw new RangeError(Up(d));if(d==="constructor"||d==="__proto__")throw new RangeError(Bp(d));let g=e[d];if(g!==void 0)h=1,Ac[d]&&(g=Ac[d](g,d)),s[d]=g;else if(r){if(r.includes(d))throw new TypeError(Bs(d));s[d]=kf[d]}l=d}if(i&&!h)throw new TypeError(uf(n));return s}function ro(e,n){return ur(cu({...kf,...e}),n)}function rp(e,n,r,i,s){const{calendar:l,timeZone:h}=r,d=e(l),g=n(h),v=[...d.fields(An),...vf].sort(),I=(G=>{const H=nn(G,ie),X=Xr(H.offsetNanoseconds),re=Fi(G.calendar),[he,ue,ae]=re.v(H),[ve,be]=re.q(he,ue),ln=no(ve,be);return{...cy(H),year:he,monthCode:ln,day:ae,offset:X}})(r),T=en(i,v),S=d.k(I,T),j={...I,...T},[K,B,V]=gi(s,2);return sn(lr(g,{...d.F(S,wi(K)),...ur(cu(j),K)},jt(j.offset),B,V),h,l)}function op(e,n,r,i){const s=e(n.calendar),l=[...s.fields(An),...Kn].sort(),h={...nf(d=n),hour:d.isoHour,minute:d.isoMinute,second:d.isoSecond,millisecond:d.isoMillisecond,microsecond:d.isoMicrosecond,nanosecond:d.isoNanosecond};var d;const g=en(r,l),v=de(i),I=s.k(h,g),T={...h,...g};return un(ze({...s.F(I,wi(v)),...ur(cu(T),v)}))}function ip(e,n,r,i){const s=e(n.calendar),l=s.fields(An).sort(),h=nf(n),d=en(r,l),g=s.k(h,d);return s.F(g,i)}function ap(e,n,r,i){const s=e(n.calendar),l=s.fields($s).sort(),h=(v=>{const I=Fi(v.calendar),[T,S]=I.v(v),[j,K]=I.q(T,S);return{year:T,monthCode:no(j,K)}})(n),d=en(r,l),g=s.k(h,d);return s.K(g,i)}function sp(e,n,r,i){const s=e(n.calendar),l=s.fields(An).sort(),h=(v=>{const I=Fi(v.calendar),[T,S,j]=I.v(v),[K,B]=I.q(T,S);return{monthCode:no(K,B),day:j}})(n),d=en(r,l),g=s.k(h,d);return s._(g,i)}function up(e,n,r){return kn(((i,s,l)=>ro({...an(Ba,i),...en(s,Ba)},de(l)))(e,n,r))}function cp(e,n){return Pe((r=e,i=n,Nt({...r,...en(i,Ws)})));var r,i}function ef(e,n,r,i,s){n=an(r=e.fields(r),n),i=en(i,s=e.fields(s),[]);let l=e.k(n,i);return l=en(l,[...r,...s].sort(),[]),e.F(l)}function Ca(e,n){const r=Ka(e),i=Ef[e.id||""]||{};let{era:s,eraYear:l,year:h}=n;if(s!==void 0||l!==void 0){if(s===void 0||l===void 0)throw new TypeError($p);if(!r)throw new RangeError(Zp);const d=r[i[s]||s];if(d===void 0)throw new RangeError(Vp(s));const g=Wl(l,d);if(h!==void 0&&h!==g)throw new RangeError(Wp);h=g}else if(h===void 0)throw new TypeError(zp(r));return h}function Wo(e,n,r,i){let{month:s,monthCode:l}=n;if(l!==void 0){const h=((d,g,v,I)=>{const T=d.L(v),[S,j]=As(g);let K=ii(S,j,T);if(j){const B=Vl(d);if(B===void 0)throw new RangeError(jr);if(B>0){if(K>B)throw new RangeError(jr);if(T===void 0){if(I===1)throw new RangeError(jr);K--}}else{if(K!==-B)throw new RangeError(jr);if(T===void 0&&I===1)throw new RangeError(jr)}}return K})(e,l,r,i);if(s!==void 0&&s!==h)throw new RangeError(Gp);s=h,i=1}else if(s===void 0)throw new TypeError(lf);return Mn("month",s,1,e.B(r),i)}function Ia(e,n,r,i,s){return $e(n,"day",1,e.U(i,r),s)}function Ma(e,n,r,i){let s=0;const l=[];for(const h of r)n[h]!==void 0?s=1:l.push(h);if(Object.assign(e,n),s)for(const h of i||l)delete e[h]}function nf(e){const n=Fi(e.calendar),[r,i,s]=n.v(e),[l,h]=n.q(r,i);return{year:r,monthCode:no(l,h),day:s}}function lp(e){return Sn(wn(ns(Qa(e))))}function fp(e,n,r,i,s=fe){return sn(wn(ns(Qa(r))),n(i),e(s))}function hp(e,n,r,i,s=0,l=0,h=0,d=0,g=0,v=0,I=fe){return un(ze(yi(Dn(Fe,ir(Ki,[n,r,i,s,l,h,d,g,v])))),e(I))}function dp(e,n,r,i,s=fe){return Nn(rn(Dt(Dn(Fe,{isoYear:n,isoMonth:r,isoDay:i}))),e(s))}function pp(e,n,r,i=fe,s=1){const l=Fe(n),h=Fe(r),d=e(i);return Yr(rs(Dt({isoYear:l,isoMonth:h,isoDay:Fe(s)})),d)}function mp(e,n,r,i=fe,s=In){const l=Fe(n),h=Fe(r),d=e(i);return ti(rn(Dt({isoYear:Fe(s),isoMonth:l,isoDay:h})),d)}function yp(e=0,n=0,r=0,i=0,s=0,l=0){return kn(ur(Dn(Fe,ir(cn,[e,n,r,i,s,l])),1))}function gp(e=0,n=0,r=0,i=0,s=0,l=0,h=0,d=0,g=0,v=0){return Pe(Nt(Dn(Xa,ir(me,[e,n,r,i,s,l,h,d,g,v]))))}function vp(e,n,r=fe){return sn(e.epochNanoseconds,n,r)}function bp(e){return Sn(e.epochNanoseconds)}function tf(e,n){return un(nn(n,e))}function rf(e,n){return Nn(nn(n,e))}function of(e,n){return kn(nn(n,e))}function wp(e,n,r,i){const s=((l,h,d,g)=>{const v=(I=>Df(_n(I)))(g);return eo(l(h),d,v)})(e,r,n,i);return sn(wn(s),r,n.calendar)}function _p(e,n,r,i,s){const l=e(s.timeZone),h=s.plainTime,d=h!==void 0?n(h):void 0,g=r(l);let v;return v=d?eo(g,{...i,...d}):tt(g,{...i,...He}),sn(v,l,i.calendar)}function kp(e,n=He){return un(ze({...e,...n}))}function Op(e,n,r){return((i,s)=>{const l=st(i,s,wf);return i.K(l,void 0)})(e(n.calendar),r)}function Ep(e,n,r){return((i,s)=>{const l=st(i,s,_f);return i._(l)})(e(n.calendar),r)}function xp(e,n,r,i){return((s,l,h)=>ef(s,l,wf,Jr(h),io))(e(n.calendar),r,i)}function Rp(e,n,r,i){return((s,l,h)=>ef(s,l,_f,Jr(h),Ls))(e(n.calendar),r,i)}function Pp(e){return Sn(wn(ei(Xa(e),jn)))}function Tp(e){return Sn(wn(ns(Qa(e))))}function Kt(e,n,r){const i=new Set(r);return(s,l)=>{const h=r&&ic(s,r);if(!ic(s=((d,g)=>{const v={};for(const I in g)d.has(I)||(v[I]=g[I]);return v})(i,s),e)){if(l&&h)throw new TypeError("Invalid formatting options");s={...n,...s}}return r&&(s.timeZone=At,["full","long"].includes(s.J)&&(s.J="medium")),s}}function ut(e,n=af,r=0){const[i,,,s]=e;return(l,h=Ty,...d)=>{const g=n(s&&s(...d),l,h,i,r),v=g.resolvedOptions();return[g,...Cp(e,v,d)]}}function af(e,n,r,i,s){if(r=i(r,s),e){if(r.timeZone!==void 0)throw new TypeError(um);r.timeZone=e}return new Jn(n,r)}function Cp(e,n,r){const[,i,s]=e;return r.map(l=>(l.calendar&&((h,d,g)=>{if((g||h!==fe)&&h!==d)throw new RangeError(hf)})(l.calendar,n.calendar,s),i(l,n)))}function Ip(e,n,r){const i=n.timeZone,s=e(i),l={...nn(n,s),...r||He};let h;return h=r?lr(s,l,l.offsetNanoseconds,2):tt(s,l),sn(h,i,n.calendar)}function Mp(e,n=He){return un(ze({...e,...n}))}function qs(e,n){return{...e,calendar:n}}function Dp(e,n){return{...e,timeZone:n}}function Da(e){const n=Aa();return sr(n,e.R(n))}function Aa(){return ei(Date.now(),jn)}function Nr(){return Fc||(Fc=new Jn().resolvedOptions().timeZone)}const Sp=(e,n)=>`Non-integer ${e}: ${n}`,Np=(e,n)=>`Non-positive ${e}: ${n}`,jp=(e,n)=>`Non-finite ${e}: ${n}`,Kp=e=>`Cannot convert bigint to ${e}`,Ap=e=>`Invalid bigint: ${e}`,Fp="Cannot convert Symbol to string",qp="Invalid object",sf=(e,n,r,i,s)=>s?sf(e,s[n],s[r],s[i]):ct(e,n)+`; must be between ${r}-${i}`,ct=(e,n)=>`Invalid ${e}: ${n}`,Bs=e=>`Missing ${e}`,Bp=e=>`Invalid field ${e}`,Up=e=>`Duplicate field ${e}`,uf=e=>"No valid fields: "+e.join(),Lp="Invalid bag",cf=(e,n,r)=>ct(e,n)+"; must be "+Object.keys(r).join(),Yp="Cannot use valueOf",Fa="Invalid calling context",Zp="Forbidden era/eraYear",$p="Mismatching era/eraYear",Wp="Mismatching year/eraYear",Vp=e=>`Invalid era: ${e}`,zp=e=>"Missing year"+(e?"/era/eraYear":""),Hp=e=>`Invalid monthCode: ${e}`,Gp="Mismatching month/monthCode",lf="Missing month/monthCode",jr="Invalid leap month",pr="Invalid protocol results",ff=e=>ct("Calendar",e),hf="Mismatching Calendars",df=e=>ct("TimeZone",e),pf="Mismatching TimeZones",Jp="Forbidden ICU TimeZone",Qp="Out-of-bounds offset",Xp="Out-of-bounds TimeZone gap",em="Invalid TimeZone offset",nm="Ambiguous offset",lt="Out-of-bounds date",tm="Out-of-bounds duration",rm="Cannot mix duration signs",Si="Missing relativeTo",om="Cannot use large units",im="Required smallestUnit or largestUnit",am="smallestUnit > largestUnit",We=e=>`Cannot parse: ${e}`,Cn=e=>`Invalid substring: ${e}`,sm=e=>`Cannot format ${e}`,Sa="Mismatching types for formatting",um="Cannot specify TimeZone",mf=le(fi,(e,n)=>n),or=le(fi,(e,n,r)=>r),on=le(Xo,2),qa={nanosecond:0,microsecond:1,millisecond:2,second:3,minute:4,hour:5,day:6,week:7,month:8,year:9},Us=Object.keys(qa),Ve=864e5,yf=1e3,oo=1e3,jn=1e6,yn=1e9,Ni=6e10,ji=36e11,ge=864e11,bn=[1,oo,jn,yn,Ni,ji,ge],Kn=Us.slice(0,6),Ba=Gr(Kn),cm=["offset"],gf=["timeZone"],vf=Kn.concat(cm),bf=vf.concat(gf),Ua=["era","eraYear"],lm=Ua.concat(["year"]),Ls=["year"],Ys=["monthCode"],Zs=["month"].concat(Ys),io=["day"],$s=Zs.concat(Ls),wf=Ys.concat(Ls),An=io.concat($s),fm=io.concat(Zs),_f=io.concat(Ys),kf=or(Kn,0),fe="iso8601",mr="gregory",rt="japanese",Of={[mr]:{"gregory-inverse":-1,gregory:0},[rt]:{"japanese-inverse":-1,japanese:0,meiji:1867,taisho:1911,showa:1925,heisei:1988,reiwa:2018},ethiopic:{ethioaa:0,ethiopic:5500},coptic:{"coptic-inverse":-1,coptic:0},roc:{"roc-inverse":-1,roc:0},buddhist:{be:0},islamic:{ah:0},indian:{saka:0},persian:{ap:0}},Ef={[mr]:{bce:"gregory-inverse",ce:"gregory"},[rt]:{bce:"japanese-inverse",ce:"japanese"},ethiopic:{era0:"ethioaa",era1:"ethiopic"},coptic:{era0:"coptic-inverse",era1:"coptic"},roc:{broc:"roc-inverse",minguo:"roc"}},hm={chinese:13,dangi:13,hebrew:-6},je=le(Ga,"string"),dm=le(Ga,"boolean"),pm=le(Ga,"number"),me=Us.map(e=>e+"s"),Ws=Gr(me),mm=me.slice(0,6),xf=me.slice(6),ym=xf.slice(1),gm=mf(me),Se=or(me,0),Vs=or(mm,0),zs=le(Hc,me),cn=["isoNanosecond","isoMicrosecond","isoMillisecond","isoSecond","isoMinute","isoHour"],Hs=["isoDay","isoMonth","isoYear"],Ki=cn.concat(Hs),Gs=Gr(Hs),Rf=Gr(cn),vm=Gr(Ki),He=or(Rf,0),bm=le(Hc,Ki),Js=1e8,Qs=Js*Ve,wm=[Js,0],_m=[-Js,0],Vr=275760,zr=-271821,Jn=Intl.DateTimeFormat,Pf="en-GB",km=1970,In=1972,$n=12,Om=ar(1868,9,8),Em=Qe(id,WeakMap),si="smallestUnit",La="unit",Br="roundingIncrement",Na="fractionalSecondDigits",Tf="relativeTo",ja="direction",Cf={constrain:0,reject:1},xm=Object.keys(Cf),Rm={compatible:0,reject:1,earlier:2,later:3},Pm={reject:0,use:1,prefer:2,ignore:3},Tm={auto:0,never:1,critical:2,always:3},Cm={auto:0,never:1,critical:2},Im={auto:0,never:1},Mm={floor:0,halfFloor:1,ceil:2,halfCeil:3,trunc:4,halfTrunc:5,expand:6,halfExpand:7,halfEven:8},Dm={previous:-1,next:1},ao=le(hs,si),If=le(hs,"largestUnit"),Sm=le(hs,La),Mf=le(ot,"overflow",Cf),Df=le(ot,"disambiguation",Rm),Nm=le(ot,"offset",Pm),Xs=le(ot,"calendarName",Tm),jm=le(ot,"timeZoneName",Cm),Km=le(ot,"offset",Im),so=le(ot,"roundingMode",Mm),eu="PlainYearMonth",nu="PlainMonthDay",uo="PlainDate",yr="PlainDateTime",tu="PlainTime",ft="ZonedDateTime",ru="Instant",ou="Duration",Am=[Math.floor,e=>Yo(e)?Math.floor(e):Math.round(e),Math.ceil,e=>Yo(e)?Math.ceil(e):Math.round(e),Math.trunc,e=>Yo(e)?Math.trunc(e)||0:Math.round(e),e=>e<0?Math.floor(e):Math.ceil(e),e=>Math.sign(e)*Math.round(Math.abs(e))||0,e=>Yo(e)?(e=Math.trunc(e)||0)+e%2:Math.round(e)],At="UTC",Ho=5184e3,Fm=ni(1847),qm=ni(new Date().getUTCFullYear()+10),Bm=/0+$/,nn=Qe(wd,WeakMap),Kc=2**32-1,ie=Qe(e=>{const n=Ss(e);return typeof n=="object"?new Lm(n):new Um(n||0)});class Um{constructor(n){this.$=n}R(){return this.$}I(n){return(r=>{const i=Me({...r,...He});if(!i||Math.abs(i[0])>1e8)throw new RangeError(lt)})(n),[os(n,this.$)]}O(){}}class Lm{constructor(n){this.nn=(r=>{function i(v){const I=Lr(v,d,g),[T,S]=Rc(I),j=l(T),K=l(S);return j===K?j:s(h(T,S),j,K,v)}function s(v,I,T,S){let j,K;for(;(S===void 0||(j=S<v[0]?I:S>=v[1]?T:void 0)===void 0)&&(K=v[1]-v[0]);){const B=v[0]+Math.floor(K/2);r(B)===T?v[1]=B:v[0]=B+1}return j}const l=Qe(r),h=Qe(Ed);let d=Fm,g=qm;return{tn(v){const I=i(v-86400),T=i(v+86400),S=v-I,j=v-T;if(I===T)return[S];const K=i(S);return K===i(j)?[v-K]:I>T?[S,j]:[]},rn:i,O(v,I){const T=Lr(v,d,g);let[S,j]=Rc(T);const K=Ho*I,B=I<0?()=>j>d||(d=T,0):()=>S<g||(g=T,0);for(;B();){const V=l(S),G=l(j);if(V!==G){const H=h(S,j);s(H,V,G);const X=H[0];if((Gn(X,v)||1)===I)return X}S+=K,j+=K}}}})((r=>i=>{const s=is(r,i*yf);return ni(Gl(s),parseInt(s.month),parseInt(s.day),parseInt(s.hour),parseInt(s.minute),parseInt(s.second))-i})(n))}R(n){return this.nn.rn((r=>uc(r)[0])(n))*yn}I(n){const[r,i]=[ni((s=n).isoYear,s.isoMonth,s.isoDay,s.isoHour,s.isoMinute,s.isoSecond),s.isoMillisecond*jn+s.isoMicrosecond*oo+s.isoNanosecond];var s;return this.nn.tn(r).map(l=>wn(Ct(ei(l,yn),i)))}O(n,r){const[i,s]=uc(n),l=this.nn.O(i+(r>0||s?1:0),r);if(l!==void 0)return ei(l,yn)}}const iu="([+-])",Go="(?:[.,](\\d{1,9}))?",Sf=`(?:(?:${iu}(\\d{6}))|(\\d{4}))-?(\\d{2})`,au="(\\d{2})(?::?(\\d{2})(?::?(\\d{2})"+Go+")?)?",su=iu+au,Ym=Sf+"-?(\\d{2})(?:[T ]"+au+"(Z|"+su+")?)?",Nf="\\[(!?)([^\\]]*)\\]",Ai=`((?:${Nf}){0,9})`,Zm=hr(Sf+Ai),$m=hr("(?:--)?(\\d{2})-?(\\d{2})"+Ai),Wm=hr(Ym+Ai),Vm=hr("T?"+au+"(?:"+su+")?"+Ai),zm=hr(su),Hm=new RegExp(Nf,"g"),Gm=hr(`${iu}?P(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(?:T(?:(\\d+)${Go}H)?(?:(\\d+)${Go}M)?(?:(\\d+)${Go}S)?)?`),Jm=Qe(e=>new Jn(Pf,{timeZone:e,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),Qm=/^(AC|AE|AG|AR|AS|BE|BS|CA|CN|CS|CT|EA|EC|IE|IS|JS|MI|NE|NS|PL|PN|PR|PS|SS|VS)T$/,Xm=/[^\w\/:+-]+/,ey=/^M(\d{2})(L?)$/,ny=Qe(Wd),uu=Qe(e=>new Jn(Pf,{calendar:e,timeZone:At,era:"short",year:"numeric",month:"short",day:"numeric"})),jf={P(e,n,r){const i=de(r);let s,{years:l,months:h,weeks:d,days:g}=n;if(g+=De(n,5)[0],l||h)s=((v,I,T,S,j)=>{let[K,B,V]=v.v(I);if(T){const[G,H]=v.q(K,B);K+=T,B=ii(G,H,v.L(K)),B=Mn("month",B,1,v.B(K),j)}return S&&([K,B]=v.un(K,B,S)),V=Mn("day",V,1,v.U(K,B),j),v.p(K,B,V)})(this,e,l,h,i);else{if(!d&&!g)return e;s=qe(e)}if(s===void 0)throw new RangeError(lt);return s+=(7*d+g)*Ve,rn(mi(s))},N(e,n,r){if(r<=7){let g=0,v=Yl({...e,...He},{...n,...He});return r===7&&([g,v]=Xn(v,7)),{...Se,weeks:g,days:v}}const i=this.v(e),s=this.v(n);let[l,h,d]=((g,v,I,T,S,j,K)=>{let B=S-v,V=j-I,G=K-T;if(B||V){const H=Math.sign(B||V);let X=g.U(S,j),re=0;if(Math.sign(G)===-H){const he=X;[S,j]=g.un(S,j,-H),B=S-v,V=j-I,X=g.U(S,j),re=H<0?-he:X}if(G=K-Math.min(T,X)+re,B){const[he,ue]=g.q(v,I),[ae,ve]=g.q(S,j);if(V=ae-he||Number(ve)-Number(ue),Math.sign(V)===-H){const be=H<0&&-g.B(S);B=(S-=H)-v,V=j-ii(he,ue,g.L(S))+(be||g.B(S))}}}return[B,V,G]})(this,...i,...s);return r===8&&(h+=this.cn(l,i[0]),l=0),{...Se,years:l,months:h,days:d}},F(e,n){const r=de(n),i=Ca(this,e),s=Wo(this,e,i,r),l=Ia(this,e,s,i,r);return Nn(rn(this.V(i,s,l)),this.id||fe)},K(e,n){const r=de(n),i=Ca(this,e),s=Wo(this,e,i,r);return Yr(rs(this.V(i,s,1)),this.id||fe)},_(e,n){const r=de(n);let i,s,l,h=e.eraYear!==void 0||e.year!==void 0?Ca(this,e):void 0;const d=!this.id;if(h===void 0&&d&&(h=In),h!==void 0){const T=Wo(this,e,h,r);i=Ia(this,e,T,h,r);const S=this.L(h);s=Fs(T,S),l=T===S}else{if(e.monthCode===void 0)throw new TypeError(lf);if([s,l]=As(e.monthCode),this.id&&this.id!==mr&&this.id!==rt)if(this.id&&Mt(this.id)==="coptic"&&r===0){const T=l||s!==13?30:6;i=e.day,i=Lr(i,1,T)}else if(this.id&&Mt(this.id)==="chinese"&&r===0){const T=!l||s!==1&&s!==9&&s!==10&&s!==11&&s!==12?30:29;i=e.day,i=Lr(i,1,T)}else i=e.day;else i=Ia(this,e,Wo(this,e,In,r),In,r)}const g=this.G(s,l,i);if(!g)throw new RangeError("Cannot guess year");const[v,I]=g;return ti(rn(this.V(v,I,i)),this.id||fe)},fields(e){return Ka(this)&&e.includes("year")?[...e,...Ua]:e},k(e,n){const r=Object.assign(Object.create(null),e);return Ma(r,n,Zs),Ka(this)&&(Ma(r,n,lm),this.id===rt&&Ma(r,n,fm,Ua)),r},inLeapYear(e){const[n]=this.v(e);return this.sn(n)},monthsInYear(e){const[n]=this.v(e);return this.B(n)},daysInMonth(e){const[n,r]=this.v(e);return this.U(n,r)},daysInYear(e){const[n]=this.v(e);return this.fn(n)},dayOfYear:Ks,era(e){return this.hn(e)[0]},eraYear(e){return this.hn(e)[1]},monthCode(e){const[n,r]=this.v(e),[i,s]=this.q(n,r);return no(i,s)},dayOfWeek:ul,daysInWeek(){return 7}},ty={v:as,hn:cl,q:ol},ry={dayOfYear:Ks,v:as,p:ar},oy=Object.assign({},ry,{weekOfYear:Zl,yearOfWeek:$l,m(e){function n(j){return(7-j<i?7:0)-j}function r(j){const K=sl(S+j),B=j||1,V=n(qr(g+K*B,7));return I=(K+(V-v)*B)/7}const i=this.id?1:4,s=ul(e),l=this.dayOfYear(e),h=qr(s-1,7),d=l-1,g=qr(h-d,7),v=n(g);let I,T=Math.floor((d-v)/7)+1,S=e.isoYear;return T?T>r(0)&&(T=1,S++):(T=r(-1),S--),[T,S,I]}}),iy=Object.assign({},jf,oy,{v:as,hn:cl,q:ol,G(e,n){if(!n)return[In,e]},sn:ss,L(){},B:il,cn:e=>e*$n,U:al,fn:sl,V:(e,n,r)=>({isoYear:e,isoMonth:n,isoDay:r}),p:ar,un:(e,n,r)=>(e+=hi(r,$n),(n+=za(r,$n))<1?(e--,n+=$n):n>$n&&(e++,n-=$n),[e,n]),year(e){return e.isoYear},month(e){return e.isoMonth},day:e=>e.isoDay}),ay={v:ai,hn:Ql,q:Jl},sy={dayOfYear:Ks,v:ai,p:Wr,weekOfYear:Zl,yearOfWeek:$l,m(){return[]}},uy=Object.assign({},jf,sy,{v:ai,hn:Ql,q:Jl,G(e,n,r){const i=this.id&&Mt(this.id)==="chinese"?((v,I,T)=>{if(I)switch(v){case 1:return 1651;case 2:return T<30?1947:1765;case 3:return T<30?1966:1955;case 4:return T<30?1963:1944;case 5:return T<30?1971:1952;case 6:return T<30?1960:1941;case 7:return T<30?1968:1938;case 8:return T<30?1957:1718;case 9:return 1832;case 10:return 1870;case 11:return 1814;case 12:return 1890}return 1972})(e,n,r):In;let[s,l,h]=ai.call(this,{isoYear:i,isoMonth:$n,isoDay:31});const d=zo.call(this,s),g=l===d;(Gn(e,Fs(l,d))||Gn(Number(n),Number(g))||Gn(r,h))===1&&s--;for(let v=0;v<100;v++){const I=s-v,T=zo.call(this,I),S=ii(e,n,T);if(n===(S===T)&&r<=Nc.call(this,I,S))return[I,S]}},sn(e){const n=Zo.call(this,e);return n>Zo.call(this,e-1)&&n>Zo.call(this,e+1)},L:zo,B:$o,cn(e,n){const r=n+e,i=Math.sign(e),s=i<0?-1:0;let l=0;for(let h=n;h!==r;h+=i)l+=$o.call(this,h+s);return l},U:Nc,fn:Zo,V(e,n,r){return mi(Wr.call(this,e,n,r))},p:Wr,un(e,n,r){if(r){if(n+=r,!Number.isSafeInteger(n))throw new RangeError(lt);if(r<0)for(;n<1;)n+=$o.call(this,--e);else{let i;for(;n>(i=$o.call(this,e));)n-=i,e++}}return[e,n]},year(e){return this.h(e).year},month(e){const{year:n,o:r}=this.h(e),{u:i}=this.l(n);return i[r]+1},day(e){return this.h(e).day}}),Fi=Xl(ty,ay),ee=Xl(iy,uy),Ac={era:Vo,eraYear:Fe,year:Fe,month:sc,monthCode(e){const n=Vo(e);return As(n),n},day:sc,...or(Kn,Fe),...or(me,Xa),offset(e){const n=Vo(e);return jt(n),n}},cu=le(Vc,Kn,cn),cy=le(Vc,cn,Kn),Qn="numeric",co=["timeZoneName"],Kf={month:Qn,day:Qn},lu={year:Qn,month:Qn},fu=Object.assign({},lu,{day:Qn}),hu={hour:Qn,minute:Qn,second:Qn},du=Object.assign({},fu,hu),ly=Object.assign({},du,{timeZoneName:"short"}),fy=Object.keys(lu),hy=Object.keys(Kf),dy=Object.keys(fu),py=Object.keys(hu),pu=["dateStyle"],my=fy.concat(pu),yy=hy.concat(pu),mu=dy.concat(pu,["weekday"]),lo=py.concat(["dayPeriod","timeStyle","fractionalSecondDigits"]),yu=mu.concat(lo),gy=co.concat(lo),vy=co.concat(mu),by=co.concat(["day","weekday"],lo),wy=co.concat(["year","weekday"],lo),_y=Kt(yu,du),ky=Kt(yu,ly),Oy=Kt(yu,du,co),Ey=Kt(mu,fu,gy),xy=Kt(lo,hu,vy),Ry=Kt(my,lu,by),Py=Kt(yy,Kf,wy),Ty={},Af=new Jn(void 0,{calendar:fe}).resolvedOptions().calendar===fe,Ff=[_y,ds],Cy=[ky,ds,0,(e,n)=>{const r=e.timeZone;if(n&&n.timeZone!==r)throw new RangeError(pf);return r}],qf=[Oy,qe],Bf=[Ey,qe],Uf=[xy,e=>et(e)/jn],Lf=[Ry,qe,Af],Yf=[Py,qe,Af];let Fc;function ht(e,n,r,i,s){function l(...g){if(!(this instanceof l))throw new TypeError(Fa);Uc(this,n(...g))}function h(g,v){return Object.defineProperties(function(...I){return g.call(this,d(this),...I)},Ur(v))}function d(g){const v=Le(g);if(!v||v.branding!==e)throw new TypeError(Fa);return v}return Object.defineProperties(l.prototype,{...td(Dn(h,r)),...nr(Dn(h,i)),...Va("Temporal."+e)}),Object.defineProperties(l,{...nr(s),...Ur(e)}),[l,g=>{const v=Object.create(l.prototype);return Uc(v,g),v},d]}function gr(e){if(Le(e)||e.calendar!==void 0||e.timeZone!==void 0)throw new TypeError(Lp);return e}function fo(e){return Zf(e)||fe}function Zf(e){const{calendar:n}=e;if(n!==void 0)return qi(n)}function qi(e){if(Be(e)){const{calendar:n}=Le(e)||{};if(!n)throw new TypeError(ff(e));return n}return(n=>Di(Sd(je(n))))(e)}function gu(e){const n={};for(const r in e)n[r]=i=>{const{calendar:s}=i;return ee(s)[r](i)};return n}function dt(){throw new TypeError(Yp)}function Je(e){if(Be(e)){const{timeZone:n}=Le(e)||{};if(!n)throw new TypeError(df(e));return n}return(n=>Ds(Nd(je(n))))(e)}function Re(e){if(Be(e)){const n=Le(e);return n&&n.branding===ou?n:tp(e)}return Dd(e)}function Kr(e){if(e!==void 0){if(Be(e)){const n=Le(e)||{};switch(n.branding){case ft:case uo:return n;case yr:return Nn(n)}const r=fo(e);return{...Hd(Je,ie,ee(r),e),calendar:r}}return Rd(e)}}function Wn(e,n){if(Be(e)){const i=Le(e)||{};switch(i.branding){case tu:return de(n),i;case yr:return de(n),kn(i);case ft:return de(n),of(ie,i)}return np(e,n)}const r=Md(e);return de(n),r}function vu(e){return e===void 0?void 0:Wn(e)}function zt(e,n){if(Be(e)){const i=Le(e)||{};switch(i.branding){case yr:return de(n),i;case uo:return de(n),un({...i,...He});case ft:return de(n),tf(ie,i)}return Jd(ee(fo(e)),e,n)}const r=Td(e);return de(n),r}function qc(e,n){if(Be(e)){const i=Le(e);if(i&&i.branding===nu)return de(n),i;const s=Zf(e);return ep(ee(s||fe),!s,e,n)}const r=Id(ee,e);return de(n),r}function Ht(e,n){if(Be(e)){const i=Le(e);return i&&i.branding===eu?(de(n),i):Xd(ee(fo(e)),e,n)}const r=Cd(ee,e);return de(n),r}function Gt(e,n){if(Be(e)){const i=Le(e)||{};switch(i.branding){case uo:return de(n),i;case yr:return de(n),Nn(i);case ft:return de(n),rf(ie,i)}return Qd(ee(fo(e)),e,n)}const r=xs(e);return de(n),r}function Jt(e,n){if(Be(e)){const r=Le(e);if(r&&r.branding===ft)return gi(n),r;const i=fo(e);return Gd(Je,ie,ee(i),i,e,n)}return Pd(e,n)}function Bc(e){return Dn(n=>r=>n(Ya(r)),e)}function Ya(e){return nn(e,ie)}function Qt(e){if(Be(e)){const n=Le(e);if(n)switch(n.branding){case ru:return n;case ft:return Sn(n.epochNanoseconds)}}return xd(e)}function Iy(){function e(l,h){return new n(l,h)}function n(l,h=Object.create(null)){ci.set(this,((d,g)=>{const v=new Jn(d,g),I=v.resolvedOptions(),T=I.locale,S=an(Object.keys(g),I),j=Qe(Sy),K=(B,...V)=>{if(B){if(V.length!==2)throw new TypeError(Sa);for(const re of V)if(re===void 0)throw new TypeError(Sa)}B||V[0]!==void 0||(V=[]);const G=V.map(re=>Le(re)||Number(re));let H,X=0;for(const re of G){const he=typeof re=="object"?re.branding:void 0;if(X++&&he!==H)throw new TypeError(Sa);H=he}return H?j(H)(T,S,...G):[v,...G]};return K.X=v,K})(l,h))}const r=Jn.prototype,i=Object.getOwnPropertyDescriptors(r),s=Object.getOwnPropertyDescriptors(Jn);for(const l in i){const h=i[l],d=l.startsWith("format")&&My(l);typeof h.value=="function"?h.value=l==="constructor"?e:d||Dy(l):d&&(h.get=function(){if(!ci.has(this))throw new TypeError(Fa);return(...g)=>d.apply(this,g)},Object.defineProperties(h.get,Ur(`get ${l}`)))}return s.prototype.value=n.prototype=Object.create({},i),Object.defineProperties(e,s),e}function My(e){return Object.defineProperties(function(...n){const r=ci.get(this),[i,...s]=r(e.includes("Range"),...n);return i[e](...s)},Ur(e))}function Dy(e){return Object.defineProperties(function(...n){return ci.get(this).X[e](...n)},Ur(e))}function Sy(e){const n=qy[e];if(!n)throw new TypeError(sm(e));return ut(n,Qe(af),1)}const ui=new WeakMap,Le=ui.get.bind(ui),Uc=ui.set.bind(ui),$f={era:rd,eraYear:Jc,year:Ha,month:Pn,daysInMonth:Pn,daysInYear:Pn,inLeapYear:dm,monthsInYear:Pn},bu={monthCode:je},Wf={day:Pn},Ny={dayOfWeek:Pn,dayOfYear:Pn,weekOfYear:od,yearOfWeek:Jc,daysInWeek:Pn},wu=gu(Object.assign({},$f,bu,Wf,Ny)),jy=gu({...$f,...bu}),Ky=gu({...bu,...Wf}),ho={calendarId:e=>e.calendar},Ay=fi(e=>n=>n[e],me.concat("sign")),_u=fi((e,n)=>r=>r[cn[n]],Kn),Vf={epochMilliseconds:ds,epochNanoseconds:sd},[Fy,ke,yg]=ht(ou,gp,{...Ay,blank:Od},{with:(e,n)=>ke(cp(e,n)),negated:e=>ke(Es(e)),abs:e=>ke(kd(e)),add:(e,n,r)=>ke(xc(Kr,ee,ie,0,e,Re(n),r)),subtract:(e,n,r)=>ke(xc(Kr,ee,ie,1,e,Re(n),r)),round:(e,n)=>ke(_d(Kr,ee,ie,e,n)),total:(e,n)=>ud(Kr,ee,ie,e,n),toLocaleString(e,n,r){return Intl.DurationFormat?new Intl.DurationFormat(n,r).format(this):Ta(e)},toString:Ta,toJSON:e=>Ta(e),valueOf:dt},{from:e=>ke(Re(e)),compare:(e,n,r)=>Kd(Kr,ee,ie,Re(e),Re(n),r)}),qy={Instant:Ff,PlainDateTime:qf,PlainDate:Bf,PlainTime:Uf,PlainYearMonth:Lf,PlainMonthDay:Yf},By=ut(Ff),Uy=ut(Cy),Ly=ut(qf),Yy=ut(Bf),Zy=ut(Uf),$y=ut(Lf),Wy=ut(Yf),[Vy,zn]=ht(tu,yp,_u,{with(e,n,r){return zn(up(this,gr(n),r))},add:(e,n)=>zn(Ec(0,e,Re(n))),subtract:(e,n)=>zn(Ec(1,e,Re(n))),until:(e,n,r)=>ke(Sc(0,e,Wn(n),r)),since:(e,n,r)=>ke(Sc(1,e,Wn(n),r)),round:(e,n)=>zn(hd(e,n)),equals:(e,n)=>Yd(e,Wn(n)),toLocaleString(e,n,r){const[i,s]=Zy(n,r,e);return i.format(s)},toString:gc,toJSON:e=>gc(e),valueOf:dt},{from:(e,n)=>zn(Wn(e,n)),compare:(e,n)=>Ns(Wn(e),Wn(n))}),[zy,pn]=ht(yr,le(hp,to),{...ho,...wu,..._u},{with:(e,n,r)=>pn(op(ee,e,gr(n),r)),withCalendar:(e,n)=>pn(qs(e,qi(n))),withPlainTime:(e,n)=>pn(Mp(e,vu(n))),add:(e,n,r)=>pn(_c(ee,0,e,Re(n),r)),subtract:(e,n,r)=>pn(_c(ee,1,e,Re(n),r)),until:(e,n,r)=>ke(Ic(ee,0,e,zt(n),r)),since:(e,n,r)=>ke(Ic(ee,1,e,zt(n),r)),round:(e,n)=>pn(fd(e,n)),equals:(e,n)=>qd(e,zt(n)),toZonedDateTime:(e,n,r)=>Ke(wp(ie,e,Je(n),r)),toPlainDate:e=>mn(Nn(e)),toPlainTime:e=>zn(kn(e)),toLocaleString(e,n,r){const[i,s]=Ly(n,r,e);return i.format(s)},toString:dc,toJSON:e=>dc(e),valueOf:dt},{from:(e,n)=>pn(zt(e,n)),compare:(e,n)=>Al(zt(e),zt(n))}),[Hy,Za,gg]=ht(nu,le(mp,to),{...ho,...Ky},{with:(e,n,r)=>Za(sp(ee,e,gr(n),r)),equals:(e,n)=>Ld(e,qc(n)),toPlainDate(e,n){return mn(Rp(ee,e,this,n))},toLocaleString(e,n,r){const[i,s]=Wy(n,r,e);return i.format(s)},toString:yc,toJSON:e=>yc(e),valueOf:dt},{from:(e,n)=>Za(qc(e,n))}),[Gy,Ar,vg]=ht(eu,le(pp,to),{...ho,...jy},{with:(e,n,r)=>Ar(ap(ee,e,gr(n),r)),add:(e,n,r)=>Ar(Oc(ee,0,e,Re(n),r)),subtract:(e,n,r)=>Ar(Oc(ee,1,e,Re(n),r)),until:(e,n,r)=>ke(Dc(ee,0,e,Ht(n),r)),since:(e,n,r)=>ke(Dc(ee,1,e,Ht(n),r)),equals:(e,n)=>Ud(e,Ht(n)),toPlainDate(e,n){return mn(xp(ee,e,this,n))},toLocaleString(e,n,r){const[i,s]=$y(n,r,e);return i.format(s)},toString:mc,toJSON:e=>mc(e),valueOf:dt},{from:(e,n)=>Ar(Ht(e,n)),compare:(e,n)=>dr(Ht(e),Ht(n))}),[Jy,mn,bg]=ht(uo,le(dp,to),{...ho,...wu},{with:(e,n,r)=>mn(ip(ee,e,gr(n),r)),withCalendar:(e,n)=>mn(qs(e,qi(n))),add:(e,n,r)=>mn(kc(ee,0,e,Re(n),r)),subtract:(e,n,r)=>mn(kc(ee,1,e,Re(n),r)),until:(e,n,r)=>ke(Mc(ee,0,e,Gt(n),r)),since:(e,n,r)=>ke(Mc(ee,1,e,Gt(n),r)),equals:(e,n)=>Bd(e,Gt(n)),toZonedDateTime(e,n){const r=Be(n)?n:{timeZone:n};return Ke(_p(Je,Wn,ie,e,r))},toPlainDateTime:(e,n)=>pn(kp(e,vu(n))),toPlainYearMonth(e){return Ar(Op(ee,e,this))},toPlainMonthDay(e){return Za(Ep(ee,e,this))},toLocaleString(e,n,r){const[i,s]=Yy(n,r,e);return i.format(s)},toString:pc,toJSON:e=>pc(e),valueOf:dt},{from:(e,n)=>mn(Gt(e,n)),compare:(e,n)=>dr(Gt(e),Gt(n))}),[Qy,Ke]=ht(ft,le(fp,to,jd),{...Vf,...ho,...Bc(wu),...Bc(_u),offset:e=>Xr(Ya(e).offsetNanoseconds),offsetNanoseconds:e=>Ya(e).offsetNanoseconds,timeZoneId:e=>e.timeZone,hoursInDay:e=>dd(ie,e)},{with:(e,n,r)=>Ke(rp(ee,ie,e,gr(n),r)),withCalendar:(e,n)=>Ke(qs(e,qi(n))),withTimeZone:(e,n)=>Ke(Dp(e,Je(n))),withPlainTime:(e,n)=>Ke(Ip(ie,e,vu(n))),add:(e,n,r)=>Ke(wc(ee,ie,0,e,Re(n),r)),subtract:(e,n,r)=>Ke(wc(ee,ie,1,e,Re(n),r)),until:(e,n,r)=>ke(Pe(Cc(ee,ie,0,e,Jt(n),r))),since:(e,n,r)=>ke(Pe(Cc(ee,ie,1,e,Jt(n),r))),round:(e,n)=>Ke(ld(ie,e,n)),startOfDay:e=>Ke(pd(ie,e)),equals:(e,n)=>Fd(e,Jt(n)),toInstant:e=>Vn(bp(e)),toPlainDateTime:e=>pn(tf(ie,e)),toPlainDate:e=>mn(rf(ie,e)),toPlainTime:e=>zn(of(ie,e)),toLocaleString(e,n,r={}){const[i,s]=Uy(n,r,e);return i.format(s)},toString:(e,n)=>hc(ie,e,n),toJSON:e=>hc(ie,e),valueOf:dt,getTimeZoneTransition(e,n){const{timeZone:r,epochNanoseconds:i}=e,s=ad(n),l=ie(r).O(i,s);return l?Ke({...e,epochNanoseconds:l}):null}},{from:(e,n)=>Ke(Jt(e,n)),compare:(e,n)=>Kl(Jt(e),Jt(n))}),[Xy,Vn,wg]=ht(ru,lp,Vf,{add:(e,n)=>Vn(bc(0,e,Re(n))),subtract:(e,n)=>Vn(bc(1,e,Re(n))),until:(e,n,r)=>ke(Tc(0,e,Qt(n),r)),since:(e,n,r)=>ke(Tc(1,e,Qt(n),r)),round:(e,n)=>Vn(cd(e,n)),equals:(e,n)=>Ad(e,Qt(n)),toZonedDateTimeISO:(e,n)=>Ke(vp(e,Je(n))),toLocaleString(e,n,r){const[i,s]=By(n,r,e);return i.format(s)},toString:(e,n)=>fc(Je,ie,e,n),toJSON:e=>fc(Je,ie,e),valueOf:dt},{from:e=>Vn(Qt(e)),fromEpochMilliseconds:e=>Vn(Pp(e)),fromEpochNanoseconds:e=>Vn(Tp(e)),compare:(e,n)=>jl(Qt(e),Qt(n))}),eg=Object.defineProperties({},{...Va("Temporal.Now"),...nr({timeZoneId:()=>Nr(),instant:()=>Vn(Sn(Aa())),zonedDateTimeISO:(e=Nr())=>Ke(sn(Aa(),Je(e),fe)),plainDateTimeISO:(e=Nr())=>pn(un(Da(ie(Je(e))),fe)),plainDateISO:(e=Nr())=>mn(Nn(Da(ie(Je(e))),fe)),plainTimeISO:(e=Nr())=>zn(kn(Da(ie(Je(e)))))})}),er=Object.defineProperties({},{...Va("Temporal"),...nr({PlainYearMonth:Gy,PlainMonthDay:Hy,PlainDate:Jy,PlainTime:Vy,PlainDateTime:zy,ZonedDateTime:Qy,Instant:Xy,Duration:Fy,Now:eg})}),ng=Iy(),ci=new WeakMap;Object.create(Intl),nr({DateTimeFormat:ng});function tg(e){return{date:e.date,venues:e.venues.map(n=>({...n,name:n.name.trim(),items:n.items.map(r=>({...r,name:r.name.trim(),allergens:r.allergens.map(i=>i.trim())}))}))}}function rg(e){return{date:e.date.trim(),venues:e.venues.map(n=>typeof n.menu_items=="string"?{venue_name:n.venue_name.trim(),menu_items:n.menu_items.trim()}:{venue_name:n.venue_name.trim(),menu_items:n.menu_items.map(r=>({item_name:r.item_name.trim(),allergens:[...r.allergens.map(i=>i.trim())]}))})}}function og(e){return tg({date:e.date,venues:e.venues.map(n=>typeof n.menu_items=="string"?{name:n.venue_name,items:[{name:n.menu_items,allergens:[]}]}:{name:n.venue_name,items:n.menu_items.map(r=>({name:r.item_name,allergens:[...r.allergens]}))})})}var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ag(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jo={exports:{}},sg=Jo.exports,Lc;function ug(){return Lc||(Lc=1,function(e,n){(function(r,i){e.exports=i()})(sg,function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(a[c]=u[c])})(t,o)},i=function(){return(i=Object.assign||function(t){for(var o,a=1,u=arguments.length;a<u;a++)for(var c in o=arguments[a])Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c]);return t}).apply(this,arguments)};function s(t,o,a){for(var u,c=0,f=o.length;c<f;c++)!u&&c in o||((u=u||Array.prototype.slice.call(o,0,c))[c]=o[c]);return t.concat(u||Array.prototype.slice.call(o))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ig,h=Object.keys,d=Array.isArray;function g(t,o){return typeof o!="object"||h(o).forEach(function(a){t[a]=o[a]}),t}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var v=Object.getPrototypeOf,I={}.hasOwnProperty;function T(t,o){return I.call(t,o)}function S(t,o){typeof o=="function"&&(o=o(v(t))),(typeof Reflect>"u"?h:Reflect.ownKeys)(o).forEach(function(a){K(t,a,o[a])})}var j=Object.defineProperty;function K(t,o,a,u){j(t,o,g(a&&T(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},u))}function B(t){return{from:function(o){return t.prototype=Object.create(o.prototype),K(t.prototype,"constructor",t),{extend:S.bind(null,t.prototype)}}}}var V=Object.getOwnPropertyDescriptor,G=[].slice;function H(t,o,a){return G.call(t,o,a)}function X(t,o){return o(t)}function re(t){if(!t)throw new Error("Assertion Failed")}function he(t){l.setImmediate?setImmediate(t):setTimeout(t,0)}function ue(t,o){if(typeof o=="string"&&T(t,o))return t[o];if(!o)return t;if(typeof o!="string"){for(var a=[],u=0,c=o.length;u<c;++u){var f=ue(t,o[u]);a.push(f)}return a}var p=o.indexOf(".");if(p!==-1){var m=t[o.substr(0,p)];return m==null?void 0:ue(m,o.substr(p+1))}}function ae(t,o,a){if(t&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof o!="string"&&"length"in o){re(typeof a!="string"&&"length"in a);for(var u=0,c=o.length;u<c;++u)ae(t,o[u],a[u])}else{var f,p,m=o.indexOf(".");m!==-1?(f=o.substr(0,m),(p=o.substr(m+1))===""?a===void 0?d(t)&&!isNaN(parseInt(f))?t.splice(f,1):delete t[f]:t[f]=a:ae(m=!(m=t[f])||!T(t,f)?t[f]={}:m,p,a)):a===void 0?d(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=a}}function ve(t){var o,a={};for(o in t)T(t,o)&&(a[o]=t[o]);return a}var be=[].concat;function ln(t){return be.apply([],t)}var gt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ln([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(o){return o+t+"Array"})}))).filter(function(t){return l[t]}),tn=new Set(gt.map(function(t){return l[t]})),pt=null;function xe(t){return pt=new WeakMap,t=function o(a){if(!a||typeof a!="object")return a;var u=pt.get(a);if(u)return u;if(d(a)){u=[],pt.set(a,u);for(var c=0,f=a.length;c<f;++c)u.push(o(a[c]))}else if(tn.has(a.constructor))u=a;else{var p,m=v(a);for(p in u=m===Object.prototype?{}:Object.create(m),pt.set(a,u),a)T(a,p)&&(u[p]=o(a[p]))}return u}(t),pt=null,t}var zf={}.toString;function Bi(t){return zf.call(t).slice(8,-1)}var Ui=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Hf=typeof Ui=="symbol"?function(t){var o;return t!=null&&(o=t[Ui])&&o.apply(t)}:function(){return null};function mt(t,o){return o=t.indexOf(o),0<=o&&t.splice(o,1),0<=o}var Ft={};function On(t){var o,a,u,c;if(arguments.length===1){if(d(t))return t.slice();if(this===Ft&&typeof t=="string")return[t];if(c=Hf(t)){for(a=[];!(u=c.next()).done;)a.push(u.value);return a}if(t==null)return[t];if(typeof(o=t.length)!="number")return[t];for(a=new Array(o);o--;)a[o]=t[o];return a}for(o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return a}var Li=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},wr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ge=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wr),Gf={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qt(t,o){this.name=t,this.message=o}function ku(t,o){return t+". Errors: "+Object.keys(o).map(function(a){return o[a].toString()}).filter(function(a,u,c){return c.indexOf(a)===u}).join(`
`)}function po(t,o,a,u){this.failures=o,this.failedKeys=u,this.successCount=a,this.message=ku(t,o)}function Bt(t,o){this.name="BulkError",this.failures=Object.keys(o).map(function(a){return o[a]}),this.failuresByPos=o,this.message=ku(t,this.failures)}B(qt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(po).from(qt),B(Bt).from(qt);var Yi=Ge.reduce(function(t,o){return t[o]=o+"Error",t},{}),Jf=qt,z=Ge.reduce(function(t,o){var a=o+"Error";function u(c,f){this.name=a,c?typeof c=="string"?(this.message="".concat(c).concat(f?`
 `+f:""),this.inner=f||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Gf[o]||a,this.inner=null)}return B(u).from(Jf),t[o]=u,t},{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var Ou=wr.reduce(function(t,o){return t[o+"Error"]=z[o],t},{}),mo=Ge.reduce(function(t,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(t[o+"Error"]=z[o]),t},{});function ce(){}function vr(t){return t}function Qf(t,o){return t==null||t===vr?o:function(a){return o(t(a))}}function yt(t,o){return function(){t.apply(this,arguments),o.apply(this,arguments)}}function Xf(t,o){return t===ce?o:function(){var a=t.apply(this,arguments);a!==void 0&&(arguments[0]=a);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=o.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?yt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?yt(c,this.onerror):c),f!==void 0?f:a}}function eh(t,o){return t===ce?o:function(){t.apply(this,arguments);var a=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?yt(a,this.onsuccess):a),u&&(this.onerror=this.onerror?yt(u,this.onerror):u)}}function nh(t,o){return t===ce?o:function(a){var u=t.apply(this,arguments);g(a,u);var c=this.onsuccess,f=this.onerror;return this.onsuccess=null,this.onerror=null,a=o.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?yt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?yt(f,this.onerror):f),u===void 0?a===void 0?void 0:a:g(u,a)}}function th(t,o){return t===ce?o:function(){return o.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Zi(t,o){return t===ce?o:function(){var a=t.apply(this,arguments);if(a&&typeof a.then=="function"){for(var u=this,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return a.then(function(){return o.apply(u,f)})}return o.apply(this,arguments)}}mo.ModifyError=po,mo.DexieError=qt,mo.BulkError=Bt;var fn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Eu(t){fn=t}var br={},xu=100,gt=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,v(t),t];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,v(o),t]}(),wr=gt[0],Ge=gt[1],gt=gt[2],Ge=Ge&&Ge.then,vt=wr&&wr.constructor,$i=!!gt,_r=function(t,o){kr.push([t,o]),yo&&(queueMicrotask(oh),yo=!1)},Wi=!0,yo=!0,bt=[],go=[],Vi=vr,Fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ce,pgp:!1,env:{},finalize:ce},W=Fn,kr=[],wt=0,vo=[];function Z(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=W;if(typeof t!="function"){if(t!==br)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Hi(this,this._value))}this._state=null,this._value=null,++o.ref,function a(u,c){try{c(function(f){if(u._state===null){if(f===u)throw new TypeError("A promise cannot be resolved with itself.");var p=u._lib&&Ut();f&&typeof f.then=="function"?a(u,function(m,b){f instanceof Z?f._then(m,b):f.then(m,b)}):(u._state=!0,u._value=f,Pu(u)),p&&Lt()}},Hi.bind(null,u))}catch(f){Hi(u,f)}}(this,t)}var zi={get:function(){var t=W,o=ko;function a(u,c){var f=this,p=!t.global&&(t!==W||o!==ko),m=p&&!Bn(),b=new Z(function(k,x){Gi(f,new Ru(Cu(u,t,p,m),Cu(c,t,p,m),k,x,t))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return a.prototype=br,a},set:function(t){K(this,"then",t&&t.prototype===br?zi:{get:function(){return t},set:zi.set})}};function Ru(t,o,a,u,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof o=="function"?o:null,this.resolve=a,this.reject=u,this.psd=c}function Hi(t,o){var a,u;go.push(o),t._state===null&&(a=t._lib&&Ut(),o=Vi(o),t._state=!1,t._value=o,u=t,bt.some(function(c){return c._value===u._value})||bt.push(u),Pu(t),a&&Lt())}function Pu(t){var o=t._listeners;t._listeners=[];for(var a=0,u=o.length;a<u;++a)Gi(t,o[a]);var c=t._PSD;--c.ref||c.finalize(),wt===0&&(++wt,_r(function(){--wt==0&&Ji()},[]))}function Gi(t,o){if(t._state!==null){var a=t._state?o.onFulfilled:o.onRejected;if(a===null)return(t._state?o.resolve:o.reject)(t._value);++o.psd.ref,++wt,_r(rh,[a,t,o])}else t._listeners.push(o)}function rh(t,o,a){try{var u,c=o._value;!o._state&&go.length&&(go=[]),u=fn&&o._consoleTask?o._consoleTask.run(function(){return t(c)}):t(c),o._state||go.indexOf(c)!==-1||function(f){for(var p=bt.length;p;)if(bt[--p]._value===f._value)return bt.splice(p,1)}(o),a.resolve(u)}catch(f){a.reject(f)}finally{--wt==0&&Ji(),--a.psd.ref||a.psd.finalize()}}function oh(){_t(Fn,function(){Ut()&&Lt()})}function Ut(){var t=Wi;return yo=Wi=!1,t}function Lt(){var t,o,a;do for(;0<kr.length;)for(t=kr,kr=[],a=t.length,o=0;o<a;++o){var u=t[o];u[0].apply(null,u[1])}while(0<kr.length);yo=Wi=!0}function Ji(){var t=bt;bt=[],t.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var o=vo.slice(0),a=o.length;a;)o[--a]()}function bo(t){return new Z(br,!1,t)}function ye(t,o){var a=W;return function(){var u=Ut(),c=W;try{return Un(a,!0),t.apply(this,arguments)}catch(f){o&&o(f)}finally{Un(c,!1),u&&Lt()}}}S(Z.prototype,{then:zi,_then:function(t,o){Gi(this,new Ru(null,null,t,o,W))},catch:function(t){if(arguments.length===1)return this.then(null,t);var o=t,a=arguments[1];return typeof o=="function"?this.then(null,function(u){return(u instanceof o?a:bo)(u)}):this.then(null,function(u){return(u&&u.name===o?a:bo)(u)})},finally:function(t){return this.then(function(o){return Z.resolve(t()).then(function(){return o})},function(o){return Z.resolve(t()).then(function(){return bo(o)})})},timeout:function(t,o){var a=this;return t<1/0?new Z(function(u,c){var f=setTimeout(function(){return c(new z.Timeout(o))},t);a.then(u,c).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&K(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),Fn.env=Tu(),S(Z,{all:function(){var t=On.apply(null,arguments).map(Oo);return new Z(function(o,a){t.length===0&&o([]);var u=t.length;t.forEach(function(c,f){return Z.resolve(c).then(function(p){t[f]=p,--u||o(t)},a)})})},resolve:function(t){return t instanceof Z?t:t&&typeof t.then=="function"?new Z(function(o,a){t.then(o,a)}):new Z(br,!0,t)},reject:bo,race:function(){var t=On.apply(null,arguments).map(Oo);return new Z(function(o,a){t.map(function(u){return Z.resolve(u).then(o,a)})})},PSD:{get:function(){return W},set:function(t){return W=t}},totalEchoes:{get:function(){return ko}},newPSD:qn,usePSD:_t,scheduler:{get:function(){return _r},set:function(t){_r=t}},rejectionMapper:{get:function(){return Vi},set:function(t){Vi=t}},follow:function(t,o){return new Z(function(a,u){return qn(function(c,f){var p=W;p.unhandleds=[],p.onunhandled=f,p.finalize=yt(function(){var m,b=this;m=function(){b.unhandleds.length===0?c():f(b.unhandleds[0])},vo.push(function k(){m(),vo.splice(vo.indexOf(k),1)}),++wt,_r(function(){--wt==0&&Ji()},[])},p.finalize),t()},o,a,u)})}}),vt&&(vt.allSettled&&K(Z,"allSettled",function(){var t=On.apply(null,arguments).map(Oo);return new Z(function(o){t.length===0&&o([]);var a=t.length,u=new Array(a);t.forEach(function(c,f){return Z.resolve(c).then(function(p){return u[f]={status:"fulfilled",value:p}},function(p){return u[f]={status:"rejected",reason:p}}).then(function(){return--a||o(u)})})})}),vt.any&&typeof AggregateError<"u"&&K(Z,"any",function(){var t=On.apply(null,arguments).map(Oo);return new Z(function(o,a){t.length===0&&a(new AggregateError([]));var u=t.length,c=new Array(u);t.forEach(function(f,p){return Z.resolve(f).then(function(m){return o(m)},function(m){c[p]=m,--u||a(new AggregateError(c))})})})}),vt.withResolvers&&(Z.withResolvers=vt.withResolvers));var Oe={awaits:0,echoes:0,id:0},ih=0,wo=[],_o=0,ko=0,ah=0;function qn(t,o,a,u){var c=W,f=Object.create(c);return f.parent=c,f.ref=0,f.global=!1,f.id=++ah,Fn.env,f.env=$i?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},o&&g(f,o),++c.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},u=_t(f,t,a,u),f.ref===0&&f.finalize(),u}function Yt(){return Oe.id||(Oe.id=++ih),++Oe.awaits,Oe.echoes+=xu,Oe.id}function Bn(){return!!Oe.awaits&&(--Oe.awaits==0&&(Oe.id=0),Oe.echoes=Oe.awaits*xu,!0)}function Oo(t){return Oe.echoes&&t&&t.constructor===vt?(Yt(),t.then(function(o){return Bn(),o},function(o){return Bn(),we(o)})):t}function sh(){var t=wo[wo.length-1];wo.pop(),Un(t,!1)}function Un(t,o){var a,u=W;(o?!Oe.echoes||_o++&&t===W:!_o||--_o&&t===W)||queueMicrotask(o?(function(c){++ko,Oe.echoes&&--Oe.echoes!=0||(Oe.echoes=Oe.awaits=Oe.id=0),wo.push(W),Un(c,!0)}).bind(null,t):sh),t!==W&&(W=t,u===Fn&&(Fn.env=Tu()),$i&&(a=Fn.env.Promise,o=t.env,(u.global||t.global)&&(Object.defineProperty(l,"Promise",o.PromiseProp),a.all=o.all,a.race=o.race,a.resolve=o.resolve,a.reject=o.reject,o.allSettled&&(a.allSettled=o.allSettled),o.any&&(a.any=o.any))))}function Tu(){var t=l.Promise;return $i?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function _t(t,o,a,u,c){var f=W;try{return Un(t,!0),o(a,u,c)}finally{Un(f,!1)}}function Cu(t,o,a,u){return typeof t!="function"?t:function(){var c=W;a&&Yt(),Un(o,!0);try{return t.apply(this,arguments)}finally{Un(c,!1),u&&queueMicrotask(Bn)}}}function Qi(t){Promise===vt&&Oe.echoes===0?_o===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+Ge).indexOf("[native code]")===-1&&(Yt=Bn=ce);var we=Z.reject,kt="",En="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Iu="String expected.",Zt=[],Eo="__dbnames",Xi="readonly",ea="readwrite";function Ot(t,o){return t?o?function(){return t.apply(this,arguments)&&o.apply(this,arguments)}:t:o}var Mu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xo(t){return typeof t!="string"||/\./.test(t)?function(o){return o}:function(o){return o[t]===void 0&&t in o&&delete(o=xe(o))[t],o}}function Du(){throw z.Type()}function oe(t,o){try{var a=Su(t),u=Su(o);if(a!==u)return a==="Array"?1:u==="Array"?-1:a==="binary"?1:u==="binary"?-1:a==="string"?1:u==="string"?-1:a==="Date"?1:u!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return o<t?1:t<o?-1:0;case"binary":return function(c,f){for(var p=c.length,m=f.length,b=p<m?p:m,k=0;k<b;++k)if(c[k]!==f[k])return c[k]<f[k]?-1:1;return p===m?0:p<m?-1:1}(Nu(t),Nu(o));case"Array":return function(c,f){for(var p=c.length,m=f.length,b=p<m?p:m,k=0;k<b;++k){var x=oe(c[k],f[k]);if(x!==0)return x}return p===m?0:p<m?-1:1}(t,o)}}catch{}return NaN}function Su(t){var o=typeof t;return o!="object"?o:ArrayBuffer.isView(t)?"binary":(t=Bi(t),t==="ArrayBuffer"?"binary":t)}function Nu(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var ju=(pe.prototype._trans=function(t,o,a){var u=this._tx||W.trans,c=this.name,f=fn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function p(k,x,y){if(!y.schema[c])throw new z.NotFound("Table "+c+" not part of transaction");return o(y.idbtrans,y)}var m=Ut();try{var b=u&&u.db._novip===this.db._novip?u===W.trans?u._promise(t,p,a):qn(function(){return u._promise(t,p,a)},{trans:u,transless:W.transless||W}):function k(x,y,P,w){if(x.idbdb&&(x._state.openComplete||W.letThrough||x._vip)){var E=x._createTransaction(y,P,x._dbSchema);try{E.create(),x._state.PR1398_maxLoop=3}catch(R){return R.name===Yi.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return k(x,y,P,w)})):we(R)}return E._promise(y,function(R,O){return qn(function(){return W.trans=E,w(R,O,E)})}).then(function(R){if(y==="readwrite")try{E.idbtrans.commit()}catch{}return y==="readonly"?R:E._completion.then(function(){return R})})}if(x._state.openComplete)return we(new z.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return we(new z.DatabaseClosed);x.open().catch(ce)}return x._state.dbReadyPromise.then(function(){return k(x,y,P,w)})}(this.db,t,[this.name],p);return f&&(b._consoleTask=f,b=b.catch(function(k){return console.trace(k),we(k)})),b}finally{m&&Lt()}},pe.prototype.get=function(t,o){var a=this;return t&&t.constructor===Object?this.where(t).first(o):t==null?we(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return a.core.get({trans:u,key:t}).then(function(c){return a.hook.reading.fire(c)})}).then(o)},pe.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(d(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var o=h(t);if(o.length===1)return this.where(o[0]).equals(t[o[0]]);var a=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&o.every(function(k){return 0<=m.keyPath.indexOf(k)})){for(var b=0;b<o.length;++b)if(o.indexOf(m.keyPath[b])===-1)return!1;return!0}return!1}).sort(function(m,b){return m.keyPath.length-b.keyPath.length})[0];if(a&&this.db._maxKey!==kt){var f=a.keyPath.slice(0,o.length);return this.where(f).equals(f.map(function(b){return t[b]}))}!a&&fn&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var u=this.schema.idxByName;function c(m,b){return oe(m,b)===0}var p=o.reduce(function(y,b){var k=y[0],x=y[1],y=u[b],P=t[b];return[k||y,k||!y?Ot(x,y&&y.multi?function(w){return w=ue(w,b),d(w)&&w.some(function(E){return c(P,E)})}:function(w){return c(P,ue(w,b))}):x]},[null,null]),f=p[0],p=p[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(p):a?this.filter(p):this.where(o).equals("")},pe.prototype.filter=function(t){return this.toCollection().and(t)},pe.prototype.count=function(t){return this.toCollection().count(t)},pe.prototype.offset=function(t){return this.toCollection().offset(t)},pe.prototype.limit=function(t){return this.toCollection().limit(t)},pe.prototype.each=function(t){return this.toCollection().each(t)},pe.prototype.toArray=function(t){return this.toCollection().toArray(t)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,d(t)?"[".concat(t.join("+"),"]"):t))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(t){var o,a=this.db,u=this.name;function c(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Du&&(function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function x(){this.constructor=b}r(b,k),b.prototype=k===null?Object.create(k):(x.prototype=k.prototype,new x)}(c,o=t),Object.defineProperty(c.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),c.prototype.table=function(){return u},t=c);for(var f=new Set,p=t.prototype;p;p=v(p))Object.getOwnPropertyNames(p).forEach(function(b){return f.add(b)});function m(b){if(!b)return b;var k,x=Object.create(t.prototype);for(k in b)if(!f.has(k))try{x[k]=b[k]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),t},pe.prototype.defineClass=function(){return this.mapToClass(function(t){g(this,t)})},pe.prototype.add=function(t,o){var a=this,u=this.schema.primKey,c=u.auto,f=u.keyPath,p=t;return f&&c&&(p=xo(f)(t)),this._trans("readwrite",function(m){return a.core.mutate({trans:m,type:"add",keys:o!=null?[o]:null,values:[p]})}).then(function(m){return m.numFailures?Z.reject(m.failures[0]):m.lastResult}).then(function(m){if(f)try{ae(t,f,m)}catch{}return m})},pe.prototype.update=function(t,o){return typeof t!="object"||d(t)?this.where(":id").equals(t).modify(o):(t=ue(t,this.schema.primKey.keyPath),t===void 0?we(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(o))},pe.prototype.put=function(t,o){var a=this,u=this.schema.primKey,c=u.auto,f=u.keyPath,p=t;return f&&c&&(p=xo(f)(t)),this._trans("readwrite",function(m){return a.core.mutate({trans:m,type:"put",values:[p],keys:o!=null?[o]:null})}).then(function(m){return m.numFailures?Z.reject(m.failures[0]):m.lastResult}).then(function(m){if(f)try{ae(t,f,m)}catch{}return m})},pe.prototype.delete=function(t){var o=this;return this._trans("readwrite",function(a){return o.core.mutate({trans:a,type:"delete",keys:[t]})}).then(function(a){return a.numFailures?Z.reject(a.failures[0]):void 0})},pe.prototype.clear=function(){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"deleteRange",range:Mu})}).then(function(o){return o.numFailures?Z.reject(o.failures[0]):void 0})},pe.prototype.bulkGet=function(t){var o=this;return this._trans("readonly",function(a){return o.core.getMany({keys:t,trans:a}).then(function(u){return u.map(function(c){return o.hook.reading.fire(c)})})})},pe.prototype.bulkAdd=function(t,o,a){var u=this,c=Array.isArray(o)?o:void 0,f=(a=a||(c?void 0:o))?a.allKeys:void 0;return this._trans("readwrite",function(p){var k=u.schema.primKey,m=k.auto,k=k.keyPath;if(k&&c)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var b=t.length,k=k&&m?t.map(xo(k)):t;return u.core.mutate({trans:p,type:"add",keys:c,values:k,wantResults:f}).then(function(E){var y=E.numFailures,P=E.results,w=E.lastResult,E=E.failures;if(y===0)return f?P:w;throw new Bt("".concat(u.name,".bulkAdd(): ").concat(y," of ").concat(b," operations failed"),E)})})},pe.prototype.bulkPut=function(t,o,a){var u=this,c=Array.isArray(o)?o:void 0,f=(a=a||(c?void 0:o))?a.allKeys:void 0;return this._trans("readwrite",function(p){var k=u.schema.primKey,m=k.auto,k=k.keyPath;if(k&&c)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var b=t.length,k=k&&m?t.map(xo(k)):t;return u.core.mutate({trans:p,type:"put",keys:c,values:k,wantResults:f}).then(function(E){var y=E.numFailures,P=E.results,w=E.lastResult,E=E.failures;if(y===0)return f?P:w;throw new Bt("".concat(u.name,".bulkPut(): ").concat(y," of ").concat(b," operations failed"),E)})})},pe.prototype.bulkUpdate=function(t){var o=this,a=this.core,u=t.map(function(p){return p.key}),c=t.map(function(p){return p.changes}),f=[];return this._trans("readwrite",function(p){return a.getMany({trans:p,keys:u,cache:"clone"}).then(function(m){var b=[],k=[];t.forEach(function(y,P){var w=y.key,E=y.changes,R=m[P];if(R){for(var O=0,C=Object.keys(E);O<C.length;O++){var M=C[O],D=E[M];if(M===o.schema.primKey.keyPath){if(oe(D,w)!==0)throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else ae(R,M,D)}f.push(P),b.push(w),k.push(R)}});var x=b.length;return a.mutate({trans:p,type:"put",keys:b,values:k,updates:{keys:u,changeSpecs:c}}).then(function(y){var P=y.numFailures,w=y.failures;if(P===0)return x;for(var E=0,R=Object.keys(w);E<R.length;E++){var O,C=R[E],M=f[Number(C)];M!=null&&(O=w[C],delete w[C],w[M]=O)}throw new Bt("".concat(o.name,".bulkUpdate(): ").concat(P," of ").concat(x," operations failed"),w)})})})},pe.prototype.bulkDelete=function(t){var o=this,a=t.length;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:t})}).then(function(p){var c=p.numFailures,f=p.lastResult,p=p.failures;if(c===0)return f;throw new Bt("".concat(o.name,".bulkDelete(): ").concat(c," of ").concat(a," operations failed"),p)})},pe);function pe(){}function Or(t){function o(p,m){if(m){for(var b=arguments.length,k=new Array(b-1);--b;)k[b-1]=arguments[b];return a[p].subscribe.apply(null,k),t}if(typeof p=="string")return a[p]}var a={};o.addEventType=f;for(var u=1,c=arguments.length;u<c;++u)f(arguments[u]);return o;function f(p,m,b){if(typeof p!="object"){var k;m=m||th;var x={subscribers:[],fire:b=b||ce,subscribe:function(y){x.subscribers.indexOf(y)===-1&&(x.subscribers.push(y),x.fire=m(x.fire,y))},unsubscribe:function(y){x.subscribers=x.subscribers.filter(function(P){return P!==y}),x.fire=x.subscribers.reduce(m,b)}};return a[p]=o[p]=x}h(k=p).forEach(function(y){var P=k[y];if(d(P))f(y,k[y][0],k[y][1]);else{if(P!=="asap")throw new z.InvalidArgument("Invalid event config");var w=f(y,vr,function(){for(var E=arguments.length,R=new Array(E);E--;)R[E]=arguments[E];w.subscribers.forEach(function(O){he(function(){O.apply(null,R)})})})}})}}function Er(t,o){return B(o).from({prototype:t}),o}function $t(t,o){return!(t.filter||t.algorithm||t.or)&&(o?t.justLimit:!t.replayFilter)}function na(t,o){t.filter=Ot(t.filter,o)}function ta(t,o,a){var u=t.replayFilter;t.replayFilter=u?function(){return Ot(u(),o())}:o,t.justLimit=a&&!u}function Ro(t,o){if(t.isPrimKey)return o.primaryKey;var a=o.getIndexByKeyPath(t.index);if(!a)throw new z.Schema("KeyPath "+t.index+" on object store "+o.name+" is not indexed");return a}function Ku(t,o,a){var u=Ro(t,o.schema);return o.openCursor({trans:a,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:u,range:t.range}})}function Po(t,o,a,u){var c=t.replayFilter?Ot(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},p=function(m,b,k){var x,y;c&&!c(b,k,function(P){return b.stop(P)},function(P){return b.fail(P)})||((y=""+(x=b.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(x)),T(f,y)||(f[y]=!0,o(m,b,k)))};return Promise.all([t.or._iterate(p,a),Au(Ku(t,u,a),t.algorithm,p,!t.keysOnly&&t.valueMapper)])}return Au(Ku(t,u,a),Ot(t.algorithm,c),o,!t.keysOnly&&t.valueMapper)}function Au(t,o,a,u){var c=ye(u?function(f,p,m){return a(u(f),p,m)}:a);return t.then(function(f){if(f)return f.start(function(){var p=function(){return f.continue()};o&&!o(f,function(m){return p=m},function(m){f.stop(m),p=ce},function(m){f.fail(m),p=ce})||c(f.value,f,function(m){return p=m}),p()})})}var xr=(Fu.prototype.execute=function(t){var o=this["@@propmod"];if(o.add!==void 0){var a=o.add;if(d(a))return s(s([],d(t)?t:[],!0),a).sort();if(typeof a=="number")return(Number(t)||0)+a;if(typeof a=="bigint")try{return BigInt(t)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(o.remove!==void 0){var u=o.remove;if(d(u))return d(t)?t.filter(function(c){return!u.includes(c)}).sort():[];if(typeof u=="number")return Number(t)-u;if(typeof u=="bigint")try{return BigInt(t)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return a=(a=o.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof t=="string"&&t.startsWith(a)?o.replacePrefix[1]+t.substring(a.length):t},Fu);function Fu(t){this["@@propmod"]=t}var uh=(se.prototype._read=function(t,o){var a=this._ctx;return a.error?a.table._trans(null,we.bind(null,a.error)):a.table._trans("readonly",t).then(o)},se.prototype._write=function(t){var o=this._ctx;return o.error?o.table._trans(null,we.bind(null,o.error)):o.table._trans("readwrite",t,"locked")},se.prototype._addAlgorithm=function(t){var o=this._ctx;o.algorithm=Ot(o.algorithm,t)},se.prototype._iterate=function(t,o){return Po(this._ctx,t,o,this._ctx.table.core)},se.prototype.clone=function(t){var o=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return t&&g(a,t),o._ctx=a,o},se.prototype.raw=function(){return this._ctx.valueMapper=null,this},se.prototype.each=function(t){var o=this._ctx;return this._read(function(a){return Po(o,t,a,o.table.core)})},se.prototype.count=function(t){var o=this;return this._read(function(a){var u=o._ctx,c=u.table.core;if($t(u,!0))return c.count({trans:a,query:{index:Ro(u,c.schema),range:u.range}}).then(function(p){return Math.min(p,u.limit)});var f=0;return Po(u,function(){return++f,!1},a,c).then(function(){return f})}).then(t)},se.prototype.sortBy=function(t,o){var a=t.split(".").reverse(),u=a[0],c=a.length-1;function f(b,k){return k?f(b[a[k]],k-1):b[u]}var p=this._ctx.dir==="next"?1:-1;function m(b,k){return oe(f(b,c),f(k,c))*p}return this.toArray(function(b){return b.sort(m)}).then(o)},se.prototype.toArray=function(t){var o=this;return this._read(function(a){var u=o._ctx;if(u.dir==="next"&&$t(u,!0)&&0<u.limit){var c=u.valueMapper,f=Ro(u,u.table.core.schema);return u.table.core.query({trans:a,limit:u.limit,values:!0,query:{index:f,range:u.range}}).then(function(m){return m=m.result,c?m.map(c):m})}var p=[];return Po(u,function(m){return p.push(m)},a,u.table.core).then(function(){return p})},t)},se.prototype.offset=function(t){var o=this._ctx;return t<=0||(o.offset+=t,$t(o)?ta(o,function(){var a=t;return function(u,c){return a===0||(a===1?--a:c(function(){u.advance(a),a=0}),!1)}}):ta(o,function(){var a=t;return function(){return--a<0}})),this},se.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ta(this._ctx,function(){var o=t;return function(a,u,c){return--o<=0&&u(c),0<=o}},!0),this},se.prototype.until=function(t,o){return na(this._ctx,function(a,u,c){return!t(a.value)||(u(c),o)}),this},se.prototype.first=function(t){return this.limit(1).toArray(function(o){return o[0]}).then(t)},se.prototype.last=function(t){return this.reverse().first(t)},se.prototype.filter=function(t){var o;return na(this._ctx,function(a){return t(a.value)}),(o=this._ctx).isMatch=Ot(o.isMatch,t),this},se.prototype.and=function(t){return this.filter(t)},se.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},se.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},se.prototype.desc=function(){return this.reverse()},se.prototype.eachKey=function(t){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,u){t(u.key,u)})},se.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},se.prototype.eachPrimaryKey=function(t){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,u){t(u.primaryKey,u)})},se.prototype.keys=function(t){var o=this._ctx;o.keysOnly=!o.isMatch;var a=[];return this.each(function(u,c){a.push(c.key)}).then(function(){return a}).then(t)},se.prototype.primaryKeys=function(t){var o=this._ctx;if(o.dir==="next"&&$t(o,!0)&&0<o.limit)return this._read(function(u){var c=Ro(o,o.table.core.schema);return o.table.core.query({trans:u,values:!1,limit:o.limit,query:{index:c,range:o.range}})}).then(function(u){return u.result}).then(t);o.keysOnly=!o.isMatch;var a=[];return this.each(function(u,c){a.push(c.primaryKey)}).then(function(){return a}).then(t)},se.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},se.prototype.firstKey=function(t){return this.limit(1).keys(function(o){return o[0]}).then(t)},se.prototype.lastKey=function(t){return this.reverse().firstKey(t)},se.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var o={};return na(this._ctx,function(c){var u=c.primaryKey.toString(),c=T(o,u);return o[u]=!0,!c}),this},se.prototype.modify=function(t){var o=this,a=this._ctx;return this._write(function(u){var c,f,p;p=typeof t=="function"?t:(c=h(t),f=c.length,function(O){for(var C=!1,M=0;M<f;++M){var D=c[M],N=t[D],A=ue(O,D);N instanceof xr?(ae(O,D,N.execute(A)),C=!0):A!==N&&(ae(O,D,N),C=!0)}return C});var m=a.table.core,y=m.schema.primaryKey,b=y.outbound,k=y.extractKey,x=200,y=o.db._options.modifyChunkSize;y&&(x=typeof y=="object"?y[m.name]||y["*"]||200:y);function P(O,D){var M=D.failures,D=D.numFailures;E+=O-D;for(var N=0,A=h(M);N<A.length;N++){var L=A[N];w.push(M[L])}}var w=[],E=0,R=[];return o.clone().primaryKeys().then(function(O){function C(D){var N=Math.min(x,O.length-D);return m.getMany({trans:u,keys:O.slice(D,D+N),cache:"immutable"}).then(function(A){for(var L=[],F=[],q=b?[]:null,Y=[],U=0;U<N;++U){var $=A[U],Q={value:xe($),primKey:O[D+U]};p.call(Q,Q.value,Q)!==!1&&(Q.value==null?Y.push(O[D+U]):b||oe(k($),k(Q.value))===0?(F.push(Q.value),b&&q.push(O[D+U])):(Y.push(O[D+U]),L.push(Q.value)))}return Promise.resolve(0<L.length&&m.mutate({trans:u,type:"add",values:L}).then(function(ne){for(var te in ne.failures)Y.splice(parseInt(te),1);P(L.length,ne)})).then(function(){return(0<F.length||M&&typeof t=="object")&&m.mutate({trans:u,type:"put",keys:q,values:F,criteria:M,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<D}).then(function(ne){return P(F.length,ne)})}).then(function(){return(0<Y.length||M&&t===ra)&&m.mutate({trans:u,type:"delete",keys:Y,criteria:M,isAdditionalChunk:0<D}).then(function(ne){return P(Y.length,ne)})}).then(function(){return O.length>D+N&&C(D+x)})})}var M=$t(a)&&a.limit===1/0&&(typeof t!="function"||t===ra)&&{index:a.index,range:a.range};return C(0).then(function(){if(0<w.length)throw new po("Error modifying one or more objects",w,E,R);return O.length})})})},se.prototype.delete=function(){var t=this._ctx,o=t.range;return $t(t)&&(t.isPrimKey||o.type===3)?this._write(function(a){var u=t.table.core.schema.primaryKey,c=o;return t.table.core.count({trans:a,query:{index:u,range:c}}).then(function(f){return t.table.core.mutate({trans:a,type:"deleteRange",range:c}).then(function(p){var m=p.failures;if(p.lastResult,p.results,p=p.numFailures,p)throw new po("Could not delete some values",Object.keys(m).map(function(b){return m[b]}),f-p);return f-p})})}):this.modify(ra)},se);function se(){}var ra=function(t,o){return o.value=null};function ch(t,o){return t<o?-1:t===o?0:1}function lh(t,o){return o<t?-1:t===o?0:1}function Ye(t,o,a){return t=t instanceof Bu?new t.Collection(t):t,t._ctx.error=new(a||TypeError)(o),t}function Wt(t){return new t.Collection(t,function(){return qu("")}).limit(0)}function To(t,o,a,u){var c,f,p,m,b,k,x,y=a.length;if(!a.every(function(E){return typeof E=="string"}))return Ye(t,Iu);function P(E){c=E==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},f=E==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},p=E==="next"?ch:lh;var R=a.map(function(O){return{lower:f(O),upper:c(O)}}).sort(function(O,C){return p(O.lower,C.lower)});m=R.map(function(O){return O.upper}),b=R.map(function(O){return O.lower}),x=(k=E)==="next"?"":u}P("next"),t=new t.Collection(t,function(){return Ln(m[0],b[y-1]+u)}),t._ondirectionchange=function(E){P(E)};var w=0;return t._addAlgorithm(function(E,R,O){var C=E.key;if(typeof C!="string")return!1;var M=f(C);if(o(M,b,w))return!0;for(var D=null,N=w;N<y;++N){var A=function(L,F,q,Y,U,$){for(var Q=Math.min(L.length,Y.length),ne=-1,te=0;te<Q;++te){var Ze=F[te];if(Ze!==Y[te])return U(L[te],q[te])<0?L.substr(0,te)+q[te]+q.substr(te+1):U(L[te],Y[te])<0?L.substr(0,te)+Y[te]+q.substr(te+1):0<=ne?L.substr(0,ne)+F[ne]+q.substr(ne+1):null;U(L[te],Ze)<0&&(ne=te)}return Q<Y.length&&$==="next"?L+q.substr(L.length):Q<L.length&&$==="prev"?L.substr(0,q.length):ne<0?null:L.substr(0,ne)+Y[ne]+q.substr(ne+1)}(C,M,m[N],b[N],p,k);A===null&&D===null?w=N+1:(D===null||0<p(D,A))&&(D=A)}return R(D!==null?function(){E.continue(D+x)}:O),!1}),t}function Ln(t,o,a,u){return{type:2,lower:t,upper:o,lowerOpen:a,upperOpen:u}}function qu(t){return{type:1,lower:t,upper:t}}var Bu=(Object.defineProperty(Ee.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ee.prototype.between=function(t,o,a,u){a=a!==!1,u=u===!0;try{return 0<this._cmp(t,o)||this._cmp(t,o)===0&&(a||u)&&(!a||!u)?Wt(this):new this.Collection(this,function(){return Ln(t,o,!a,!u)})}catch{return Ye(this,En)}},Ee.prototype.equals=function(t){return t==null?Ye(this,En):new this.Collection(this,function(){return qu(t)})},Ee.prototype.above=function(t){return t==null?Ye(this,En):new this.Collection(this,function(){return Ln(t,void 0,!0)})},Ee.prototype.aboveOrEqual=function(t){return t==null?Ye(this,En):new this.Collection(this,function(){return Ln(t,void 0,!1)})},Ee.prototype.below=function(t){return t==null?Ye(this,En):new this.Collection(this,function(){return Ln(void 0,t,!1,!0)})},Ee.prototype.belowOrEqual=function(t){return t==null?Ye(this,En):new this.Collection(this,function(){return Ln(void 0,t)})},Ee.prototype.startsWith=function(t){return typeof t!="string"?Ye(this,Iu):this.between(t,t+kt,!0,!0)},Ee.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):To(this,function(o,a){return o.indexOf(a[0])===0},[t],kt)},Ee.prototype.equalsIgnoreCase=function(t){return To(this,function(o,a){return o===a[0]},[t],"")},Ee.prototype.anyOfIgnoreCase=function(){var t=On.apply(Ft,arguments);return t.length===0?Wt(this):To(this,function(o,a){return a.indexOf(o)!==-1},t,"")},Ee.prototype.startsWithAnyOfIgnoreCase=function(){var t=On.apply(Ft,arguments);return t.length===0?Wt(this):To(this,function(o,a){return a.some(function(u){return o.indexOf(u)===0})},t,kt)},Ee.prototype.anyOf=function(){var t=this,o=On.apply(Ft,arguments),a=this._cmp;try{o.sort(a)}catch{return Ye(this,En)}if(o.length===0)return Wt(this);var u=new this.Collection(this,function(){return Ln(o[0],o[o.length-1])});u._ondirectionchange=function(f){a=f==="next"?t._ascending:t._descending,o.sort(a)};var c=0;return u._addAlgorithm(function(f,p,m){for(var b=f.key;0<a(b,o[c]);)if(++c===o.length)return p(m),!1;return a(b,o[c])===0||(p(function(){f.continue(o[c])}),!1)}),u},Ee.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ee.prototype.noneOf=function(){var t=On.apply(Ft,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ye(this,En)}var o=t.reduce(function(a,u){return a?a.concat([[a[a.length-1][1],u]]):[[-1/0,u]]},null);return o.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},Ee.prototype.inAnyRange=function(C,o){var a=this,u=this._cmp,c=this._ascending,f=this._descending,p=this._min,m=this._max;if(C.length===0)return Wt(this);if(!C.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&c(M[0],M[1])<=0}))return Ye(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var b=!o||o.includeLowers!==!1,k=o&&o.includeUppers===!0,x,y=c;function P(M,D){return y(M[0],D[0])}try{(x=C.reduce(function(M,D){for(var N=0,A=M.length;N<A;++N){var L=M[N];if(u(D[0],L[1])<0&&0<u(D[1],L[0])){L[0]=p(L[0],D[0]),L[1]=m(L[1],D[1]);break}}return N===A&&M.push(D),M},[])).sort(P)}catch{return Ye(this,En)}var w=0,E=k?function(M){return 0<c(M,x[w][1])}:function(M){return 0<=c(M,x[w][1])},R=b?function(M){return 0<f(M,x[w][0])}:function(M){return 0<=f(M,x[w][0])},O=E,C=new this.Collection(this,function(){return Ln(x[0][0],x[x.length-1][1],!b,!k)});return C._ondirectionchange=function(M){y=M==="next"?(O=E,c):(O=R,f),x.sort(P)},C._addAlgorithm(function(M,D,N){for(var A,L=M.key;O(L);)if(++w===x.length)return D(N),!1;return!E(A=L)&&!R(A)||(a._cmp(L,x[w][1])===0||a._cmp(L,x[w][0])===0||D(function(){y===c?M.continue(x[w][0]):M.continue(x[w][1])}),!1)}),C},Ee.prototype.startsWithAnyOf=function(){var t=On.apply(Ft,arguments);return t.every(function(o){return typeof o=="string"})?t.length===0?Wt(this):this.inAnyRange(t.map(function(o){return[o,o+kt]})):Ye(this,"startsWithAnyOf() only works with strings")},Ee);function Ee(){}function hn(t){return ye(function(o){return Rr(o),t(o.target.error),!1})}function Rr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Pr="storagemutated",oa="x-storagemutated-1",Yn=Or(null,Pr),fh=(dn.prototype._lock=function(){return re(!W.global),++this._reculock,this._reculock!==1||W.global||(W.lockOwnerFor=this),this},dn.prototype._unlock=function(){if(re(!W.global),--this._reculock==0)for(W.global||(W.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{_t(t[1],t[0])}catch{}}return this},dn.prototype._locked=function(){return this._reculock&&W.lockOwnerFor!==this},dn.prototype.create=function(t){var o=this;if(!this.mode)return this;var a=this.db.idbdb,u=this.db._state.dbOpenError;if(re(!this.idbtrans),!t&&!a)switch(u&&u.name){case"DatabaseClosedError":throw new z.DatabaseClosed(u);case"MissingAPIError":throw new z.MissingAPI(u.message,u);default:throw new z.OpenFailed(u)}if(!this.active)throw new z.TransactionInactive;return re(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||a).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ye(function(c){Rr(c),o._reject(t.error)}),t.onabort=ye(function(c){Rr(c),o.active&&o._reject(new z.Abort(t.error)),o.active=!1,o.on("abort").fire(c)}),t.oncomplete=ye(function(){o.active=!1,o._resolve(),"mutatedParts"in t&&Yn.storagemutated.fire(t.mutatedParts)}),this},dn.prototype._promise=function(t,o,a){var u=this;if(t==="readwrite"&&this.mode!=="readwrite")return we(new z.ReadOnly("Transaction is readonly"));if(!this.active)return we(new z.TransactionInactive);if(this._locked())return new Z(function(f,p){u._blockedFuncs.push([function(){u._promise(t,o,a).then(f,p)},W])});if(a)return qn(function(){var f=new Z(function(p,m){u._lock();var b=o(p,m,u);b&&b.then&&b.then(p,m)});return f.finally(function(){return u._unlock()}),f._lib=!0,f});var c=new Z(function(f,p){var m=o(f,p,u);m&&m.then&&m.then(f,p)});return c._lib=!0,c},dn.prototype._root=function(){return this.parent?this.parent._root():this},dn.prototype.waitFor=function(t){var o,a=this._root(),u=Z.resolve(t);a._waitingFor?a._waitingFor=a._waitingFor.then(function(){return u}):(a._waitingFor=u,a._waitingQueue=[],o=a.idbtrans.objectStore(a.storeNames[0]),function f(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(o.get(-1/0).onsuccess=f)}());var c=a._waitingFor;return new Z(function(f,p){u.then(function(m){return a._waitingQueue.push(ye(f.bind(null,m)))},function(m){return a._waitingQueue.push(ye(p.bind(null,m)))}).finally(function(){a._waitingFor===c&&(a._waitingFor=null)})})},dn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},dn.prototype.table=function(t){var o=this._memoizedTables||(this._memoizedTables={});if(T(o,t))return o[t];var a=this.schema[t];if(!a)throw new z.NotFound("Table "+t+" not part of transaction");return a=new this.db.Table(t,a,this),a.core=this.db.core.table(t),o[t]=a},dn);function dn(){}function ia(t,o,a,u,c,f,p){return{name:t,keyPath:o,unique:a,multi:u,auto:c,compound:f,src:(a&&!p?"&":"")+(u?"*":"")+(c?"++":"")+Uu(o)}}function Uu(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function aa(t,o,a){return{name:t,primKey:o,indexes:a,mappedClass:null,idxByName:(u=function(c){return[c.name,c]},a.reduce(function(c,f,p){return p=u(f,p),p&&(c[p[0]]=p[1]),c},{}))};var u}var Tr=function(t){try{return t.only([[]]),Tr=function(){return[[]]},[[]]}catch{return Tr=function(){return kt},kt}};function sa(t){return t==null?function(){}:typeof t=="string"?(o=t).split(".").length===1?function(a){return a[o]}:function(a){return ue(a,o)}:function(a){return ue(a,t)};var o}function Lu(t){return[].slice.call(t)}var hh=0;function Cr(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function dh(t,o,b){function u(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=O.lower,E=O.upper,R=O.lowerOpen,O=O.upperOpen;return w===void 0?E===void 0?null:o.upperBound(E,!!O):E===void 0?o.lowerBound(w,!!R):o.bound(w,E,!!R,!!O)}function c(P){var w,E=P.name;return{name:E,schema:P,mutate:function(R){var O=R.trans,C=R.type,M=R.keys,D=R.values,N=R.range;return new Promise(function(A,L){A=ye(A);var F=O.objectStore(E),q=F.keyPath==null,Y=C==="put"||C==="add";if(!Y&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var U,$=(M||D||{length:1}).length;if(M&&D&&M.length!==D.length)throw new Error("Given keys array must have same length as given values array.");if($===0)return A({numFailures:0,failures:{},results:[],lastResult:void 0});function Q(Ne){++Ze,Rr(Ne)}var ne=[],te=[],Ze=0;if(C==="deleteRange"){if(N.type===4)return A({numFailures:Ze,failures:te,results:[],lastResult:void 0});N.type===3?ne.push(U=F.clear()):ne.push(U=F.delete(u(N)))}else{var q=Y?q?[D,M]:[D,null]:[M,null],J=q[0],Ce=q[1];if(Y)for(var Ie=0;Ie<$;++Ie)ne.push(U=Ce&&Ce[Ie]!==void 0?F[C](J[Ie],Ce[Ie]):F[C](J[Ie])),U.onerror=Q;else for(Ie=0;Ie<$;++Ie)ne.push(U=F[C](J[Ie])),U.onerror=Q}function Uo(Ne){Ne=Ne.target.result,ne.forEach(function(Rt,xa){return Rt.error!=null&&(te[xa]=Rt.error)}),A({numFailures:Ze,failures:te,results:C==="delete"?M:ne.map(function(Rt){return Rt.result}),lastResult:Ne})}U.onerror=function(Ne){Q(Ne),Uo(Ne)},U.onsuccess=Uo})},getMany:function(R){var O=R.trans,C=R.keys;return new Promise(function(M,D){M=ye(M);for(var N,A=O.objectStore(E),L=C.length,F=new Array(L),q=0,Y=0,U=function(ne){ne=ne.target,F[ne._pos]=ne.result,++Y===q&&M(F)},$=hn(D),Q=0;Q<L;++Q)C[Q]!=null&&((N=A.get(C[Q]))._pos=Q,N.onsuccess=U,N.onerror=$,++q);q===0&&M(F)})},get:function(R){var O=R.trans,C=R.key;return new Promise(function(M,D){M=ye(M);var N=O.objectStore(E).get(C);N.onsuccess=function(A){return M(A.target.result)},N.onerror=hn(D)})},query:(w=k,function(R){return new Promise(function(O,C){O=ye(O);var M,D,N,q=R.trans,A=R.values,L=R.limit,U=R.query,F=L===1/0?void 0:L,Y=U.index,U=U.range,q=q.objectStore(E),Y=Y.isPrimaryKey?q:q.index(Y.name),U=u(U);if(L===0)return O({result:[]});w?((F=A?Y.getAll(U,F):Y.getAllKeys(U,F)).onsuccess=function($){return O({result:$.target.result})},F.onerror=hn(C)):(M=0,D=!A&&"openKeyCursor"in Y?Y.openKeyCursor(U):Y.openCursor(U),N=[],D.onsuccess=function($){var Q=D.result;return Q?(N.push(A?Q.value:Q.primaryKey),++M===L?O({result:N}):void Q.continue()):O({result:N})},D.onerror=hn(C))})}),openCursor:function(R){var O=R.trans,C=R.values,M=R.query,D=R.reverse,N=R.unique;return new Promise(function(A,L){A=ye(A);var Y=M.index,F=M.range,q=O.objectStore(E),q=Y.isPrimaryKey?q:q.index(Y.name),Y=D?N?"prevunique":"prev":N?"nextunique":"next",U=!C&&"openKeyCursor"in q?q.openKeyCursor(u(F),Y):q.openCursor(u(F),Y);U.onerror=hn(L),U.onsuccess=ye(function($){var Q,ne,te,Ze,J=U.result;J?(J.___id=++hh,J.done=!1,Q=J.continue.bind(J),ne=(ne=J.continuePrimaryKey)&&ne.bind(J),te=J.advance.bind(J),Ze=function(){throw new Error("Cursor not stopped")},J.trans=O,J.stop=J.continue=J.continuePrimaryKey=J.advance=function(){throw new Error("Cursor not started")},J.fail=ye(L),J.next=function(){var Ce=this,Ie=1;return this.start(function(){return Ie--?Ce.continue():Ce.stop()}).then(function(){return Ce})},J.start=function(Ce){function Ie(){if(U.result)try{Ce()}catch(Ne){J.fail(Ne)}else J.done=!0,J.start=function(){throw new Error("Cursor behind last entry")},J.stop()}var Uo=new Promise(function(Ne,Rt){Ne=ye(Ne),U.onerror=hn(Rt),J.fail=Rt,J.stop=function(xa){J.stop=J.continue=J.continuePrimaryKey=J.advance=Ze,Ne(xa)}});return U.onsuccess=ye(function(Ne){U.onsuccess=Ie,Ie()}),J.continue=Q,J.continuePrimaryKey=ne,J.advance=te,Ie(),Uo},A(J)):A(null)},L)})},count:function(R){var O=R.query,C=R.trans,M=O.index,D=O.range;return new Promise(function(N,A){var L=C.objectStore(E),F=M.isPrimaryKey?L:L.index(M.name),L=u(D),F=L?F.count(L):F.count();F.onsuccess=ye(function(q){return N(q.target.result)}),F.onerror=hn(A)})}}}var f,p,m,x=(p=b,m=Lu((f=t).objectStoreNames),{schema:{name:f.name,tables:m.map(function(P){return p.objectStore(P)}).map(function(P){var w=P.keyPath,O=P.autoIncrement,E=d(w),R={},O={name:P.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:E,keyPath:w,autoIncrement:O,unique:!0,extractKey:sa(w)},indexes:Lu(P.indexNames).map(function(C){return P.index(C)}).map(function(N){var M=N.name,D=N.unique,A=N.multiEntry,N=N.keyPath,A={name:M,compound:d(N),keyPath:N,unique:D,multiEntry:A,extractKey:sa(N)};return R[Cr(N)]=A}),getIndexByKeyPath:function(C){return R[Cr(C)]}};return R[":id"]=O.primaryKey,w!=null&&(R[Cr(w)]=O.primaryKey),O})},hasGetAll:0<m.length&&"getAll"in p.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),b=x.schema,k=x.hasGetAll,x=b.tables.map(c),y={};return x.forEach(function(P){return y[P.name]=P}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(P){if(!y[P])throw new Error("Table '".concat(P,"' not found"));return y[P]},MIN_KEY:-1/0,MAX_KEY:Tr(o),schema:b}}function ph(t,o,a,u){var c=a.IDBKeyRange;return a.indexedDB,{dbcore:(u=dh(o,c,u),t.dbcore.reduce(function(f,p){return p=p.create,i(i({},f),p(f))},u))}}function Co(t,u){var a=u.db,u=ph(t._middlewares,a,t._deps,u);t.core=u.dbcore,t.tables.forEach(function(c){var f=c.name;t.core.schema.tables.some(function(p){return p.name===f})&&(c.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=c.core))})}function Io(t,o,a,u){a.forEach(function(c){var f=u[c];o.forEach(function(p){var m=function b(k,x){return V(k,x)||(k=v(k))&&b(k,x)}(p,c);(!m||"value"in m&&m.value===void 0)&&(p===t.Transaction.prototype||p instanceof t.Transaction?K(p,c,{get:function(){return this.table(c)},set:function(b){j(this,c,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):p[c]=new t.Table(c,f))})})}function ua(t,o){o.forEach(function(a){for(var u in a)a[u]instanceof t.Table&&delete a[u]})}function mh(t,o){return t._cfg.version-o._cfg.version}function yh(t,o,a,u){var c=t._dbSchema;a.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=aa("$meta",Zu("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,c);f.create(a),f._completion.catch(u);var p=f._reject.bind(f),m=W.transless||W;qn(function(){return W.trans=f,W.transless=m,o!==0?(Co(t,a),k=o,((b=f).storeNames.includes("$meta")?b.table("$meta").get("version").then(function(x){return x??k}):Z.resolve(k)).then(function(x){return P=x,w=f,E=a,R=[],x=(y=t)._versions,O=y._dbSchema=Do(0,y.idbdb,E),(x=x.filter(function(C){return C._cfg.version>=P})).length!==0?(x.forEach(function(C){R.push(function(){var M=O,D=C._cfg.dbschema;So(y,M,E),So(y,D,E),O=y._dbSchema=D;var N=ca(M,D);N.add.forEach(function(Y){la(E,Y[0],Y[1].primKey,Y[1].indexes)}),N.change.forEach(function(Y){if(Y.recreate)throw new z.Upgrade("Not yet support for changing primary key");var U=E.objectStore(Y.name);Y.add.forEach(function($){return Mo(U,$)}),Y.change.forEach(function($){U.deleteIndex($.name),Mo(U,$)}),Y.del.forEach(function($){return U.deleteIndex($)})});var A=C._cfg.contentUpgrade;if(A&&C._cfg.version>P){Co(y,E),w._memoizedTables={};var L=ve(D);N.del.forEach(function(Y){L[Y]=M[Y]}),ua(y,[y.Transaction.prototype]),Io(y,[y.Transaction.prototype],h(L),L),w.schema=L;var F,q=Li(A);return q&&Yt(),N=Z.follow(function(){var Y;(F=A(w))&&q&&(Y=Bn.bind(null,null),F.then(Y,Y))}),F&&typeof F.then=="function"?Z.resolve(F):N.then(function(){return F})}}),R.push(function(M){var D,N,A=C._cfg.dbschema;D=A,N=M,[].slice.call(N.db.objectStoreNames).forEach(function(L){return D[L]==null&&N.db.deleteObjectStore(L)}),ua(y,[y.Transaction.prototype]),Io(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),w.schema=y._dbSchema}),R.push(function(M){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===C._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(D){return D!=="$meta"})):M.objectStore("$meta").put(C._cfg.version,"version"))})}),function C(){return R.length?Z.resolve(R.shift()(w.idbtrans)).then(C):Z.resolve()}().then(function(){Yu(O,E)})):Z.resolve();var y,P,w,E,R,O}).catch(p)):(h(c).forEach(function(x){la(a,x,c[x].primKey,c[x].indexes)}),Co(t,a),void Z.follow(function(){return t.on.populate.fire(f)}).catch(p));var b,k})}function gh(t,o){Yu(t._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var a=Do(0,t.idbdb,o);So(t,t._dbSchema,o);for(var u=0,c=ca(a,t._dbSchema).change;u<c.length;u++){var f=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=o.objectStore(p.name);p.add.forEach(function(b){fn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(b.src)),Mo(m,b)})}(c[u]);if(typeof f=="object")return f.value}}function ca(t,o){var a,u={del:[],add:[],change:[]};for(a in t)o[a]||u.del.push(a);for(a in o){var c=t[a],f=o[a];if(c){var p={name:a,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||c.primKey.auto!==f.primKey.auto)p.recreate=!0,u.change.push(p);else{var m=c.idxByName,b=f.idxByName,k=void 0;for(k in m)b[k]||p.del.push(k);for(k in b){var x=m[k],y=b[k];x?x.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&u.change.push(p)}}else u.add.push([a,f])}return u}function la(t,o,a,u){var c=t.db.createObjectStore(o,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return u.forEach(function(f){return Mo(c,f)}),c}function Yu(t,o){h(t).forEach(function(a){o.db.objectStoreNames.contains(a)||(fn&&console.debug("Dexie: Creating missing table",a),la(o,a,t[a].primKey,t[a].indexes))})}function Mo(t,o){t.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function Do(t,o,a){var u={};return H(o.objectStoreNames,0).forEach(function(c){for(var f=a.objectStore(c),p=ia(Uu(k=f.keyPath),k||"",!0,!1,!!f.autoIncrement,k&&typeof k!="string",!0),m=[],b=0;b<f.indexNames.length;++b){var x=f.index(f.indexNames[b]),k=x.keyPath,x=ia(x.name,k,!!x.unique,!!x.multiEntry,!1,k&&typeof k!="string",!1);m.push(x)}u[c]=aa(c,p,m)}),u}function So(t,o,a){for(var u=a.db.objectStoreNames,c=0;c<u.length;++c){var f=u[c],p=a.objectStore(f);t._hasGetAll="getAll"in p;for(var m=0;m<p.indexNames.length;++m){var b=p.indexNames[m],k=p.index(b).keyPath,x=typeof k=="string"?k:"["+H(k).join("+")+"]";!o[f]||(k=o[f].idxByName[x])&&(k.name=b,delete o[f].idxByName[x],o[f].idxByName[b]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Zu(t){return t.split(",").map(function(o,a){var u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return ia(u,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),d(c),a===0)})}var vh=(No.prototype._parseStoresSpec=function(t,o){h(t).forEach(function(a){if(t[a]!==null){var u=Zu(t[a]),c=u.shift();if(c.unique=!0,c.multi)throw new z.Schema("Primary key cannot be multi-valued");u.forEach(function(f){if(f.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")}),o[a]=aa(a,c,u)}})},No.prototype.stores=function(a){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a;var a=o._versions,u={},c={};return a.forEach(function(f){g(u,f._cfg.storesSource),c=f._cfg.dbschema={},f._parseStoresSpec(u,c)}),o._dbSchema=c,ua(o,[o._allTables,o,o.Transaction.prototype]),Io(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],h(c),c),o._storeNames=h(c),this},No.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Zi(this._cfg.contentUpgrade||ce,t),this},No);function No(){}function fa(t,o){var a=t._dbNamesDB;return a||(a=t._dbNamesDB=new xn(Eo,{addons:[],indexedDB:t,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),a.table("dbnames")}function ha(t){return t&&typeof t.databases=="function"}function da(t){return qn(function(){return W.letThrough=!0,t()})}function pa(t){return!("from"in t)}var Te=function(t,o){if(!this){var a=new Te;return t&&"d"in t&&g(a,t),a}g(this,arguments.length?{d:1,from:t,to:1<arguments.length?o:t}:{d:0})};function Ir(t,o,a){var u=oe(o,a);if(!isNaN(u)){if(0<u)throw RangeError();if(pa(t))return g(t,{from:o,to:a,d:1});var c=t.l,u=t.r;if(oe(a,t.from)<0)return c?Ir(c,o,a):t.l={from:o,to:a,d:1,l:null,r:null},Wu(t);if(0<oe(o,t.to))return u?Ir(u,o,a):t.r={from:o,to:a,d:1,l:null,r:null},Wu(t);oe(o,t.from)<0&&(t.from=o,t.l=null,t.d=u?u.d+1:1),0<oe(a,t.to)&&(t.to=a,t.r=null,t.d=t.l?t.l.d+1:1),a=!t.r,c&&!t.l&&Mr(t,c),u&&a&&Mr(t,u)}}function Mr(t,o){pa(o)||function a(u,b){var f=b.from,p=b.to,m=b.l,b=b.r;Ir(u,f,p),m&&a(u,m),b&&a(u,b)}(t,o)}function $u(t,o){var a=jo(o),u=a.next();if(u.done)return!1;for(var c=u.value,f=jo(t),p=f.next(c.from),m=p.value;!u.done&&!p.done;){if(oe(m.from,c.to)<=0&&0<=oe(m.to,c.from))return!0;oe(c.from,m.from)<0?c=(u=a.next(m.from)).value:m=(p=f.next(c.from)).value}return!1}function jo(t){var o=pa(t)?null:{s:0,n:t};return{next:function(a){for(var u=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,u)for(;o.n.l&&oe(a,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!u||oe(a,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Wu(t){var o,a,u=(((o=t.r)===null||o===void 0?void 0:o.d)||0)-(((a=t.l)===null||a===void 0?void 0:a.d)||0),c=1<u?"r":u<-1?"l":"";c&&(o=c=="r"?"l":"r",a=i({},t),u=t[c],t.from=u.from,t.to=u.to,t[c]=u[c],a[c]=u[o],(t[o]=a).d=Vu(a)),t.d=Vu(t)}function Vu(a){var o=a.r,a=a.l;return(o?a?Math.max(o.d,a.d):o.d:a?a.d:0)+1}function Ko(t,o){return h(o).forEach(function(a){t[a]?Mr(t[a],o[a]):t[a]=function u(c){var f,p,m={};for(f in c)T(c,f)&&(p=c[f],m[f]=!p||typeof p!="object"||tn.has(p.constructor)?p:u(p));return m}(o[a])}),t}function ma(t,o){return t.all||o.all||Object.keys(t).some(function(a){return o[a]&&$u(o[a],t[a])})}S(Te.prototype,((Ge={add:function(t){return Mr(this,t),this},addKey:function(t){return Ir(this,t,t),this},addKeys:function(t){var o=this;return t.forEach(function(a){return Ir(o,a,a)}),this},hasKey:function(t){var o=jo(this).next(t).value;return o&&oe(o.from,t)<=0&&0<=oe(o.to,t)}})[Ui]=function(){return jo(this)},Ge));var Et={},ya={},ga=!1;function Ao(t){Ko(ya,t),ga||(ga=!0,setTimeout(function(){ga=!1,va(ya,!(ya={}))},0))}function va(t,o){o===void 0&&(o=!1);var a=new Set;if(t.all)for(var u=0,c=Object.values(Et);u<c.length;u++)zu(p=c[u],t,a,o);else for(var f in t){var p,m=/^idb\:\/\/(.*)\/(.*)\//.exec(f);m&&(f=m[1],m=m[2],(p=Et["idb://".concat(f,"/").concat(m)])&&zu(p,t,a,o))}a.forEach(function(b){return b()})}function zu(t,o,a,u){for(var c=[],f=0,p=Object.entries(t.queries.query);f<p.length;f++){for(var m=p[f],b=m[0],k=[],x=0,y=m[1];x<y.length;x++){var P=y[x];ma(o,P.obsSet)?P.subscribers.forEach(function(O){return a.add(O)}):u&&k.push(P)}u&&c.push([b,k])}if(u)for(var w=0,E=c;w<E.length;w++){var R=E[w],b=R[0],k=R[1];t.queries.query[b]=k}}function bh(t){var o=t._state,a=t._deps.indexedDB;if(o.isBeingOpened||t.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?we(o.dbOpenError):t});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var u=o.openCanceller,c=Math.round(10*t.verno),f=!1;function p(){if(o.openCanceller!==u)throw new z.DatabaseClosed("db.open() was cancelled")}function m(){return new Z(function(P,w){if(p(),!a)throw new z.MissingAPI;var E=t.name,R=o.autoSchema||!c?a.open(E):a.open(E,c);if(!R)throw new z.MissingAPI;R.onerror=hn(w),R.onblocked=ye(t._fireOnBlocked),R.onupgradeneeded=ye(function(O){var C;x=R.transaction,o.autoSchema&&!t._options.allowEmptyDB?(R.onerror=Rr,x.abort(),R.result.close(),(C=a.deleteDatabase(E)).onsuccess=C.onerror=ye(function(){w(new z.NoSuchDatabase("Database ".concat(E," doesnt exist")))})):(x.onerror=hn(w),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,y=O<1,t.idbdb=R.result,f&&gh(t,x),yh(t,O/10,x,w))},w),R.onsuccess=ye(function(){x=null;var O,C,M,D,N,A=t.idbdb=R.result,L=H(A.objectStoreNames);if(0<L.length)try{var F=A.transaction((D=L).length===1?D[0]:D,"readonly");if(o.autoSchema)C=A,M=F,(O=t).verno=C.version/10,M=O._dbSchema=Do(0,C,M),O._storeNames=H(C.objectStoreNames,0),Io(O,[O._allTables],h(M),M);else if(So(t,t._dbSchema,F),((N=ca(Do(0,(N=t).idbdb,F),N._dbSchema)).add.length||N.change.some(function(q){return q.add.length||q.change.length}))&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),A.close(),c=A.version+1,f=!0,P(m());Co(t,F)}catch{}Zt.push(t),A.onversionchange=ye(function(q){o.vcFired=!0,t.on("versionchange").fire(q)}),A.onclose=ye(function(q){t.on("close").fire(q)}),y&&(N=t._deps,F=E,A=N.indexedDB,N=N.IDBKeyRange,ha(A)||F===Eo||fa(A,N).put({name:F}).catch(ce)),P()},w)}).catch(function(P){switch(P==null?void 0:P.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<c)return c=0,m()}return Z.reject(P)})}var b,k=o.dbReadyResolve,x=null,y=!1;return Z.race([u,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function w(){return indexedDB.databases().finally(P)}b=setInterval(w,100),w()}).finally(function(){return clearInterval(b)}):Promise.resolve()).then(m)]).then(function(){return p(),o.onReadyBeingFired=[],Z.resolve(da(function(){return t.on.ready.fire(t.vip)})).then(function P(){if(0<o.onReadyBeingFired.length){var w=o.onReadyBeingFired.reduce(Zi,ce);return o.onReadyBeingFired=[],Z.resolve(da(function(){return w(t.vip)})).then(P)}})}).finally(function(){o.openCanceller===u&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(P){o.dbOpenError=P;try{x&&x.abort()}catch{}return u===o.openCanceller&&t._close(),we(P)}).finally(function(){o.openComplete=!0,k()}).then(function(){var P;return y&&(P={},t.tables.forEach(function(w){w.schema.indexes.forEach(function(E){E.name&&(P["idb://".concat(t.name,"/").concat(w.name,"/").concat(E.name)]=new Te(-1/0,[[[]]]))}),P["idb://".concat(t.name,"/").concat(w.name,"/")]=P["idb://".concat(t.name,"/").concat(w.name,"/:dels")]=new Te(-1/0,[[[]]])}),Yn(Pr).fire(P),va(P,!0)),t})}function ba(t){function o(f){return t.next(f)}var a=c(o),u=c(function(f){return t.throw(f)});function c(f){return function(b){var m=f(b),b=m.value;return m.done?b:b&&typeof b.then=="function"?b.then(a,u):d(b)?Promise.all(b).then(a,u):a(b)}}return c(o)()}function Fo(t,o,a){for(var u=d(t)?t.slice():[t],c=0;c<a;++c)u.push(o);return u}var wh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return i(i({},t),{table:function(o){var a=t.table(o),u=a.schema,c={},f=[];function p(y,P,w){var E=Cr(y),R=c[E]=c[E]||[],O=y==null?0:typeof y=="string"?1:y.length,C=0<P,C=i(i({},w),{name:C?"".concat(E,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:C,keyTail:P,keyLength:O,extractKey:sa(y),unique:!C&&w.unique});return R.push(C),C.isPrimaryKey||f.push(C),1<O&&p(O===2?y[0]:y.slice(0,O-1),P+1,w),R.sort(function(M,D){return M.keyTail-D.keyTail}),C}o=p(u.primaryKey.keyPath,0,u.primaryKey),c[":id"]=[o];for(var m=0,b=u.indexes;m<b.length;m++){var k=b[m];p(k.keyPath,0,k)}function x(y){var P,w=y.query.index;return w.isVirtual?i(i({},y),{query:{index:w.lowLevelIndex,range:(P=y.query.range,w=w.keyTail,{type:P.type===1?2:P.type,lower:Fo(P.lower,P.lowerOpen?t.MAX_KEY:t.MIN_KEY,w),lowerOpen:!0,upper:Fo(P.upper,P.upperOpen?t.MIN_KEY:t.MAX_KEY,w),upperOpen:!0})}}):y}return i(i({},a),{schema:i(i({},u),{primaryKey:o,indexes:f,getIndexByKeyPath:function(y){return(y=c[Cr(y)])&&y[0]}}),count:function(y){return a.count(x(y))},query:function(y){return a.query(x(y))},openCursor:function(y){var P=y.query.index,w=P.keyTail,E=P.isVirtual,R=P.keyLength;return E?a.openCursor(x(y)).then(function(C){return C&&O(C)}):a.openCursor(y);function O(C){return Object.create(C,{continue:{value:function(M){M!=null?C.continue(Fo(M,y.reverse?t.MAX_KEY:t.MIN_KEY,w)):y.unique?C.continue(C.key.slice(0,R).concat(y.reverse?t.MIN_KEY:t.MAX_KEY,w)):C.continue()}},continuePrimaryKey:{value:function(M,D){C.continuePrimaryKey(Fo(M,t.MAX_KEY,w),D)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var M=C.key;return R===1?M[0]:M.slice(0,R)}},value:{get:function(){return C.value}}})}}})}})}};function wa(t,o,a,u){return a=a||{},u=u||"",h(t).forEach(function(c){var f,p,m;T(o,c)?(f=t[c],p=o[c],typeof f=="object"&&typeof p=="object"&&f&&p?(m=Bi(f))!==Bi(p)?a[u+c]=o[c]:m==="Object"?wa(f,p,a,u+c+"."):f!==p&&(a[u+c]=o[c]):f!==p&&(a[u+c]=o[c])):a[u+c]=void 0}),h(o).forEach(function(c){T(t,c)||(a[u+c]=o[c])}),a}function _a(t,o){return o.type==="delete"?o.keys:o.keys||o.values.map(t.extractKey)}var _h={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return i(i({},t),{table:function(o){var a=t.table(o),u=a.schema.primaryKey;return i(i({},a),{mutate:function(c){var f=W.trans,p=f.table(o).hook,m=p.deleting,b=p.creating,k=p.updating;switch(c.type){case"add":if(b.fire===ce)break;return f._promise("readwrite",function(){return x(c)},!0);case"put":if(b.fire===ce&&k.fire===ce)break;return f._promise("readwrite",function(){return x(c)},!0);case"delete":if(m.fire===ce)break;return f._promise("readwrite",function(){return x(c)},!0);case"deleteRange":if(m.fire===ce)break;return f._promise("readwrite",function(){return function y(P,w,E){return a.query({trans:P,values:!1,query:{index:u,range:w},limit:E}).then(function(R){var O=R.result;return x({type:"delete",keys:O,trans:P}).then(function(C){return 0<C.numFailures?Promise.reject(C.failures[0]):O.length<E?{failures:[],numFailures:0,lastResult:void 0}:y(P,i(i({},w),{lower:O[O.length-1],lowerOpen:!0}),E)})})}(c.trans,c.range,1e4)},!0)}return a.mutate(c);function x(y){var P,w,E,R=W.trans,O=y.keys||_a(u,y);if(!O)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?i(i({},y),{keys:O}):i({},y)).type!=="delete"&&(y.values=s([],y.values)),y.keys&&(y.keys=s([],y.keys)),P=a,E=O,((w=y).type==="add"?Promise.resolve([]):P.getMany({trans:w.trans,keys:E,cache:"immutable"})).then(function(C){var M=O.map(function(D,N){var A,L,F,q=C[N],Y={onerror:null,onsuccess:null};return y.type==="delete"?m.fire.call(Y,D,q,R):y.type==="add"||q===void 0?(A=b.fire.call(Y,D,y.values[N],R),D==null&&A!=null&&(y.keys[N]=D=A,u.outbound||ae(y.values[N],u.keyPath,D))):(A=wa(q,y.values[N]),(L=k.fire.call(Y,A,D,q,R))&&(F=y.values[N],Object.keys(L).forEach(function(U){T(F,U)?F[U]=L[U]:ae(F,U,L[U])}))),Y});return a.mutate(y).then(function(D){for(var N=D.failures,A=D.results,L=D.numFailures,D=D.lastResult,F=0;F<O.length;++F){var q=(A||O)[F],Y=M[F];q==null?Y.onerror&&Y.onerror(N[F]):Y.onsuccess&&Y.onsuccess(y.type==="put"&&C[F]?y.values[F]:q)}return{failures:N,results:A,numFailures:L,lastResult:D}}).catch(function(D){return M.forEach(function(N){return N.onerror&&N.onerror(D)}),Promise.reject(D)})})}}})}})}};function Hu(t,o,a){try{if(!o||o.keys.length<t.length)return null;for(var u=[],c=0,f=0;c<o.keys.length&&f<t.length;++c)oe(o.keys[c],t[f])===0&&(u.push(a?xe(o.values[c]):o.values[c]),++f);return u.length===t.length?u:null}catch{return null}}var kh={stack:"dbcore",level:-1,create:function(t){return{table:function(o){var a=t.table(o);return i(i({},a),{getMany:function(u){if(!u.cache)return a.getMany(u);var c=Hu(u.keys,u.trans._cache,u.cache==="clone");return c?Z.resolve(c):a.getMany(u).then(function(f){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?xe(f):f},f})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),a.mutate(u)}})}}}};function Gu(t,o){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Ju(t,o){switch(t){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Oh={stack:"dbcore",level:0,name:"Observability",create:function(t){var o=t.schema.name,a=new Te(t.MIN_KEY,t.MAX_KEY);return i(i({},t),{transaction:function(u,c,f){if(W.subscr&&c!=="readonly")throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(W.querier));return t.transaction(u,c,f)},table:function(u){var c=t.table(u),f=c.schema,p=f.primaryKey,y=f.indexes,m=p.extractKey,b=p.outbound,k=p.autoIncrement&&y.filter(function(w){return w.compound&&w.keyPath.includes(p.keyPath)}),x=i(i({},c),{mutate:function(w){function E(U){return U="idb://".concat(o,"/").concat(u,"/").concat(U),D[U]||(D[U]=new Te)}var R,O,C,M=w.trans,D=w.mutatedParts||(w.mutatedParts={}),N=E(""),A=E(":dels"),L=w.type,Y=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[_a(p,w).filter(function(U){return U}),w.values]:[],F=Y[0],q=Y[1],Y=w.trans._cache;return d(F)?(N.addKeys(F),(Y=L==="delete"||F.length===q.length?Hu(F,Y):null)||A.addKeys(F),(Y||q)&&(R=E,O=Y,C=q,f.indexes.forEach(function(U){var $=R(U.name||"");function Q(te){return te!=null?U.extractKey(te):null}function ne(te){return U.multiEntry&&d(te)?te.forEach(function(Ze){return $.addKey(Ze)}):$.addKey(te)}(O||C).forEach(function(te,Ce){var J=O&&Q(O[Ce]),Ce=C&&Q(C[Ce]);oe(J,Ce)!==0&&(J!=null&&ne(J),Ce!=null&&ne(Ce))})}))):F?(q={from:(q=F.lower)!==null&&q!==void 0?q:t.MIN_KEY,to:(q=F.upper)!==null&&q!==void 0?q:t.MAX_KEY},A.add(q),N.add(q)):(N.add(a),A.add(a),f.indexes.forEach(function(U){return E(U.name).add(a)})),c.mutate(w).then(function(U){return!F||w.type!=="add"&&w.type!=="put"||(N.addKeys(U.results),k&&k.forEach(function($){for(var Q=w.values.map(function(J){return $.extractKey(J)}),ne=$.keyPath.findIndex(function(J){return J===p.keyPath}),te=0,Ze=U.results.length;te<Ze;++te)Q[te][ne]=U.results[te];E($.name).addKeys(Q)})),M.mutatedParts=Ko(M.mutatedParts||{},D),U})}}),y=function(E){var R=E.query,E=R.index,R=R.range;return[E,new Te((E=R.lower)!==null&&E!==void 0?E:t.MIN_KEY,(R=R.upper)!==null&&R!==void 0?R:t.MAX_KEY)]},P={get:function(w){return[p,new Te(w.key)]},getMany:function(w){return[p,new Te().addKeys(w.keys)]},count:y,query:y,openCursor:y};return h(P).forEach(function(w){x[w]=function(E){var R=W.subscr,O=!!R,C=Gu(W,c)&&Ju(w,E)?E.obsSet={}:R;if(O){var M=function(q){return q="idb://".concat(o,"/").concat(u,"/").concat(q),C[q]||(C[q]=new Te)},D=M(""),N=M(":dels"),R=P[w](E),O=R[0],R=R[1];if((w==="query"&&O.isPrimaryKey&&!E.values?N:M(O.name||"")).add(R),!O.isPrimaryKey){if(w!=="count"){var A=w==="query"&&b&&E.values&&c.query(i(i({},E),{values:!1}));return c[w].apply(this,arguments).then(function(q){if(w==="query"){if(b&&E.values)return A.then(function(Q){return Q=Q.result,D.addKeys(Q),q});var Y=E.values?q.result.map(m):q.result;(E.values?D:N).addKeys(Y)}else if(w==="openCursor"){var U=q,$=E.values;return U&&Object.create(U,{key:{get:function(){return N.addKey(U.primaryKey),U.key}},primaryKey:{get:function(){var Q=U.primaryKey;return N.addKey(Q),Q}},value:{get:function(){return $&&D.addKey(U.primaryKey),U.value}}})}return q})}N.add(a)}}return c[w].apply(this,arguments)}}),x}})}};function Qu(t,o,a){if(a.numFailures===0)return o;if(o.type==="deleteRange")return null;var u=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return a.numFailures===u?null:(o=i({},o),d(o.keys)&&(o.keys=o.keys.filter(function(c,f){return!(f in a.failures)})),"values"in o&&d(o.values)&&(o.values=o.values.filter(function(c,f){return!(f in a.failures)})),o)}function ka(t,o){return a=t,((u=o).lower===void 0||(u.lowerOpen?0<oe(a,u.lower):0<=oe(a,u.lower)))&&(t=t,(o=o).upper===void 0||(o.upperOpen?oe(t,o.upper)<0:oe(t,o.upper)<=0));var a,u}function Xu(t,o,P,u,c,f){if(!P||P.length===0)return t;var p=o.query.index,m=p.multiEntry,b=o.query.range,k=u.schema.primaryKey.extractKey,x=p.extractKey,y=(p.lowLevelIndex||p).extractKey,P=P.reduce(function(w,E){var R=w,O=[];if(E.type==="add"||E.type==="put")for(var C=new Te,M=E.values.length-1;0<=M;--M){var D,N=E.values[M],A=k(N);C.hasKey(A)||(D=x(N),(m&&d(D)?D.some(function(U){return ka(U,b)}):ka(D,b))&&(C.addKey(A),O.push(N)))}switch(E.type){case"add":var L=new Te().addKeys(o.values?w.map(function($){return k($)}):w),R=w.concat(o.values?O.filter(function($){return $=k($),!L.hasKey($)&&(L.addKey($),!0)}):O.map(function($){return k($)}).filter(function($){return!L.hasKey($)&&(L.addKey($),!0)}));break;case"put":var F=new Te().addKeys(E.values.map(function($){return k($)}));R=w.filter(function($){return!F.hasKey(o.values?k($):$)}).concat(o.values?O:O.map(function($){return k($)}));break;case"delete":var q=new Te().addKeys(E.keys);R=w.filter(function($){return!q.hasKey(o.values?k($):$)});break;case"deleteRange":var Y=E.range;R=w.filter(function($){return!ka(k($),Y)})}return R},t);return P===t?t:(P.sort(function(w,E){return oe(y(w),y(E))||oe(k(w),k(E))}),o.limit&&o.limit<1/0&&(P.length>o.limit?P.length=o.limit:t.length===o.limit&&P.length<o.limit&&(c.dirty=!0)),f?Object.freeze(P):P)}function ec(t,o){return oe(t.lower,o.lower)===0&&oe(t.upper,o.upper)===0&&!!t.lowerOpen==!!o.lowerOpen&&!!t.upperOpen==!!o.upperOpen}function Eh(t,o){return function(a,u,c,f){if(a===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=oe(a,u))===0){if(c&&f)return 0;if(c)return 1;if(f)return-1}return u}(t.lower,o.lower,t.lowerOpen,o.lowerOpen)<=0&&0<=function(a,u,c,f){if(a===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=oe(a,u))===0){if(c&&f)return 0;if(c)return-1;if(f)return 1}return u}(t.upper,o.upper,t.upperOpen,o.upperOpen)}function xh(t,o,a,u){t.subscribers.add(a),u.addEventListener("abort",function(){var c,f;t.subscribers.delete(a),t.subscribers.size===0&&(c=t,f=o,setTimeout(function(){c.subscribers.size===0&&mt(f,c)},3e3))})}var Rh={stack:"dbcore",level:0,name:"Cache",create:function(t){var o=t.schema.name;return i(i({},t),{transaction:function(a,u,c){var f,p,m=t.transaction(a,u,c);return u==="readwrite"&&(p=(f=new AbortController).signal,c=function(b){return function(){if(f.abort(),u==="readwrite"){for(var k=new Set,x=0,y=a;x<y.length;x++){var P=y[x],w=Et["idb://".concat(o,"/").concat(P)];if(w){var E=t.table(P),R=w.optimisticOps.filter(function($){return $.trans===m});if(m._explicit&&b&&m.mutatedParts)for(var O=0,C=Object.values(w.queries.query);O<C.length;O++)for(var M=0,D=(L=C[O]).slice();M<D.length;M++)ma((F=D[M]).obsSet,m.mutatedParts)&&(mt(L,F),F.subscribers.forEach(function($){return k.add($)}));else if(0<R.length){w.optimisticOps=w.optimisticOps.filter(function($){return $.trans!==m});for(var N=0,A=Object.values(w.queries.query);N<A.length;N++)for(var L,F,q,Y=0,U=(L=A[N]).slice();Y<U.length;Y++)(F=U[Y]).res!=null&&m.mutatedParts&&(b&&!F.dirty?(q=Object.isFrozen(F.res),q=Xu(F.res,F.req,R,E,F,q),F.dirty?(mt(L,F),F.subscribers.forEach(function($){return k.add($)})):q!==F.res&&(F.res=q,F.promise=Z.resolve({result:q}))):(F.dirty&&mt(L,F),F.subscribers.forEach(function($){return k.add($)})))}}}k.forEach(function($){return $()})}}},m.addEventListener("abort",c(!1),{signal:p}),m.addEventListener("error",c(!1),{signal:p}),m.addEventListener("complete",c(!0),{signal:p})),m},table:function(a){var u=t.table(a),c=u.schema.primaryKey;return i(i({},u),{mutate:function(f){var p=W.trans;if(c.outbound||p.db._options.cache==="disabled"||p.explicit||p.idbtrans.mode!=="readwrite")return u.mutate(f);var m=Et["idb://".concat(o,"/").concat(a)];return m?(p=u.mutate(f),f.type!=="add"&&f.type!=="put"||!(50<=f.values.length||_a(c,f).some(function(b){return b==null}))?(m.optimisticOps.push(f),f.mutatedParts&&Ao(f.mutatedParts),p.then(function(b){0<b.numFailures&&(mt(m.optimisticOps,f),(b=Qu(0,f,b))&&m.optimisticOps.push(b),f.mutatedParts&&Ao(f.mutatedParts))}),p.catch(function(){mt(m.optimisticOps,f),f.mutatedParts&&Ao(f.mutatedParts)})):p.then(function(b){var k=Qu(0,i(i({},f),{values:f.values.map(function(x,y){var P;return b.failures[y]?x:(x=(P=c.keyPath)!==null&&P!==void 0&&P.includes(".")?xe(x):i({},x),ae(x,c.keyPath,b.results[y]),x)})}),b);m.optimisticOps.push(k),queueMicrotask(function(){return f.mutatedParts&&Ao(f.mutatedParts)})}),p):u.mutate(f)},query:function(f){if(!Gu(W,u)||!Ju("query",f))return u.query(f);var p=((k=W.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",y=W,m=y.requery,b=y.signal,k=function(E,R,O,C){var M=Et["idb://".concat(E,"/").concat(R)];if(!M)return[];if(!(R=M.queries[O]))return[null,!1,M,null];var D=R[(C.query?C.query.index.name:null)||""];if(!D)return[null,!1,M,null];switch(O){case"query":var N=D.find(function(A){return A.req.limit===C.limit&&A.req.values===C.values&&ec(A.req.query.range,C.query.range)});return N?[N,!0,M,D]:[D.find(function(A){return("limit"in A.req?A.req.limit:1/0)>=C.limit&&(!C.values||A.req.values)&&Eh(A.req.query.range,C.query.range)}),!1,M,D];case"count":return N=D.find(function(A){return ec(A.req.query.range,C.query.range)}),[N,!!N,M,D]}}(o,a,"query",f),x=k[0],y=k[1],P=k[2],w=k[3];return x&&y?x.obsSet=f.obsSet:(y=u.query(f).then(function(E){var R=E.result;if(x&&(x.res=R),p){for(var O=0,C=R.length;O<C;++O)Object.freeze(R[O]);Object.freeze(R)}else E.result=xe(R);return E}).catch(function(E){return w&&x&&mt(w,x),Promise.reject(E)}),x={obsSet:f.obsSet,promise:y,subscribers:new Set,type:"query",req:f,dirty:!1},w?w.push(x):(w=[x],(P=P||(Et["idb://".concat(o,"/").concat(a)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[f.query.index.name||""]=w)),xh(x,w,m,b),x.promise.then(function(E){return{result:Xu(E.result,f,P==null?void 0:P.optimisticOps,u,x,p)}})}})}})}};function qo(t,o){return new Proxy(t,{get:function(a,u,c){return u==="db"?o:Reflect.get(a,u,c)}})}var xn=(_e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var o=this._versions,a=o.filter(function(u){return u._cfg.version===t})[0];return a||(a=new this.Version(t),o.push(a),o.sort(mh),a.stores({}),this._state.autoSchema=!1,a)},_e.prototype._whenReady=function(t){var o=this;return this.idbdb&&(this._state.openComplete||W.letThrough||this._vip)?t():new Z(function(a,u){if(o._state.openComplete)return u(new z.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void u(new z.DatabaseClosed);o.open().catch(ce)}o._state.dbReadyPromise.then(a,u)}).then(t)},_e.prototype.use=function(t){var o=t.stack,a=t.create,u=t.level,c=t.name;return c&&this.unuse({stack:o,name:c}),t=this._middlewares[o]||(this._middlewares[o]=[]),t.push({stack:o,create:a,level:u??10,name:c}),t.sort(function(f,p){return f.level-p.level}),this},_e.prototype.unuse=function(t){var o=t.stack,a=t.name,u=t.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(c){return u?c.create!==u:!!a&&c.name!==a})),this},_e.prototype.open=function(){var t=this;return _t(Fn,function(){return bh(t)})},_e.prototype._close=function(){var t=this._state,o=Zt.indexOf(this);if(0<=o&&Zt.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Z(function(a){t.dbReadyResolve=a}),t.openCanceller=new Z(function(a,u){t.cancelOpen=u}))},_e.prototype.close=function(a){var o=(a===void 0?{disableAutoOpen:!0}:a).disableAutoOpen,a=this._state;o?(a.isBeingOpened&&a.cancelOpen(new z.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new z.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},_e.prototype.delete=function(t){var o=this;t===void 0&&(t={disableAutoOpen:!0});var a=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new Z(function(c,f){function p(){o.close(t);var m=o._deps.indexedDB.deleteDatabase(o.name);m.onsuccess=ye(function(){var b,k,x;b=o._deps,k=o.name,x=b.indexedDB,b=b.IDBKeyRange,ha(x)||k===Eo||fa(x,b).delete(k).catch(ce),c()}),m.onerror=hn(f),m.onblocked=o._fireOnBlocked}if(a)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(p):p()})},_e.prototype.backendDB=function(){return this.idbdb},_e.prototype.isOpen=function(){return this.idbdb!==null},_e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},_e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},_e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(_e.prototype,"tables",{get:function(){var t=this;return h(this._allTables).map(function(o){return t._allTables[o]})},enumerable:!1,configurable:!0}),_e.prototype.transaction=function(){var t=(function(o,a,u){var c=arguments.length;if(c<2)throw new z.InvalidArgument("Too few arguments");for(var f=new Array(c-1);--c;)f[c-1]=arguments[c];return u=f.pop(),[o,ln(f),u]}).apply(this,arguments);return this._transaction.apply(this,t)},_e.prototype._transaction=function(t,o,a){var u=this,c=W.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var f,p,m=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(p=o.map(function(k){if(k=k instanceof u.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),t=="r"||t===Xi)f=Xi;else{if(t!="rw"&&t!=ea)throw new z.InvalidArgument("Invalid transaction mode: "+t);f=ea}if(c){if(c.mode===Xi&&f===ea){if(!m)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&p.forEach(function(k){if(c&&c.storeNames.indexOf(k)===-1){if(!m)throw new z.SubTransaction("Table "+k+" not included in parent transaction.");c=null}}),m&&c&&!c.active&&(c=null)}}catch(k){return c?c._promise(null,function(x,y){y(k)}):we(k)}var b=(function k(x,y,P,w,E){return Z.resolve().then(function(){var R=W.transless||W,O=x._createTransaction(y,P,x._dbSchema,w);if(O.explicit=!0,R={trans:O,transless:R},w)O.idbtrans=w.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(D){return D.name===Yi.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return k(x,y,P,null,E)})):we(D)}var C,M=Li(E);return M&&Yt(),R=Z.follow(function(){var D;(C=E.call(O,O))&&(M?(D=Bn.bind(null,null),C.then(D,D)):typeof C.next=="function"&&typeof C.throw=="function"&&(C=ba(C)))},R),(C&&typeof C.then=="function"?Z.resolve(C).then(function(D){return O.active?D:we(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):R.then(function(){return C})).then(function(D){return w&&O._resolve(),O._completion.then(function(){return D})}).catch(function(D){return O._reject(D),we(D)})})}).bind(null,this,f,p,c,a);return c?c._promise(f,b,"lock"):W.trans?_t(W.transless,function(){return u._whenReady(b)}):this._whenReady(b)},_e.prototype.table=function(t){if(!T(this._allTables,t))throw new z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},_e);function _e(t,o){var a=this;this._middlewares={},this.verno=0;var u=_e.dependencies;this._options=o=i({addons:_e.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},u=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,f,p,m,b,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ce,dbReadyPromise:null,cancelOpen:ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};k.dbReadyPromise=new Z(function(y){k.dbReadyResolve=y}),k.openCanceller=new Z(function(y,P){k.cancelOpen=P}),this._state=k,this.name=t,this.on=Or(this,"populate","blocked","versionchange","close",{ready:[Zi,ce]}),this.on.ready.subscribe=X(this.on.ready.subscribe,function(y){return function(P,w){_e.vip(function(){var E,R=a._state;R.openComplete?(R.dbOpenError||Z.resolve().then(P),w&&y(P)):R.onReadyBeingFired?(R.onReadyBeingFired.push(P),w&&y(P)):(y(P),E=a,w||y(function O(){E.on.ready.unsubscribe(P),E.on.ready.unsubscribe(O)}))})}}),this.Collection=(c=this,Er(uh.prototype,function(C,O){this.db=c;var w=Mu,E=null;if(O)try{w=O()}catch(M){E=M}var R=C._ctx,O=R.table,C=O.hook.reading.fire;this._ctx={table:O,index:R.index,isPrimKey:!R.index||O.schema.primKey.keyPath&&R.index===O.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:E,or:R.or,valueMapper:C!==vr?C:null}})),this.Table=(f=this,Er(ju.prototype,function(y,P,w){this.db=f,this._tx=w,this.name=y,this.schema=P,this.hook=f._allTables[y]?f._allTables[y].hook:Or(null,{creating:[Xf,ce],reading:[Qf,vr],updating:[nh,ce],deleting:[eh,ce]})})),this.Transaction=(p=this,Er(fh.prototype,function(y,P,w,E,R){var O=this;this.db=p,this.mode=y,this.storeNames=P,this.schema=w,this.chromeTransactionDurability=E,this.idbtrans=null,this.on=Or(this,"complete","error","abort"),this.parent=R||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(C,M){O._resolve=C,O._reject=M}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(C){var M=O.active;return O.active=!1,O.on.error.fire(C),O.parent?O.parent._reject(C):M&&O.idbtrans&&O.idbtrans.abort(),we(C)})})),this.Version=(m=this,Er(vh.prototype,function(y){this.db=m,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(b=this,Er(Bu.prototype,function(y,P,w){if(this.db=b,this._ctx={table:y,index:P===":id"?null:P,or:w},this._cmp=this._ascending=oe,this._descending=function(E,R){return oe(R,E)},this._max=function(E,R){return 0<oe(E,R)?E:R},this._min=function(E,R){return oe(E,R)<0?E:R},this._IDBKeyRange=b._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(a.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(a.name,"'. Closing db now to resume the delete request.")),a.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(a.name,"') was blocked")):console.warn("Upgrade '".concat(a.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Tr(o.IDBKeyRange),this._createTransaction=function(y,P,w,E){return new a.Transaction(y,P,w,a._options.chromeTransactionDurability,E)},this._fireOnBlocked=function(y){a.on("blocked").fire(y),Zt.filter(function(P){return P.name===a.name&&P!==a&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(y)})},this.use(kh),this.use(Rh),this.use(Oh),this.use(wh),this.use(_h);var x=new Proxy(this,{get:function(y,P,w){if(P==="_vip")return!0;if(P==="table")return function(R){return qo(a.table(R),x)};var E=Reflect.get(y,P,w);return E instanceof ju?qo(E,x):P==="tables"?E.map(function(R){return qo(R,x)}):P==="_createTransaction"?function(){return qo(E.apply(this,arguments),x)}:E}});this.vip=x,u.forEach(function(y){return y(a)})}var Bo,Ge=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ph=(Oa.prototype.subscribe=function(t,o,a){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:o,complete:a})},Oa.prototype[Ge]=function(){return this},Oa);function Oa(t){this._subscribe=t}try{Bo={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Bo={indexedDB:null,IDBKeyRange:null}}function nc(t){var o,a=!1,u=new Ph(function(c){var f=Li(t),p,m=!1,b={},k={},x={get closed(){return m},unsubscribe:function(){m||(m=!0,p&&p.abort(),y&&Yn.storagemutated.unsubscribe(w))}};c.start&&c.start(x);var y=!1,P=function(){return Qi(E)},w=function(R){Ko(b,R),ma(k,b)&&P()},E=function(){var R,O,C;!m&&Bo.indexedDB&&(b={},R={},p&&p.abort(),p=new AbortController,C=function(M){var D=Ut();try{f&&Yt();var N=qn(t,M);return N=f?N.finally(Bn):N}finally{D&&Lt()}}(O={subscr:R,signal:p.signal,requery:P,querier:t,trans:null}),Promise.resolve(C).then(function(M){a=!0,o=M,m||O.signal.aborted||(b={},function(D){for(var N in D)if(T(D,N))return;return 1}(k=R)||y||(Yn(Pr,w),y=!0),Qi(function(){return!m&&c.next&&c.next(M)}))},function(M){a=!1,["DatabaseClosedError","AbortError"].includes(M==null?void 0:M.name)||m||Qi(function(){m||c.error&&c.error(M)})}))};return setTimeout(P,0),x});return u.hasValue=function(){return a},u.getValue=function(){return o},u}var xt=xn;function Ea(t){var o=Zn;try{Zn=!0,Yn.storagemutated.fire(t),va(t,!0)}finally{Zn=o}}S(xt,i(i({},mo),{delete:function(t){return new xt(t,{addons:[]}).delete()},exists:function(t){return new xt(t,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return o=xt.dependencies,a=o.indexedDB,o=o.IDBKeyRange,(ha(a)?Promise.resolve(a.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==Eo})}):fa(a,o).toCollection().primaryKeys()).then(t)}catch{return we(new z.MissingAPI)}var o,a},defineClass:function(){return function(t){g(this,t)}},ignoreTransaction:function(t){return W.trans?_t(W.transless,t):t()},vip:da,async:function(t){return function(){try{var o=ba(t.apply(this,arguments));return o&&typeof o.then=="function"?o:Z.resolve(o)}catch(a){return we(a)}}},spawn:function(t,o,a){try{var u=ba(t.apply(a,o||[]));return u&&typeof u.then=="function"?u:Z.resolve(u)}catch(c){return we(c)}},currentTransaction:{get:function(){return W.trans||null}},waitFor:function(t,o){return o=Z.resolve(typeof t=="function"?xt.ignoreTransaction(t):t).timeout(o||6e4),W.trans?W.trans.waitFor(o):o},Promise:Z,debug:{get:function(){return fn},set:function(t){Eu(t)}},derive:B,extend:g,props:S,override:X,Events:Or,on:Yn,liveQuery:nc,extendObservabilitySet:Ko,getByKeyPath:ue,setByKeyPath:ae,delByKeyPath:function(t,o){typeof o=="string"?ae(t,o,void 0):"length"in o&&[].map.call(o,function(a){ae(t,a,void 0)})},shallowClone:ve,deepClone:xe,getObjectDiff:wa,cmp:oe,asap:he,minKey:-1/0,addons:[],connections:Zt,errnames:Yi,dependencies:Bo,cache:Et,semVer:"4.0.11",version:"4.0.11".split(".").map(function(t){return parseInt(t)}).reduce(function(t,o,a){return t+o/Math.pow(10,2*a)})})),xt.maxKey=Tr(xt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yn(Pr,function(t){Zn||(t=new CustomEvent(oa,{detail:t}),Zn=!0,dispatchEvent(t),Zn=!1)}),addEventListener(oa,function(t){t=t.detail,Zn||Ea(t)}));var Vt,Zn=!1,tc=function(){};return typeof BroadcastChannel<"u"&&((tc=function(){(Vt=new BroadcastChannel(oa)).onmessage=function(t){return t.data&&Ea(t.data)}})(),typeof Vt.unref=="function"&&Vt.unref(),Yn(Pr,function(t){Zn||Vt.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!xn.disableBfCache&&t.persisted){fn&&console.debug("Dexie: handling persisted pagehide"),Vt!=null&&Vt.close();for(var o=0,a=Zt;o<a.length;o++)a[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!xn.disableBfCache&&t.persisted&&(fn&&console.debug("Dexie: handling persisted pageshow"),tc(),Ea({all:new Te(-1/0,[[]])}))})),Z.rejectionMapper=function(t,o){return!t||t instanceof qt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Ou[t.name]?t:(o=new Ou[t.name](o||t.message,t),"stack"in t&&K(o,"stack",{get:function(){return this.inner.stack}}),o)},Eu(fn),i(xn,Object.freeze({__proto__:null,Dexie:xn,liveQuery:nc,Entity:Du,cmp:oe,PropModification:xr,replacePrefix:function(t,o){return new xr({replacePrefix:[t,o]})},add:function(t){return new xr({add:t})},remove:function(t){return new xr({remove:t})},default:xn,RangeSet:Te,mergeRanges:Mr,rangesOverlap:$u}),{default:xn}),xn})}(Jo)),Jo.exports}var cg=ug();const $a=ag(cg),Yc=Symbol.for("Dexie"),li=globalThis[Yc]||(globalThis[Yc]=$a);if($a.semVer!==li.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$a.semVer} and ${li.semVer}`);const{liveQuery:_g,mergeRanges:kg,rangesOverlap:Og,RangeSet:Eg,cmp:xg,Entity:Rg,PropModification:Pg,replacePrefix:Tg,add:Cg,remove:Ig}=li,Hr=new li("dining-menu");Hr.version(1).stores({configuration:"++id",menus:"++id, date",venues:"++id, name",devices:"++id"});const lg=e=>{e.filter(n=>n.name!=="No Venues Found").forEach(async n=>{await Hr.venues.where("name").equals(n.name).first()||Hr.venues.add({name:n.name})})},fg=async(e=er.Now.plainDateISO().toString())=>await Hr.menus.where("date").equals(e.toString()).first(),hg=e=>Hr.menus.add(e).then(n=>({id:n,...e})),dg=async e=>fg(e.date).then(n=>n||(lg(e.venues),hg(e))),Tt=new URL("https://oncampusdining.com/api/menu/js/?campus=cedarville"),pg=async(e=er.Now.plainDateISO().toString())=>{var i;Tt.searchParams.has("startDate")?Tt.searchParams.set("startDate",e):Tt.searchParams.append("startDate",e),Tt.searchParams.has("_t")?Tt.searchParams.set("_t",er.Now.instant().epochMilliseconds.toString()):Tt.searchParams.append("_t",er.Now.instant().epochMilliseconds.toString());const r=await(await fetch(Tt.href)).text();return rg((i=new Function(`${r};return menuData;`)())==null?void 0:i[0])},Zc=async(e=er.Now.plainDateISO().toString())=>{const n=await pg(e);if(n)return await dg(og(n))};nd([{"revision":null,"url":"assets/DeviceLayout-BHGzjz9z.js"},{"revision":null,"url":"assets/GridLayout-CE47Y6h2.js"},{"revision":null,"url":"assets/index-BJz-erGI.css"},{"revision":null,"url":"assets/index-BSPnzOis.js"},{"revision":"7da797a96a961d84fa20210499a5e57c","url":"icons/Dining Device.html"},{"revision":"b5b893cf54c8ba967df8f083e6f24ea3","url":"index.html"},{"revision":"e90d54e9c9114e4b5338794581a9fedc","url":"registerSW.js"},{"revision":"bb5c3256a5f7772f4025203e66bd17ff","url":"icons/apple-touch-icon-114x114.png"},{"revision":"5392e0ef7753134ccb2d950f0eadf1c8","url":"icons/apple-touch-icon-120x120.png"},{"revision":"a224ae80fa3468206938ffcca48640bf","url":"icons/apple-touch-icon-144x144.png"},{"revision":"47992af0aba05f23df34d9d8a2a5f702","url":"icons/apple-touch-icon-152x152.png"},{"revision":"43b61bd8c31f4e8d35ab1658925fdf48","url":"icons/apple-touch-icon-57x57.png"},{"revision":"d7b1cdaff329fbb3883980ba7486a181","url":"icons/apple-touch-icon-60x60.png"},{"revision":"528f3527008806d0169a79804f3f3656","url":"icons/apple-touch-icon-72x72.png"},{"revision":"22bec2c053970d1b443964aedbfce6cc","url":"icons/apple-touch-icon-76x76.png"},{"revision":"6fc8ac8c0aa236ef21b571f5b623a551","url":"manifest.webmanifest"}]);function mg(){navigator.serviceWorker.ready.then(e=>{console.log(e),e.periodicSync.register("fetch-pioneer-menu",{minInterval:6*60*60*1e3}).then(()=>{console.log("Periodic Sync registered")})}).catch(console.error)}navigator.permissions.query({name:"periodic-background-sync"}).then(e=>{e.state==="granted"?mg():console.log("not granted")});self.addEventListener("periodicsync",e=>{if(e.tag==="fetch-pioneer-menu"){console.clear();const n=er.Now.plainDateISO();console.log(`fetching data for ${n.toString()}`),e.waitUntil(Zc(n.toString())),console.log(`fetching data for ${n.add({days:1}).toString()}`),e.waitUntil(Zc(n.add({days:1}).toString()))}});
